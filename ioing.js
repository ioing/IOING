"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){window.App={config:{root:""}},document.write("<style>* { margin : 0; padding : 0 } \n\n                        html, body { position: absolute; width: 100%; height: 100%; background: #fff; overflow: hidden } \n\n                        mask, view { position: absolute; width: 100%; height: 100%; overflow: hidden } \n\n                        module-container[type=module] { display: block; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100% } \n\n                        iframe[app=true] { width: 100%; height: 100%; border: 0 } \n\n                    </style>"),window.CSSBaseStyle="* { box-sizing: border-box; margin : 0; padding : 0; text-size-adjust: 100%; tap-highlight-color: rgba(0, 0, 0, 0) } \n\n                        html, body { position: absolute; width: 100%; height: 100%; background: #fff; font-size: 10dp; overflow: hidden } \n\n                        a { text-decoration: none } \n\n                        *[href], *[transform], *[on-tap] { cursor: pointer } \n\n                        button { background-color: transparent; border: 0; outline: 0 } \n\n                        input, textarea, htmlarea { user-select: initial; touch-callout: initial; border: 0; outline: 0; appearance: none } \n\n                        htmlarea { display: inline-block; text-rendering: auto; letter-spacing: normal; word-spacing: normal; text-indent: 0px; text-align: start; font: initial } \n\n                        article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block } \n\n                        ol, ul { list-style: none } \n\n                        table { border-collapse: collapse; border-spacing: 0 } \n\n\n                        scroll, scrolling, scrollbar, indicator { display: block; box-sizing: border-box } \n\n                        scroll { position: relative; padding: 0; border: 0; overflow: hidden } \n\n                        scroll[fullscreen] { position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 2 } \n\n                        scroll > scrolling, scroll > scrolling > infinite { display: block; position: absolute; z-index: 2; backface-visibility: hidden } \n\n                        scroll > scrolling { min-width: 100%; min-height: 100% } \n\n                        scroll[y=false] > scrolling { position: relative; display: inline-block } \n\n                        scroll > scrolling > infinite { top: 0; left: 0; width: 100% } \n\n                        scroll > scrolling > infinite > fragment { display: block; position: relative; z-index: 2; width: 100% } \n\n                        scroll > scrollbar { position: absolute; z-index: 9999; border-radius: 3dp; overflow: hidden } \n\n                        scroll > scrollbar > indicator { position: absolute; z-index: 9; border-radius: 3dp; background: rgba(0, 0, 0, 0.4) } \n\n                        \n                        pullup, pullright, pulldown, pullleft { display: block; position: absolute; z-index: 9999; text-align: center } \n\n                        pullup { bottom: 0; width: 100% } \n\n                        pulldown { top: 0; width: 100% } \n\n                        pullright { left: 0; height: 100% } \n\n                        pullleft { right: 0; height: 100% } \n\n                        pullstart, pulling, pullend, pullover { display: none } \n\n                        pullup[pullstart] pullstart, pullright[pullstart] pullstart, pulldown[pullstart] pullstart, pullleft[pullstart] pullstart { display: block } \n\n                        pullup[pulling] pulling, pullright[pulling] pulling, pulldown[pulling] pulling, pullleft[pulling] pulling { display: block } \n\n                        pullup[pullend] pullend, pullright[pullend] pullend, pulldown[pullend] pullend, pullleft[pullend] pullend { display: block } \n\n                        pullup[pullover] pullover, pullright[pullover] pullover, pulldown[pullover] pullover, pullleft[pullover] pullover { display: block } \n\n                        \n                        relative-windows, absolute-windows { position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 10000; width: 100%; height: 100%; overflow: hidden } \n";var t=function(t,e,i,n){var o={};return o.webkit=!!e.match(/WebKit\/([\d.]+)/),o.ipod=!(!/iPod/i.test(i)&&!e.match(/(iPod).*OS\s([\d_]+)/)),o.ipad=!(!/iPad/i.test(t.userAgent)&&!e.match(/(iPad).*OS\s([\d_]+)/)),o.iphone=!!(/iPhone/i.test(i)||!o.ipad&&e.match(/(iPhone\sOS)\s([\d_]+)/)),o.ie=!!e.match(/MSIE 10.0/i),o.mac=/Mac/i.test(i),o.ios=o.ipod||o.ipad||o.iphone,o.android=!(!e.match(/(Android)\s+([\d.]+)/)&&!e.match(/Silk-Accelerated/)),o.android=o.android&&!o.webkit,o.androidICS=!(!o.android||!e.match(/(Android)\s4/)),o.chrome=!!e.match(/Chrome/),o.safari=!(!e.match(/Safari/)||o.chrome),o.mobileSafari=o.ios&&!!n.match(/(?:Version\/)([\w\._]+)/),o.opera=!!e.match(/Opera/),o.fennec=!!e.match(/fennec/i)||!!e.match(/Firefox/),o.MSApp="object"===("undefined"==typeof MSApp?"undefined":_typeof(MSApp)),o.wechat=!!e.match(/MicroMessenger/i),o.ieTouch=!(!o.ie||!e.toLowerCase().match(/touch/i)),o.supportsTouch=window.DocumentTouch&&document instanceof window.DocumentTouch||"ontouchstart"in window,o.webos=!!e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),o.touchpad=!(!o.webos||!e.match(/TouchPad/)),o.playbook=!!e.match(/PlayBook/),o.blackberry10=!!e.match(/BB10/),o.blackberry=!!(o.playbook||o.blackberry10||e.match(/BlackBerry/)),o.ios&&(o.iosVersion=parseFloat(n.slice(n.indexOf("Version/")+8))||-1),o.android&&(o.androidVersion=parseFloat(n.slice(n.indexOf("Android")+8))||-1),o.safari&&(o.safariVersion=n.match(/Safari\/([\d.]+)/)[1]),o.chrome&&(o.chromeVersion=n.match(/Chrome\/([\d.]+)/)[1]),o.webkit&&(o.webKitVersion=n.match(/WebKit\/([\d.]+)/)[1]),o}(navigator,navigator.userAgent,navigator.platform,navigator.appVersion||navigator.userAgent);window.parent.viewportScale?window.viewportScale=window.parent.viewportScale:function(){function e(e,i,n){return document.write('<meta id="'+e+'" name="viewport" content="width=device-width,initial-scale='+i+",minimum-scale="+i+",maximum-scale="+i+",user-scalable=no"+(n&&t.androidVersion<5?",target-densitydpi=device-dpi":"")+'">'),document.getElementById(e)}var i=window.innerWidth,n=e("test-viewport","1.0"),o=window.innerWidth,s=document.documentElement.offsetWidth;n.parentNode.removeChild(n);var r=e("real-viewport",1/devicePixelRatio,!0),a=Math.max(window.innerWidth,window.document.documentElement.offsetWidth),h=devicePixelRatio*Math.min(o,s),l=window.innerWidth!=window.screen.width&&o!=i||(window.innerWidth==window.screen.width||window.innerWidth==a)&&o==i&&a==h?Math.max(window.innerWidth/o,document.documentElement.offsetWidth/s):null;null==l&&(r.parentNode.removeChild(r),e("real-viewport","1.0"),l=1),window.viewportScale=l}();var e=function(){var t=document.getElementById("ioing")||document.getElementsByTagName("script")[0],e=t.getAttribute("root"),i=[];return e?null===e.match(/^\w+\:/)&&0!==e.indexOf("//")&&(i=location.pathname.split("/"),i.pop(),e=location.origin+i.join("/")+e):(i=t.src.split("/"),i.pop(),e=i.join("/")+"/"),App.config.root=e}(),i=function(t){function i(t,e,i,n){this.name=t,this.body=n,this.deps=e,this.model=i,this.exports={},this.created=!1,Object.defineProperty(this.exports,"__esModule",{value:!0})}function n(){var t=0,e=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];switch(arguments.length){case 1:e=null,n=arguments[0],i=null;break;case 2:n=arguments[1],"string"==typeof e?i=null:(e=null,i=arguments[0])}i=i||a(n.toString())||[],-1!==["module","exports"].indexOf(i[0])&&(t=1),e?(c.call=null,o(e,i,t,n,s)):c.call=function(e){o(e,i,t,n,s)}}function o(t,e,n,o,r){var a=new i(t,e,n,o);u[t]=a,l("moduleLoad",a);for(var c=[],d=0;d<e.length;d++){var p=e[d];null==u[p]&&-1==["module","exports"].indexOf(p)&&c.push(p)}0==c.length?a._create():(h(c,function(){a._create()}),setTimeout(function(){for(var t=0;t<c.length;t++){var e=c[t];u[e]||s(e,r)}},0))}function s(e,i){if(!p[e]){p[e]=!0;var n=r(e)+(-1!==e.split("/").pop().indexOf(".js")?"":".js"),o=t.document.head,s=t.document.createElement("SCRIPT");l("scriptLoad",n),s.async=!0,s.src=n,o.appendChild(s),s.onload=function(){l("scriptLoaded",n),c.call&&c.call(e),o.removeChild(s),s=null},s.onerror=function(){i&&i(),o.removeChild(s),s=null}}}function r(t){return 0===t.indexOf("~/")?e+t.substr(2):t}function a(t){for(var e=[],i=f.exec(t);null!=i;)e.push(i[1]),i=f.exec(t);return e}function h(t,e){for(var i=0,n=0;n<t.length;n++){var o=t[n];null==d[o]&&(d[o]=[]),d[o].push(function(n){return++i===t.length?e(n):null})}}function l(t,e){var i=d[t];if(null!=i)for(var n=0;n<i.length;n++)i[n](e)}var c={},u={},d={},p={},f=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/gi;i.prototype={_get:function(t,e,i){switch(t=t||this.name){case"module":return this;case"exports":t=this.name}return e?(n("argument",t,function(t){e(t)},i),this):u[t]?function(e){return e=u[t].exports,e.default?(Object.defineProperty(e.default,"__esModule",{value:!0}),e.default):e}():null},_deps:function(){for(var t=[],e=0,i=this.deps.length;e<i;e++){var n=this.deps[e];t.push(this._get(n))}switch(this.model){case 1:return t;case 0:default:return[this._get,this,this._get()]}},_create:function(){this.created||(this.created=!0,l("moduleExecute",this),this.body.apply(this.body,this._deps()),l(this.name,this))}},t.define=n},n=function(e){var i=document.createElement("div"),n=i.style;n.position="fixed",n.top="0",n.left="0",n.zIndex="1",document.documentElement.appendChild(i),this.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.vendor=t.webkit?"Webkit":t.fennec?"Moz":t.ie?"ms":t.opera?"O":"",this.prefix=t.webkit?"-webkit-":t.fennec?"-moz-":t.ie?"-ms-":t.opera?"-O-":"",this.cssTransformStart=t.opera?"(":"3d(",this.cssTransformEnd=t.opera?")":",0)",this.viewportScale=window.viewportScale;var o={},s={},r=["webkit","Moz","ms","O"],a=["-webkit-","-moz-","-ms-","-O-"];return this.CSSSupport=this.prefixStyle=function(t,e){if(e&&t in s)return s[t];if(!e&&t in o)return o[t];for(var i=0,h=r.length+1;i<h;){var l=((r[i]?r[i]+"-":"")+t).replace(/-(\w)/g,function(){return arguments[1].toUpperCase()}),c=(a[i]||"")+t;if(l in n)return e?s[t]=c:o[t]=l;i++}return e?s[t]=t:o[t]=!1},this.hasTranslate3d=!(!this.prefixStyle("transform")||!window.getComputedStyle),this.isBadTransition=function(){return t.android?!!(t.webkit&&parseFloat(t.webKitVersion)<535.19)||(!!(t.chrome&&parseFloat(t.chromeVersion)<53)||!!(t.safari&&parseFloat(t.safariVersion)<535.19)):!t.ios}(),this.observer=!!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver),this.shadowRoot=!!document.documentElement.createShadowRoot,this.svg=!!window.SVGAngle,this.keyframes=!!(window.CSSRule.WEBKIT_KEYFRAMES_RULE||window.CSSRule.MOZ_KEYFRAMES_RULE||window.CSSRule.MS_KEYFRAMES_RULE||window.CSSRule.O_KEYFRAMES_RULE),this.keyframesPrefix=window.CSSRule.WEBKIT_KEYFRAMES_RULE?"-webkit-":window.CSSRule.MOZ_KEYFRAMES_RULE?"-moz-":window.CSSRule.MS_KEYFRAMES_RULE?"-ms-":window.CSSRule.O_KEYFRAMES_RULE?"-o-":"",this.supportTransition=this.keyframes,this.iframeInputBlurBug=t.ios&&t.iosVersion<9,this.supportSizeUnits=function(){var t,e,n={px:!0,dp:!1,vw:!1,vh:!1,vmin:!1,vmax:!1,mm:!1,cm:!1,pt:!1,pc:!1,in:!1,"%":!0};return t=i.offsetWidth,e=i.offsetHeight,i.style.width=0,i.style.width="10vw",n.vw=n.vh=i.offsetWidth==Math.round(document.documentElement.offsetWidth/10),i.style.width=0,i.style.width="10vmin",n.vmin=i.offsetWidth==Math.round(Math.min(t,e)/10),i.style.width=0,i.style.width="10vmax",n.vmax=i.offsetWidth==Math.round(Math.max(t,e)/10),i.style.width=0,i.style.width="10mm",n.mm=i.offsetWidth>0,i.style.width=0,i.style.width="10cm",n.cm=i.offsetWidth>0,i.style.width=0,i.style.width="10pt",n.pt=i.offsetWidth>0,i.style.width=0,i.style.width="10pc",n.pc=i.offsetWidth>0,i.style.width=0,i.style.width="10in",n.in=i.offsetWidth>0,n}(),this.supportSizeCalc=function(){var t;return i.style.width="100%",t=i.offsetWidth,i.style.width="calc((100vw/10 - 1px) / 2)",i.offsetWidth==Math.round((t/10-1)/2)}(),document.documentElement.removeChild(i),this}.call({},navigator.userAgent),o=function(e){var i,o;i={os:t,dpi:window.devicePixelRatio,scale:window.viewportScale,width:window.document.documentElement.offsetWidth||window.innerWidth,height:window.document.documentElement.offsetHeight||window.innerHeight,orientation:window.orientation},i.viewportWidth=e.viewportWidth=i.width/i.scale,i.viewportHeight=e.viewportHeight=i.height/i.scale,o={px:1,dp:i.scale,mm:3.76562*i.scale,cm:37.7812*i.scale,pt:1.32812*i.scale,pc:16*i.scale,in:96*i.scale,vw:i.width/100,vh:i.height/100,vmin:Math.min(i.width,i.height)/100,vmax:Math.max(i.width,i.height)/100,__unitRegExp__:/(?=\b|\-|\.)(\-?\.?[0-9]+\.?[0-9]*)(px|mm|cm|pt|pc|in|dp|vw|vh|vm|vmin|vmax|%)\b/gi,__nativeUnits__:n.supportSizeUnits},e.device={ui:i,os:t,feat:n},e.UI=i,e.UNIT=o,e.DP=function(t){return t*i.scale}},s=function(){function t(){this.id=this.createUUID()}return t.prototype.valueOf=function(){return this.id},t.prototype.toString=function(){return this.id},t.prototype.createUUID=function(){var e=new Date(1582,10,15,0,0,0,0),i=new Date,n=i.getTime()-e.getTime();return t.getIntegerBits(n,0,31)+t.getIntegerBits(n,32,47)+(t.getIntegerBits(n,48,59)+"1")+t.getIntegerBits(t.rand(4095),0,7)+t.getIntegerBits(t.rand(4095),0,7)+(t.getIntegerBits(t.rand(8191),0,7)+t.getIntegerBits(t.rand(8191),8,15)+t.getIntegerBits(t.rand(8191),0,7)+t.getIntegerBits(t.rand(8191),8,15)+t.getIntegerBits(t.rand(8191),0,15))},t.getIntegerBits=function(e,i,n){var o=t.returnBase(e,16),s=new Array,r="",a=0;for(a=0;a<o.length;a++)s.push(o.substring(a,a+1));for(a=Math.floor(i/4);a<=Math.floor(n/4);a++)s[a]&&""!=s[a]?r+=s[a]:r+="0";return r},t.returnBase=function(t,e){return t.toString(e).toUpperCase()},t.rand=function(t){return Math.floor(Math.random()*(t+1))},t}(),r=function(){function t(t,e,n){if(null!=t.__lookupGetter__(e))return!0;var o=t[e],s=o,r=this,a=function(){return s},h=function(a){"[object Array]"===Object.prototype.toString.call(a)&&(a=i(a,n,r)),o=s,s=a,n.call(t,e,o,a)};return delete t[e]&&(Object.defineProperty?Object.defineProperty(t,e,{get:a,set:h,enumerable:!0,configurable:!0}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(t,e,a),Object.prototype.__defineSetter__.call(t,e,h))),this}function e(t,e){var i=t[e];return delete t[e],t[e]=i,this}function i(t,e,i){function n(t,e,n){return function(){var n=Array.prototype.concat.apply(t),o=Array.prototype[e].apply(t,arguments);return t.updated(n,i),o}}if(!0!==t.__wasExtended)return t.updated=function(t,n){e.call(this,"items",t,this,i)},t.concat=n(t,"concat",i),t.join=n(t,"join",i),t.pop=n(t,"pop",i),t.push=n(t,"push",i),t.reverse=n(t,"reverse",i),t.shift=n(t,"shift",i),t.slice=n(t,"slice",i),t.sort=n(t,"sort",i),t.splice=n(t,"splice",i),t.unshift=n(t,"unshift",i),t.__wasExtended=!0,t}return"undefined"!=typeof module&&(module.exports.watch=t,module.exports.unwatch=e),{watch:t,unwatch:e}}(),a=function(){function t(t){return this.inputor=t,this}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t=this,e={position:"absolute",left:-9999,top:0,zIndex:-2e4};return"TEXTAREA"===this.inputor.nodeName&&this.css_attr.push("width"),this.css_attr.each(function(i,n){return e[n]=t.inputor.css(n)}),e},t.prototype.create=function(t){var e=this,i=this.mirrorCss();return this.mirror=document.createElement("div"),i.each(function(t,i){e.mirror.style[t]=i}),this.mirror.html(t),this.inputor.after(this.mirror),this},t.prototype.rect=function(t){var e=this.mirror.find(t),i=e.position(),n={left:i.left,top:i.top,height:e[0].offsetHeight};return this.mirror.remove(),n},t}();window.__defineUnify__=function(){var t=n.vendor.length,e={vendor:new RegExp("^"+n.vendor,"ig")},h=function(){},l=function(t){return t.stopPropagation()},c=function(t){return t.preventDefault()};return function(u){u.Object.defineProperty(u.Object.prototype,"extendProperty",{configurable:!0,writable:!0}),u.Object.prototype.extendProperty=function(t,e){try{u.Object.defineProperty(this,t,{configurable:!0,writable:!0}),void 0!==e&&(this[t]=e)}catch(t){}},u.Object.defineProperty(u.Object.prototype,"extendProperties",{configurable:!0,writable:!0}),u.Object.prototype.extendProperties=function(t){for(var e in t)this.extendProperty(e,t[e])};var d=u.document;i(u),o(u),top.addEventListener("resize",function(){o(u)}),u.keyboard={},u.noop=h,u.stopPropagation=l,u.preventDefaultEvent=c;for(var p in u){if(e.vendor.exec(p)){var f=p.charAt(t),m=p.substr(t).replace(/(\w)/,function(t){return t.toLowerCase()});if(f>"A"||f<"Z")try{u[m]||(Object.defineProperty(u,m,{configurable:!0,writable:!0}),u[m]=u[p])}catch(t){}}}u.requestAnimationFrame&&u.cancelAnimationFrame||(u.extendProperty("requestAnimationFrame",function(){var t=0;return function(e){var i=Date.now(),n=Math.max(t+16.78,i);return setTimeout(function(){e(t=n)},n-i)}}()),u.extendProperty("cancelAnimationFrame",u.clearTimeout)),u.requestIdleCallback||u.extendProperty("requestIdleCallback",function(t){return setTimeout(function(){t({timeRemaining:function(){return Number.MAX_VALUE}})},0)}),u.document.head||u.document.extendProperty("head",u.document.getElementsByTagName("head")[0]||u.document.documentElement),u.Date.now||u.Date.extendProperty("now",function(){return(new Date).getTime()}),u.extendProperty("UUID",s),function(){var t=u.Array,e=u.Object,i=u.String,o=u.Node,s=u.Element,h=u.DOMParser,l=u.Function,c=u.CSSStyleDeclaration;!function(e){e.trim||e.extendProperty("trim",function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),e.splitCells||e.extendProperty("splitCells",function(){var t=/(['"])[^'"]*\1/;return function(e){var i=this;return i=i.replace(t,function(t){return encodeURIComponent(t)}),i=i.split(e),i.map(function(t){return decodeURIComponent(t)})}}()),e.extendProperty("paramsToObject",function(t){for(var e=this.split(t||/[\?\#\,\&\:\=\/]/),i=e.length-1,n={};i>0;)n[e[i-1]]=e[i],i-=2;return n}),e.extendProperty("repeat",function(e){return new t(1+e).join(this)}),e.extendProperty("staticAnalysis",function(){var t=/\.|\[/,e=/^[a-zA-Z_$]+\w*$/,i=/^[0-9]*\.?[0-9]*$/,n=/window|top/,o="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",s=new RegExp("\\b(?:"+o.split(",").join("|")+")\\b");return function(){var o=this.split(t),r=o[0],a=u.sandboxWindow[r];return a?void 0===a?"undefined":_typeof(a):i.test(r)?"number":s.test(r)?"token":n.test(r)?"object":e.test(r)?"variable":"unknown"}}())}(i.prototype),function(t){t.extendProperty("getInstanceType",function(){return t.toString.call(this).match(/^\[object\s(.*)\]$/)[1]}),t.extendProperty("extend",function(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];for(var n in i)this[n]=i[n]}return this}),"function"!==e.assign&&e.extendProperty("assign",function(t){if(void 0===t||null===t)throw new TypeError("Can not convert undefined or null to object");for(var i=e(t),n=1,o=arguments.length;index<o;n++){var s=arguments[n];if(void 0!==s&&null!==s)for(var r in s)e.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i}),t.extendProperty("objectToParams",function(t){var e="",i=[],n=encodeURIComponent;if("string"==typeof(t=t||this))e=t;else{for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];switch(void 0===s?"undefined":_typeof(s)){case"object":s=JSON.stringify(t[o]);break;case"string":s=s}i.push(o+"="+n(s))}e=i.join("&")}return e}),t.extendProperty("countProperties",function(){var t=0;for(var e in this)this.hasOwnProperty(e)&&t++;return t}),t.extendProperty("each",function(t,e){e=e||this;var i,n,o,s;switch(this.getInstanceType()){case"Object":i=0,o=this.countProperties();for(n in this)if(this.hasOwnProperty(n)){if(!1===t.call(e,n,this[n],i+1,o))return this;i++}break;default:for(s=this.nodeType?this.childNodes:this,i=0;i<s.length;i++)if(!1===t.call(e,i,s[i],i+1,s.length))return this}return this}),t.extendProperty("equals",function(t,i){if(1==arguments.length&&(i=this),t===i)return!0;if(!(t instanceof e&&i instanceof e))return!1;if(t.constructor!==i.constructor)return!1;for(var n in t)if(t.hasOwnProperty(n)){if(!i.hasOwnProperty(n))return!1;if(t[n]===i[n])continue;if("object"!==_typeof(t[n]))return!1;if(!e.equals(t[n],i[n]))return!1}for(n in i)if(i.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}),t.extendProperty("clone",function(){return e.create(this)}),t.extendProperty("watch",function(t,e){r.watch(this,t,e)}),t.extendProperty("unwatch",function(t){r.unwatch(this,t)}),t.extendProperty("initial",function(t,e){return this[t]||(this[t]=e)}),t.extendProperty("setValueOfHref",function(t,e){new l("scope","value","scope."+t+" = value")(this,e)}),t.extendProperty("getValueByRoute",function(){var t=/[^\w|\.$]+/,e=/(['"])[^'"]*\1/,i=/\.|\[/,n=/^[\w\_\$\.]*$/;return function(o,s,r){var a;if(!o)return this;if(n.test(o))return a=this.getValueByLink(o),s?{factory:null,result:a}:a;if(a=this[o])return s?{factory:null,result:a}:a;var h,l,c,d=[this],p=["scope"],f={},m=o.replace(e,""),g=m.split(t).unique();for(h=g.length-1;h>=0;h--)c=g[h].split(i)[0],f[c]||(c&&c.length&&(this[c]||"variable"==c.staticAnalysis())&&(c in this?(p.push(c),d.push(this[c])):(p.push(c),d.push(void 0))),f[c]=!0);try{l="function"==typeof s?s:new u.SandboxFunction(p.join(","),"try { return ("+o+") } catch (e) {}"),a=l.apply(this,d)}catch(t){r&&r(t)}return s?{factory:l,result:a}:a}}()),t.extendProperty("getValueByRoutes",function(t,e,i){var n=[];"string"==typeof t&&(t=[t]);for(var o=0,s=t.length;o<s;o++)n.push(this.getValueByRoute(t[o],e,i));return n}),t.extendProperty("getFunctionByRoute",function(t,e,i){return this.getValueByRoute(t,e||!0,i)}),t.extendProperty("getFunctionByRoutes",function(t,e,i){return this.getValueByRoutes(t,e||!0,i)}),t.extendProperty("getValueByLink",function(){var t=/\./;return function(e){for(var i=e.split(t),n=this,o=0,s=i.length;o<s&&n;o++)if(n=n[i[o]],1==s)["true"].consistOf(i[o])&&(n=!0),["false","null","undefined"].consistOf(i[o])&&(n=!1);else if("object"!==(void 0===n?"undefined":_typeof(n))&&o<s-1){n=void 0;break}return n}}())}(e.prototype),function(t){t.consistOf||t.extendProperty("consistOf",function(t){for(var e=this.length;e--;)if(this[e]===t)return!0;return!1}),t.map||t.extendProperty("map",function(t){for(var e=[],i=0;i<this.length;i++){var n=t(this[i],i);null!=n&&e.push(n)}return e}),t.unique||t.extendProperty("unique",function(){for(var t,e=[],i={},n=0;null!=(t=this[n]);n++)i[t]||(e.push(t),i[t]=!0);return e})}(t.prototype),function(t){t.extendProperty("observer",function(t,e){var i=u.MutationObserver,t=t||{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,attributeFilter:["id","class","style","src","width","height"]};try{if(i)new i(function(t){e(t)}).observe(this,t);else{var n=[],o=[];t?(t.each(function(t,e){switch(t){case"attributes":e&&o.push("DOMAttrModified");break;case"childList":e&&o.push("DOMNodeInserted"),e&&o.push("DOMNodeRemoved");break;case"characterData":e&&o.push("DOMCharacterDataModified");break;case"subtree":e&&o.push("DOMNodeInserted"),e&&o.push("DOMNodeRemoved"),e&&o.push("DOMNodeInsertedIntoDocument"),e&&o.push("DOMNodeRemovedFromDocument")}}),o=8==o.length?"DOMSubtreeModified":o.join(" ")):o="DOMSubtreeModified",this.bind(o,function(t){0==n.length&&setTimeout(function(){e([].concat(n)),n=[]},0),n.push(t)})}}catch(t){}})}(o.prototype),function(t){t.extendProperty("Animate",function(t){return this.animationEvent||this.extendProperty("animationEvent",u.Move(this)),this.animationEvent}),t.extendProperty("Touch",function(t){var e=this.ownerDocument.defaultView;return e?(this.touchEvent||this.extendProperty("touchEvent",new e.Touch(this,t)),this.touchEvent):{}}),t.extendProperty("Scroll",function(t,e){var i=this.ownerDocument.defaultView;return i?(this.scrollEvent||this.extendProperty("scrollEvent",new i.Scroll(this,t,e)),this.scrollEvent):{}}),t.extendProperty("getAttrSign",function(t){return t=this.getAttribute(t),["false","none",null].consistOf(t)?t=!1:["","true"].consistOf(t)?t=!0:isNaN(t)||(t=Number(t)),t}),t.extendProperty("getOwnerSelection",function(t){return(this.parentShadowRoot&&1==device.feat.shadowRoot?this.parentShadowRoot:this.ownerDocument.defaultView).getSelection()}),t.extendProperty("getSelectionRange",function(t){return t=t||this.getOwnerSelection(),t.createRange?t.createRange():t.anchorNode?t.getRangeAt(0):null}),t.extendProperty("setSelectionRangePos",function(t){var e=this.getOwnerSelection();switch(this.nodeName){case"INPUT":case"TEXTAREA":t="Array"==t.getInstanceType()?t:[this.selectionStart,this.selectionEnd],e.rangeCount>0&&e.removeAllRanges(),this.setSelectionRange(t[0],t[1]);break;case"HTMLAREA":var i,n,o,s=this.ownerDocument;void 0===t&&(t=this.getSelectionRange(e)),"Range"==t.getInstanceType()?(e.removeAllRanges(),e.addRange(t)):e&&(o=0,n=(!1)(i=function(t,r){var a,h,l,c,u,d;for(u=r.childNodes,d=[],l=0,c=u.length;l<c&&(a=u[l],!n);l++)if(3===a.nodeType){if(o+a.length>=t){n=!0,h=s.createRange(),h.setStart(a,t-o),e.removeAllRanges(),e.addRange(h);break}d.push(o+=a.length)}else d.push(i(t,a));return d})(t,this))}}),t.extendProperty("getSelectionRangeInsert",function(t){var e=this.getOwnerSelection(),i=this.getSelectionRange(e);if(null==i)return null;if(void 0==t)return i;i.collapse(!1);var n=i.createContextualFragment(t),o=n.lastChild;return i.insertNode(n),o&&(i.setEndAfter(o),i.setStartAfter(o)),this.setSelectionRangePos(i),i}),t.extendProperty("getSelectionRangePosition",function(t){switch(this.nodeName){case"INPUT":case"TEXTAREA":var e,i,n,o,s,r;return void 0===t&&(t=this.selectionStart),t==this.preSelectionPos?this.preSelectionRect:(n=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},r=this.value.slice(0,t),i=this.value.slice(t),o="<span style='position: relative; display: inline;'>"+n(r)+"</span>",o+="<span id='mirror' style='position: relative; display: inline;'>|</span>",o+="<span style='position: relative; display: inline;'>"+n(i)+"</span>",s=new a(this),e=s.create(o).rect("#mirror"),e.left-=this.scrollLeft,e.top-=this.scrollTop,this.preSelectionPos=t,this.preSelectionRect=e,e);case"HTMLAREA":var h,l;return l=this.getSelectionRangeOffset(),h=this.offset(),l.left-=h.left,l.top-=h.top,l}}),t.extendProperty("getSelectionRangeOffset",function(t){switch(this.nodeName){case"INPUT":case"TEXTAREA":var e=this.offset(),i=this.getSelectionRangePosition(t);return e={left:e.left+i.left,top:e.top+i.top,height:i.height};case"HTMLAREA":var n,e,o,s,r=this.ownerDocument.defaultView,a=r.document,h=this.getOwnerSelection(),l=this.getSelectionRange(h);return l&&(l.collapse(!1),l.endOffset-1>0&&l.endContainer!==this&&(n=l.cloneRange(),n.setStart(l.endContainer,l.endOffset-1),n.setEnd(l.endContainer,l.endOffset),o=n.getBoundingClientRect(),e={height:o.height,left:o.left+o.width,top:o.top},n.detach()),e&&0!==(null!=e?e.height:void 0)||(n=l.cloneRange(),s=a.createTextNode("|"),n.insertNode(s),n.selectNode(s),o=n.getBoundingClientRect(),e={height:o.height,left:o.left,top:o.top},s.remove(),n.detach())),e.left+=top.scrollX,e.top+=top.scrollY,e}})}(s.prototype),function(t){t.extendProperty("set",function(t,e){void 0!==t&&void 0!==e&&(e="string"==typeof e?e.replace(u.UNIT.__unitRegExp__,function(t,e,i){return e*u.UNIT[i]+"px"}):e,this.setProperty(device.feat.prefixStyle(t,!0),e))}),t.extendProperty("remove",function(t){for(var e=[n.prefix+t,t],i=0,o=e.length;i<o;i++){var t=e[i];this.propertyIsEnumerable(t)&&this.removeProperty(t)}})}(c.prototype),function(t){t.extendProperty("setCookie",function(t,e,i,n){var o=new Date;o.setTime(o.getTime()+2592e6),d.cookie=t+"="+escape(e)+";expires="+o.toGMTString()+(i?";path="+(n||"/")+";domain="+i:"")}),t.extendProperty("getCookie",function(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=d.cookie.match(i))?unescape(e[2]):null}),t.extendProperty("delCookie",function(t){var e=new Date;e.setTime(e.getTime()-1);var i=getCookie(t);null!=i&&(d.cookie=t+"="+i+";expires="+e.toGMTString())})}(d),function(e){e.bind||(e.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var i=t.prototype.slice.call(arguments,1),n=this,o=function(){},s=function(){return n.apply(this instanceof o?this:e||this,i.concat(t.prototype.slice.call(arguments)))};return o.prototype=this.prototype,s.prototype=new o,s})}(l.prototype),function(t){t.extendProperty("parseFromStringToNode",function(){var e=t,i=e.parseFromString;try{if((new h).parseFromString("","text/html"))var n=!0}catch(t){}return function(t,e){switch(e){case"text/html":var o,s;if(n){o=i.apply(this,arguments);try{s=o.body}catch(t){}}if(!s)if(o=d.implementation.createHTMLDocument(""),t.toLowerCase().indexOf("<!doctype")>-1)o.documentElement.innerHTML=t;else{try{s=o.body}catch(t){}if(s)o.body.innerHTML=t;else{o.documentElement.innerHTML=t;for(var r,a=d.createNodeIterator(o.documentElement,NodeFilter.SHOW_ALL,null,!1);(r=a.nextNode())&&"BODY"!==r.nodeName;);a.body=r,o=a}}return o;default:return i.apply(this,arguments)}}}())}(h.prototype)}()}}(),__defineUnify__(window)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();define("~/application",["~/proto","~/fetch","~/transform","~/template"],function(t,e,i){var n=t("~/fetch"),o=t("~/template"),s=t("~/transform"),r=[],a=function(t,e){if(e){var i=r.indexOf(t);i>=0&&r.splice(i,1)}else r.push(t)},h=function(){function t(e){_classCallCheck(this,t),this.id=e,this.param={},this.status={},this.helper={},this.elements={},this.prefetch={},this.dimension=null,this.controller={},this.updatetime={},this.remoteframe=!1,this.storagemaps=[],this.initialparam={},this.initialconfig={},this.events={},this._events={}}return _createClass(t,[{key:"init",value:function(){return this.update=!0,this._events={},this.rsetParam(),this}},{key:"on",value:function(t,e){var i=this;return t.split(" ").each(function(t,n){i._events.initial(n,[]).push(e)}),this}},{key:"one",value:function(t,e){var i=this,n=arguments,o=function o(){e.apply(i,n),i.off(t,o)};return t.split(" ").each(function(t,e){i._events.initial(e,[]).push(o)}),this}},{key:"off",value:function(t,e){var i=this;t.split(" ").each(function(t,n){if(i._events[n]){var o=i._events[n].indexOf(e);o>-1&&i._events[n].splice(o,1)}})}},{key:"origin",value:function(t,e){var i=new promise.Promise
;App.async.async(this.id,this.param,t,"data",i),promise.join([i]).then(function(t){e(t[0][3],t)})}},{key:"turnover",value:function(t,e){var i=(t.id,t.data),n=t.start,o=t.limit,s=t.linker,r=t.origins,a=t.endflag,h=t.turnover,l=function(t){var i=[],n=!0;if(!(i=s?t.getValueByRoute(s):t)||!i[0])return e(null,n);n=a?!!t.getValueByRoute(a):i.length<Number(o),i.map(function(e,i){return e.__proto__=t}),e(i,n)};this.setParam(function(t){return t.page=t._page=t.$page=Math.ceil(n/o),t.start=t._start=t.$start=n,t.limit=t._limit=t.$limit=o,t.turnover=t._turnover=t.$turnover=h,t}({})),i?l(i):this.origin(r,l)}},{key:"trigger",value:function(t){var e=this,i=arguments,n=this._events[t];if(n)for(var o=n.length-1;o>=0;o--)n[o].apply(e,[].slice.call(i,1))}},{key:"setParam",value:function(t,e){return App.setParam(this.id,t,e),this}},{key:"rsetParam",value:function(){return this.param=this.initialparam.clone(),this}},{key:"clearCache",value:function(t,e){return App.clearCache(this.id,t,e),this}},{key:"cloneAsNew",value:function(e){return{}.extend(this,new t(this.id),{id:e,config:{}.extend(this.config),param:{}.extend(this.initialparam),elements:{},initialparam:this.initialparam})}},{key:"clipView",value:function(t){var e=this.elements.mask,i=this.elements.view;t&&e&&i&&(1===t.length?t[1]=t[2]=t[3]=t[0]:2===t.length?(t[2]=t[0],t[3]=t[1]):3===t.length&&(t[3]=t[1]),e.css({display:"block",position:"absolute",top:t[0]+"dp",right:t[1]+"dp",bottom:t[2]+"dp",left:t[3]+"dp",overflow:"hidden"}),i.css({display:"block",position:"absolute",top:"-"+t[0]+"dp",right:"-"+t[1]+"dp",bottom:"-"+t[2]+"dp",left:"-"+t[3]+"dp"}))}},{key:"addElement",value:function(t,e){this.refreshing&&this.elements[t]instanceof Element&&this.refreshing.push(this.elements[t]),"sandbox"===t&&(this.sandbox=e),this.elements[t]=e}},{key:"loading",value:function(t){App.transform.loading(this.id,t)}},{key:"refresh",value:function(t,e,i){var n=this;return this.trigger("refresh"),App.trigger("refreshstart",this.id),t=t||this.dimension,this.clearCache(!0,!0),this.setParam(t,!0),this.refreshing=[],App.transform.update(this.id,t,function(t){e?e(t):t()},function(t){n.refreshing&&(n.refreshing.each(function(t,e){"iframe"===e.localName&&(e.src="about:blank"),e.remove()}),n.refreshing=null),i?i(t):t(),App.trigger("refreshend",n.id)}),this}},{key:"destroy",value:function(t){var e=this.elements.sandbox;if(e){var i=e.window;e.iframe.src="about:blank",i.location.reload(),i.document.write(""),i.close();for(var n in i)try{delete i[n]}catch(t){}e.iframe.remove(),delete this.elements.sandbox}switch(this.Template=null,this.loaded=null,delete this.Template,t){case 1:this.elements.container.innerHTML=null;break;case-1:this.elements.container.remove(),delete App.modules[this.id]}return this}}]),t}(),l=function(){function e(){if(_classCallCheck(this,e),!(this instanceof e))return new e;this.init()}return _createClass(e,[{key:"init",value:function(){var t=this;this._error={},this._events={},this._prefetchs={},this._callbacks={},this.async=new n,this.sandbox=new Sandbox(!0,!0).extend(),this.transform=new s,this._EXISTS=!1,this.modules={},this.config={},this.setting(App.config),this.console={echo:function(t,e,i,n){console[t]("%c "+(e[0]?e[0]+" ":"")+"%c "+(i[0]?i[0]+" ":"")+"%c "+(n[0]?n[0]+" ":""),"color: #ffffff; background:"+e[1],"color: #ffffff; background:"+i[1],"color: #ffffff; background:"+(n[0]?n[1]:i[1]))},log:function(e,i,n){t.console.echo("log",[i,"#999"],[e,"#333"],[n,"#666"])},info:function(e,i,n){t.console.echo("info",[i,"#0cf"],[e,"#06c"],[n,"#0c0"])},warn:function(e,i,n){t.console.echo("warn",[i,"#f60"],[e,"#f30"],[n,"#f90"])},error:function(e,i,n){t.console.echo("warn",[i,"#f06"],[e,"#903"],[n,"#993"])},dir:function(t){console.dir.apply(console,t)}},this.name=App.name||"top",this.version="3.0.1",this.console.log(this.version,"Version","ioing.com"),window.addEventListener("touchstart",function(t){App.preventDefaultException(t,{tagName:/^(INPUT|TEXTAREA|HTMLAREA|BUTTON|SELECT)$/})||t.preventDefault()},!1),window.addEventListener("touchmove",preventDefaultEvent,!1)}},{key:"setting",value:function(t){this.config.extend(t)}},{key:"check",value:function(){var t=function(){return applicationCache.status==applicationCache.UPDATEREADY},e=function(){try{applicationCache.swapCache(),App.trigger("cachechange")}catch(t){}};t()?e():applicationCache.addEventListener("updateready",function(i){t()?e():App.trigger("cachenochange")},!1)}},{key:"on",value:function(t,e){var i=this;return t.split(" ").each(function(t,n){i._events.initial(n,[]).push(e)}),this}},{key:"one",value:function(t,e){var i=this,n=arguments,o=function o(){e.apply(i,n),i.off(t,o)};return t.split(" ").each(function(t,e){i._events.initial(e,[]).push(o)}),this}},{key:"off",value:function(t,e){var i=this;t.split(" ").each(function(t,n){if(i._events[n]){var o=i._events[n].indexOf(e);o>-1&&i._events[n].splice(o,1)}})}},{key:"trigger",value:function(t){var e=this,i=arguments;this._events[t]&&this._events[t].each(function(n,o){try{o.apply(e,[].slice.call(i,1))}catch(i){e.off(t,o),e.console.warn("event:"+t,"Expire","be off")}})}},{key:"to",value:function(){return App.transform.to.apply(App.transform,arguments)}},{key:"get",value:function(e,i,n){var o=this;if(e){if(this._error[e])return n&&n();if("frameworks"!==e&&void 0===this.modules.frameworks)return this.get("frameworks",function(){App.get(e,i,n)});var s=this.modules;if(e=decodeURIComponent(e).split("^")[0],i=i||noop,"object"===_typeof(s[e]))return i.apply([s[e]]),s[e];this._callbacks.initial(e,[]).push(i),this.fetch(e,function(i){void 0===s[e]&&(s[e]=new h(e).extend(t(i)),o.filter(e),s[e].initialparam={}.extend(s[e].param),s[e].initialconfig={}.extend(s[e].config),o._callbacks[e].each(function(t,i){i.apply(o,[s[e]])}),delete o._callbacks[e])},function(){o._error[e]=!0,n&&n()})}}},{key:"origin",value:function(t){var e=null!==t.match(/^\w+\:/),i=e?t.split("/").shift():null;return t=e?t:t.split("^")[0],{root:i||this.config.root+"modules",path:e?t:this.config.root+"modules/"+t}}},{key:"realpath",value:function(t,e,i,n){if(i=i.replace(/\"|\'/g,""),!(i=i.trim()))return"";if(null===i.match(/^\w+\:/)&&0!==i.indexOf("//")){if(1==n)return this.config.root+i;var o=this.origin(t),s=o.root,r=o.path,a=n||(e?s+"/"+e:r);i=0===i.indexOf("/")?s+i:0===i.indexOf("./")?a+i.substr(1):0===i.indexOf("~/")?a+i.substr(1):0===i.indexOf("~~/")?r+i.substr(2):a+"/"+i}return i}},{key:"template",value:function(t){return new o(t,a)}},{key:"fetch",value:function(e,i,n){var o="",s=this.frameworks,r=s?s.config:{},a=r.origins;e&&(null===e.match(/^\w+\:/)?o=this.realpath(e,e,"config"):a?a.each(function(t,i){0==e.indexOf(i)&&(o=e+"/config")}):o=e+"/config",o&&t([o],function(){i&&i(o)},function(){n&&n()}))}},{key:"prefetch",value:function(t,e,i){var n=this;if(t){var o=this.modules,s=this._prefetchs;if(t=t.split("^")[0],i=i||noop,e=e||null,s.initial(t,[]).push(e),void 0===o[t]||void 0===s[t])return this.get(t,function(){n.prefetch(t,e)});s[t].each(function(e,s){if(!o[t].remoteframe&&(o[t].startLoadTime=Date.now(),s=n.getParam(s),void 0===o[t].prefetch[s])){if(o[t].prefetch[s]=!1,!0===o[t].config.update||0===o[t].config.cache)return n.console.warn("Modules["+t+"]","Prefetch","config[update == true or cache == 0] cannot prefetch");App.async.prefetch(t,o[t].config,{}.extend(o[t].initialparam,n.filterParam(s)[0]),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];o[t].endLoadTime=Date.now(),App.console.info("Module ["+t+"]","Prefetch",o[t].endLoadTime-o[t].startLoadTime+"ms"),o[t].prefetch[s]=n,o[t].updatetime[s]=Date.now(),setTimeout(function(){o[t]&&(o[t].prefetch[s]=null,o[t].updatetime[s]=null,delete o[t].prefetch[s],delete o[t].updatetime[s])},1e3*o[t].config.cache),i()},function(e){delete o[t].prefetch[s],App.console.error("Module ["+t+"]","Prefetch","failed")})}}),delete s[t]}}},{key:"refresh",value:function(){var t=this;this.clearSessionStorage(),this.modules.each(function(e,i){"frameworks"!==e&&(i.elements&&i.elements.container.remove(),delete t.modules[e])})}},{key:"clearSessionStorage",value:function(t){try{if(t)("string"==typeof t?[t]:t).each(function(t,e){sessionStorage.removeItem(e)});else for(var e=sessionStorage.length;e>=0;e--)sessionStorage.removeItem(sessionStorage.key(e))}catch(t){}}},{key:"clearLocalStorage",value:function(t){try{if(t)("string"==typeof t?[t]:t).each(function(t,e){localStorage.removeItem(e)});else for(var e=localStorage.length;e>=0;e--)localStorage.removeItem(localStorage.key(e))}catch(t){}}},{key:"checkLocalStorage",value:function(t){try{var e=localStorage.getItem("EXPIRES");e?Date.now()-e>t&&(this.clearLocalStorage(),e=!0):localStorage.setItem("EXPIRES",Date.now()),this.expires=e}catch(t){}}},{key:"clearCache",value:function(t,e,i){var n=this.modules[t];n&&(e=1==e?n.dimension:e,e?delete n.prefetch[e]:n.prefetch={},n.init(),i&&(this.clearLocalStorage(n.storagemaps),this.clearSessionStorage(n.storagemaps)),delete n.dimension)}},{key:"getParam",value:function(t){return t?this.route("/"+t).param:null}},{key:"setParam",value:function(t,e,i){var n=this.modules[t],o=this.filterParam(e);"string"!=typeof e&&null!==e||(n.update=!this.equalsParam(n.dimension,e),n.dimension=e),i&&n.update?(n.init(),n.param.extend(n.initialparam,o[0]),n.config.extend(n.initialconfig,o[1])):n.param.extend(o[0])}},{key:"filterParam",value:function(t){var e={},i=("string"==typeof t?t.paramsToObject():t)||{};return i.each(function(t,n){0===t.indexOf("^")&&(delete i[t],t=t.substr(1),-1!==["level","cache","timeout"].indexOf(t)&&(e[t]=Number(n)))}),[i,e]}},{key:"equalsParam",value:function(t,e){return t="string"==typeof t?t.paramsToObject():t,e="string"==typeof e?e.paramsToObject():e,Object.equals(t,e)}},{key:"exists",value:function(t){try{if(!t)return parseInt(sessionStorage.getItem("EXISTS"))===history.length;sessionStorage.setItem("EXISTS",history.length)}catch(t){return this.console.warn("storage","Warn","error"),!1}}},{key:"defend",value:function(t,e){e&&(t.innerHTML=null),t.observer({childList:!0},function(t){t.each(function(t,e){e.addedNodes.each(function(t,e){-1==r.indexOf(e)&&"SCRIPT"!==e.nodeName&&e.remove()})})})}},{key:"route",value:function(t){var e=void 0,i=void 0;return t||(0==this.config.hash&&this.config.root?(t=location.href.indexOf(this.config.root),t.length<=16&&(t+=this.config.root.length,t=location.href.substr(t))):t=location.hash.substr(1)),e=/(^\!(.*?)(?=\!\/)\!\/)/.exec(t),e=!!e&&e[2],t=e?t.slice(e.length):t,t=t.split(/\/|\$|\?|\&|\,|\=|\:/),e=e||t[0],i=t.slice(1).join("/"),{id:e?decodeURIComponent(e):null,param:i?decodeURIComponent(i):null}}},{key:"preventDefaultException",value:function(t,e){var i=t.target,n=t.path?t.path[0]:null;if(n&&!(n instanceof Node))return!0;i=i||{},n=n||{};for(var o in e){var s=e[o];if(s.test(i[o])||s.test(n[o]))return!0}return!1}},{key:"filter",value:function(t){var e=this.modules[t],i=e.config;["frameworks","system"].consistOf(t)&&(i.sandbox=!1,i.destroy=!1,"system"==t&&(i.shadowbox=!0)),isNaN(i.level)&&(i.level=0),"string"==typeof i.source&&(e.remoteframe=!0,i.source=this.realpath(null,null,i.source,!0)),0==device.feat.shadowRoot&&(i.shadowbox=!1),device.feat.isBadTransition||device.feat.prefixStyle("filter")||(i.mirroring=!1),i.mirroring&&i.mirroring.filter&&0===i.mirroring.filter.indexOf("blur(")&&device.feat.prefixStyle("backdrop-filte")&&(i.mirroring=!1),i.cache=void 0==i.cache?600:i.cache,i.cache&&i.update&&this.console.warn("cache and update cannot coexist","Config error","The cache should be 0"),!1!==i.absolute&&(i.absolute=!0),void 0==i.script&&(i.script=[]),void 0==i.style&&(i.style=[]),void 0==i.source&&(i.source=[]),"function"==typeof this.modules.frameworks.filter&&this.modules.frameworks.filter(t,i)}}]),e}();window.__defineProto__=t("~/proto"),window.__defineProto__(window),window.App=window.application=new l,window.trigger("applicationready"),window.trigger("startup"),window.trigger("launch"),document.ready(function(){var t=App.route(),e=t.id,i=t.param,n=App.exists();App.fetch(e),App.get("frameworks",function(t){this.frameworks=t;var o=t.config,s=o.index,r=o.system;e=e||s,this.checkLocalStorage(1e3*(o.expires||604800)),o.defend&&this.defend(document.body,!0),this.transform.init(a),this.transform.setup({singleflow:o.singleflow,singlelocking:o.singlelocking,nofindpage:o.nofind,currpage:e,homepage:s,limit:Math.max(o.limit||50,10),exists:n}),this.to("frameworks",i,-1).then(function(){window.trigger("frameworksready"),App.check(),e?App.to(e,i,o.singleflow?1:0).then(function(){App._EXISTS=!0,window.trigger("frameworksload"),App.modules[s]||setTimeout(function(){App.prefetch(s)},2e3)}):(App._EXISTS=!0,window.trigger("frameworksload")),r&&App.get("system",function(t){this.transform.container("system"),t.Template=App.template("system").prefetch(function(t,e){e()}).then(function(t,e){e(),App.trigger("systemload",{module:t})}).get(function(t){App.trigger("systemloadall",{module:t})}).error(function(t){App.trigger("systemloaderror",{module:t})})})})},function(){App.console.error("Module[frameworks]","Fatal error","is necessary")}),window.onerror=function(){return App.console.error(arguments[1]||"(anonymous function)","Error",arguments[2]+":"+arguments[3]),App.trigger("unknownerror",arguments),!1}})}),define("~/proto",["~/query","~/sandbox","~/move","~/promise","~/scroll","~/touch","~/loader"],function(t,e,i){e.exports=function(){return function(e){Object.defineProperty(e,"$$",{configurable:!0,writable:!0}),e.$$=e.query=t("~/query")(e),e.extendProperty("sandbox",t("~/sandbox")),e.extendProperty("Sandbox",e.sandbox.sandbox),e.extendProperty("sandboxWindow",e.sandbox.sandboxWindow),e.extendProperty("SandboxFunction",e.sandbox.SandboxFunction),e.extendProperty("shadowRootWindow",e.sandbox.shadowRootWindow),e.extendProperty("ShadowRootFunction",e.sandbox.ShadowRootFunction),e.extendProperty("seval",function(t,i){return new(i?e.ShadowRootFunction:e.SandboxFunction)(" try { return "+t+" } catch (e) {}")()}),e.extendProperty("openWorker",function(t){return new e.Worker(e.URL.createObjectURL(new Blob(["string"==typeof t?t:t.toString()])))}),Object.defineProperty(e,"move",{configurable:!0,writable:!0}),e.Move=t("~/move"),Object.defineProperty(e,"Promise",{configurable:!0,writable:!0}),e.io=e.promise=t("~/promise"),Object.defineProperty(e,"Scroll",{configurable:!0,writable:!0}),e.Scroll=t("~/scroll")(e,e.document,e.Math),Object.defineProperty(e,"Touch",{configurable:!0,writable:!0}),e.Touch=t("~/touch")(e,e.document,void 0),Object.defineProperty(e,"Loader",{configurable:!0,writable:!0}),e.Loader=t("~/loader"),function(){!function(t){var i=e.Node.prototype,n=["constructor","proxy","map","each","find","html","text","css","computedStyle","empty","hide","show","toggle","val","attr","removeAttr","prop","removeProp","remove","addClass","removeClass","toggleClass","replaceClass","hasClass","append","appendTo","prependTo","prepend","before","after","get","position","offsetParent","offset","height","width","parent","parents","childrens","siblings","closest","filter","not","data","end","clone","size","serialize","eq","index","is","bind","unbind","one","delegate","undelegate","on","off","trigger","click","keydown","keyup","keypress","submit","load","resize","change","select","error"],o=["trigger","bind","unbind","on","one","off","load"],s=["trigger","bind","unbind","on","one","off","ready"],r=function(e){return function(e){return function(){var i=t(this);return i.native=!0,i[e].apply(i,arguments)}}(e)};n.each(function(t,e){try{i[e]=r(e)}catch(t){}});for(var a in o){var h=o[a];e[h]=r(h)}for(var a in s){var h=s[a];e.document[h]=r(h)}}(e.$$)}(),function(){var t=0;e.top.addEventListener("scroll",function(){var i={x:top.scrollX,y:top.scrollY};0==t&&(e.onscrollstart&&e.onscrollstart(i),e.trigger("scrollstart",i)),clearTimeout(t),t=setTimeout(function(){t=0,e.onscrollend&&e.onscrollend(i),e.trigger("scrollend",i)},400),e!==top&&(e.onscrollend&&e.onscroll(i),e.trigger("scroll"))},!1)}()}}()});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/transform",[],function(t,e,i){function n(){if(!(this instanceof n))return new n}var o=window.requestAnimationFrame;n.prototype={init:function(t){var e=this;this.DNA=t,this.LIMIT=[],this.queue=[],this.singleflowtimes=0,window.on("hashchange popstate",function(t){App.id&&!App.equalsParam(e.prehistory,window.location.hash)&&(e.prehistory=window.location.hash,e.back(),setTimeout(function(){e.prehistory=null},0))});var i=document.createElement("relative-windows");i.id="relative-viewport",i.style.position="absolute",i.style.zIndex=1,i.style.width=i.style.height="100%",i.style.overflow="hidden",t(i),App.relativeViewport=i;var n=document.createElement("absolute-windows");n.id="absolute-viewport",n.style.position="absolute",n.style.zIndex=1e4,n.style.width=n.style.height="100%",n.style.overflow="hidden",t(n),App.absoluteViewport=n;var o=document.createElement("fixed-windows");o.id="fixed-viewport",o.style.position="fixed",o.style.zIndex=999999,o.style.width="100%",n.style.height="0",o.style.overflow="visible",t(o),App.fixedViewport=o,document.body.appendChild(App.relativeViewport),document.body.appendChild(App.absoluteViewport),document.body.appendChild(App.fixedViewport)},setup:function(t){this.options=t;var e=t.currpage,i=t.homepage||"frameworks",n=t.exists,o=t.singleflow,s=t.singlelocking;o&&(n||e===i||this.hash(i,null,0),null!=s&&i&&this.hash(i,null,1))},back:function(){var t=App.route(),e=t.id||this.options.homepage||"frameworks",i=t.param,n=App.modules[e];if(1==this.options.singlelocking&&("frameworks"===this.id||0===this.module.config.level))return this.singleflowtimes++,this.hash(this.id,this.param,1),void App.trigger("exit",{singleflow:this.singleflowtimes});if(this.singleflowtimes=0,this.id!==e||!App.equalsParam(this.param,i)){if(this.options.singleflow&&n&&0!==n.config.level&&n.config.level>=this.module.config.level)return window.history.back();this.to(e,i,-1),App.trigger("back",{id:e,module:n})}},hash:function(t,e,i){switch(t=t||this.id,i=void 0===i||i,t=this.reid(t),e=e?e.replace(/\s/g,""):"",i){case 0:window.history.replaceState({id:t},null,"#"+t+"/"+e);break;case 1:window.history.pushState({id:t},null,"#"+t+"/"+e);break;default:window.location.hash=t+"/"+e}App.exists(!0)},status:function(t,e,i){t=t||this.id,e=e.objectToParams(),i?this.hash(t,e):window.history.replaceState({},null,"#"+this.reid(t)+"/"+(e?e.replace(/\s/g,""):"")),this.module.setParam(e)},reid:function(t){return/\//.test(t)&&0!==t.indexOf("[")?"!"+t+"!":t},get:function(t,e,i,n,o,s){var r=this,a=r.options.nofindpage||"404";return this.loading(e,1),App.get(t,function(s){App.modules[t]||t===s.id||(App.modules[t]=s.cloneAsNew(t)),r.loading(e,0),r.to.apply(r,[t,i,n,o,r.callback])},function(){t!==a&&(r.loading(e,0),r.to(a))}),this},to:function(t,e,i,n,o){var s=this;if(0===this.inProcess)return-1===i&&this.queue.push(arguments),this;if(this.inProcess=0,this.singleflowtimes=0,!isNaN(t))switch(s.inProcess=-1,Number(t)){case-1:return window.history.back(),this;case 0:return this}if(void 0===App.modules[t])return this.inProcess=-1,this.get(t,r,e,i,n);e=App.getParam(e),this.id=t,this.param=e,this.events=n,this.callback=o||noop;var r=this.od||(App._EXISTS?"frameworks":null),a=r?[t,r]:[t],h=App.modules[t],l=App.modules[r],c=r?[h,l]:[h];return n&&(h.events=n),"frameworks"===t&&(i=-1),this.self=t==r,this.loading(r,0),this.fetch(h,e),r&&this.self&&h.dimension===e&&h.loaded&&!h.update?(s.inProcess=-1,this):(this.ids=a,this.module=h,this.modulu=l,this.moduli=c,h.rsetParam().setParam(e,!0),this.animation=!(this.self||!r)&&(-1==i?l:h).config.animation,1!=this.animation&&"inherit"!=this.animation||(this.animation=App.frameworks.config.animation),"string"==typeof this.animation&&(this.animation=this.animations(this.animation)),this.cutting=!(!r||h.config.absolute==l.config.absolute),h.elements.container||this.container(t),this.start(function(){s.module===h&&(r||(s.cut(),s.end()),-1!==i&&s.hash(t,e,i),App.id=s.od=App._EXISTS||"frameworks"!==t?t:null,App.module=h,s.build(t,function(t,e){e=e||noop,r?s.transform(function(){e(),s.inProcess=18}):(e(),s.inProcess=1)}))}),this)},fetch:function(t,e){Date.now()-t.updatetime[e]>1e3*t.config.cache&&(delete t.prefetch[e],t.dimension=!1),this.prefetched=!!t.prefetch[e]},build:function(t,e){var i=this,n=this.module;!0!==n.loaded||!0===n.update||!0===n.config.update?(n.destroy(1),!0===navigator.onLine&&(this.prefetched||n.config.preview)?this.include(t,null,e):e(n,function(){i.include(t,null,function(t,e){e()})})):e(n,function(){n.remoteframe&&n.refresh()})},limit:function(t,e){var i=this.LIMIT.indexOf(t);!1!==e.config.destroy&&(-1!==i&&this.LIMIT.splice(i,1),this.LIMIT.push(t),this.LIMIT.length>this.options.limit&&App.modules[this.LIMIT.splice(0,1)].clearCache(!0,!0).destroy(-1))},reset:function(t,e){var i=App.modules[t],n=i.config,o=i.elements.container,s=["frameworks","system"].consistOf(t);o.style.cssText="",s||o.css({position:"absolute","z-index":(Number(i.config.level)||0)+1,background:n.background||"",transform:e?"translate(0, 0)":"translate(200%, 200%)"})},update:function(t,e,i,n){this.include(t,function(t,e){i?i(e):e()},function(t,e){n?n(e):e()})},include:function(t,e,i){var n=this,o=this.module,s=o.dimension;!0!==o.inupdate&&0===o.status[s]||(o.status[s]=0,o.timeout=!1,this.limit(t,o),o.loading(1),this.loadingTimeId=setTimeout(function(){n.modulu&&n.modulu.loading(1)},1e3),"function"==typeof o.events.preload&&o.events.preload(),o.Template=App.template(t).prefetch(function(t,i){t.trigger("fetch"),e?e(t,i):i()}).then(function(t,e){t.status[s]="loaded",t.loaded=!0,t.trigger("load"),i?i(t,e):e(),n.callback(t),"function"==typeof t.events.load&&t.events.load(),App.trigger("moduleload",{module:t})}).get(function(e){if(e.loading(0),clearTimeout(n.loadingTimeId),n.modulu&&n.modulu.loading(0),e.timeout){if("frameworks"==t)return;setTimeout(function(){e.refresh()},100)}}).error(function(t){t.trigger("error"),t.status[s]="error",i&&i(t),"function"==typeof t.onerror&&t.onerror()}))},loading:function(t,e){var i,n=App.modules,o=n[t];if(o&&!o.refreshing){if(i=o.events.loading,"function"==typeof(i="function"==typeof i?i:!1!==i?App.modules.frameworks.events:null))return i.apply(this,arguments);switch(i=o.elements.loader,e){case 0:if(!i)return;i.hide(),o.elements.loader.hidden=!0,o.elements.loader.cont.remove(),delete o.elements.loader;break;case 1:if(i&&!1===i.hidden)return;var s=38*device.ui.scale,r={shape:"roundRect",diameter:s*devicePixelRatio,density:12,speed:1,FPS:12,range:.95,color:"#999999"},a=o.config.loader||n.frameworks.config.loader;a&&r.extend(a),i=new Loader(o.elements.container,{safeVML:!0}),i.setShape(r.shape),i.setDiameter(r.diameter),i.setDensity(r.density),i.setSpeed(r.speed),i.setFPS(r.FPS),i.setRange(r.range),i.setColor(r.color),i.cont.style.position="absolute",i.cont.style.zIndex=999,i.cont.style.top=i.cont.style.left="50%",i.cont.style.marginTop=i.cont.style.marginLeft=-.5*s+"px",i.cont.style.width=i.cont.style.height=s+"px",i.cont.children.each(function(t,e){e.style.width=e.style.height=s+"px"}),i.show(),o.elements.loader=i,o.elements.loader.hidden=!1}}},container:function(t){var e=App.modules[t],i=e.config,n="system"==t?App.fixedViewport:!1===i.absolute?App.relativeViewport:App.absoluteViewport,o=document.createElement("module-container");o.setAttribute("name",t),o.setAttribute("type",["frameworks","system"].consistOf(t)?t:"module"),this.DNA(o),e.addElement("container",o),this.reset(t,this.cutting||!this.animation),n.appendChild(o)},animations:function(t){var e=this.Animations;switch(t){case"flip":return[e.flip,e.flip];case"fade":return[e.fade(1),e.fade(0)];case"zoom":return[e.zoom(1),e.zoom(0)];case"slide":case"slideLeft":case"slideleft":case"slide-left":return[e.slide(1),e.slide(3)];case"slideRight":case"slideright":case"slide-right":return[e.slide(3),e.slide(1)];case"slideUp":case"slideup":case"slide-up":return[e.slide(0),e.slide(2)];case"slideDown":case"slidedown":case"slide-down":return[e.slide(2),e.slide(0)];default:return!1}},transform:function(t){function e(e){h&&i.cut(e),i.end(e),i.dispatch(),t()}var i=this,n=this.events,s=this.module,r=this.modulu,a=this.moduli,h=this.cutting,l=1!==a.length&&s.config.level!==r.config.level&&(s.config.level>r.config.level?0:1),c=0!==l,u=function(t){t.callback()},d=h?[!1===s.config.absolute?App.relativeViewport:App.absoluteViewport,!1===r.config.absolute?App.relativeViewport:App.absoluteViewport]:[s.elements.container,r.elements.container],p=0,f=0,m="center",g="center",v=device.ui.width,y=device.ui.height,b=n?n.touches:null;b=b?b.srcEvent:null,b||(b=r.events.touches,b=b?b.srcEvent:{}),b.changedTouches?(p=b.changedTouches[0].pageX,f=b.changedTouches[0].pageY):(p=b.x,f=b.y),p&&f&&(g=[p,f],p<v/4?p=0:p>3*v/4&&(p=v),f<y/4?f=0:f>3*y/4&&(f=y),m=[p,f]),!1!==l&&("function"==typeof this.animation?u=this.animation:"object"===_typeof(this.animation)&&(u=this.animation[2===this.animation.length?l:0])),this.prefetched&&(t(),t=noop),o(function(){u({view:d,x:p,y:f,in:d[0].Animate(),out:d[1].Animate(),width:v,height:y,viewport:[App.relativeViewport,App.absoluteViewport],modules:a,reverse:c,direction:c?-1:1,backset:l,callback:e,origin:g,attach:m,touches:b})})},dispatch:function(){var t={ids:this.ids,modules:this.moduli};try{this.cutting&&App.frameworks.trigger(1==this.module.config.absolute?"hide":"show"),this.module.trigger("show",t),this.modulu.trigger("hide",t)}catch(t){}},start:function(t){if("function"==typeof this.module.events.transformstart&&!1===this.module.events.transformstart())return!1;this.animation&&!this.cutting||this.module.elements.container.css({transform:"translate(0, 0)"}),t(),App.trigger("transformstart",{ids:this.ids,modules:this.moduli})},end:function(t){this.modulu&&(this.animation&&t||(this.modulu.elements.container.css({transform:"translate(200%, 200%)"}),this.reset(this.id,!0),!this.self&&(this.modulu.config.update||this.modulu.config.cache<=0)&&this.modulu.destroy(1),this.modulu.remoteframe.App&&this.modulu.remoteframe.App.trigger("background")),this.modulu.elements.container.css({"transition-duration":"0ms"})),"function"==typeof this.module.events.transformend&&this.module.events.transformend(),App.trigger("transformend",{ids:this.ids,modules:this.moduli}),this.queue.length&&this.to.apply(this,this.queue.pop())},cut:function(t){this.animation&&t||(App.relativeViewport.style.cssText="",App.absoluteViewport.style.cssText="",!1===this.module.config.absolute?(App.absoluteViewport.css({transform:"translate(200%, 200%)"}),App.relativeViewport.css({transform:"translate(0, 0)"})):(App.relativeViewport.css({transform:"translate(200%, 200%)"}),App.absoluteViewport.css({transform:"translate(0, 0)"})))},then:function(t){this.callback=t||noop}},n.prototype.Animations={flip:function(t){t.in.duration(0).perspective(1e3).to(0,0,0).opacity(0).rotate3d(0,1,0,90*t.direction).end(function(){t.out.duration(300).perspective(1e3).rotate3d(0,1,0,-90*t.direction).end(function(){t.out.duration(0).opacity(0).end(),t.in.duration(0).opacity(1).end(function(){t.in.duration(300).rotate3d(0,1,0,0).end(function(){t.callback(!1)})})})})},fade:function(t){return function(e){var i,n,o,s;switch(t){case 0:i=1,n=0,o=e.in,s=e.out;break;case 1:i=0,n=1,o=s=e.in}o.duration(0).to(0,0,0).opacity(i).end(function(){s.duration(300).opacity(n).end(function(){e.callback(!1)})})}},slide:function(t){return function(e){var i,n,o,s;switch(t){case 0:s=e.height,o=-s,i=n=0;break;case 1:i=e.width,n=-i,o=s=0;break;case 2:o=e.height,s=-o,i=n=0;break;case 3:n=e.width,i=-n,o=s=0}e.reverse?e.in.duration(0).to(i,o,0).end(function(){e.in.duration(300).to(0,0,0).end(),e.out.duration(300).to(n,s,0).end(function(){e.callback(!1)})}):e.in.duration(0).to(i,o,0).end(function(){e.out.duration(300).to(n,s,0).end(),e.in.duration(300).to(0,0,0).end(function(){e.callback(!1)})})}},zoom:function(t){return function(e){switch(t){case 0:e.in.origin(e.attach).duration(0).to(0,0,0).scale(2.5).end(function(){e.out.origin(e.origin).duration(0).to(0,0,0).opacity(1).scale(1).end(function(){e.in.duration(300).scale(1).end(),e.out.duration(300).opacity(0).scale(0).end(function(){e.callback(!1)})})});break;case 1:e.in.origin(e.origin).duration(0).to(0,0,0).scale(0).end(function(){e.out.origin(e.attach).duration(0).to(0,0).scale(1).end(function(){e.in.to(0,0,0).duration(300).scale(1).end(function(){e.callback(!1)}),e.out.duration(300).scale(2.5).end()})})}}}},e.exports=n}),define("~/template",["~/css","~/dom"],function(t,e,i){function n(t){if(!(this instanceof n))return new n(t);t&&this.init(t)}var o=t("~/css"),s=t("~/dom");n.prototype={init:function(t){this.id=t,this.css=new o,this.dom=new s,this.module=App.modules[t],this.config=this.module.config,this.target=this.module.elements.container,this.module.one("failedtoload",function(t){this.errored(this.module),this.errored=noop}.bind(this))},render:function(t,e,i){var n=this;return t&&i&&(i[2]="function"==typeof e.onprefetch?e.onprefetch(i[2])||i[2]:i[2],this.fetched(e,function(){n.write(n.compile(t,i[0],i[1],i[2]))})),this},write:function(t){this.config.sandbox?this.sandbox(t[0],t[1]):this.embed(t[0],t[1])},compile:function(t,e,i,n){return this.module.scope=n.data={}.extend(App.modules.frameworks.scope||{},{module:this.module,config:this.config,params:this.module.param,device:device},n.data),this.css.init(t,this.module).setup({data:{module:this.module,config:this.config,params:this.module.param,scope:n.data,device:device,os:device.os,dpi:device.ui.dpi,feat:device.feat,prefix:device.feat.prefix},descendant:this.config.sandbox||this.config.shadowbox||["frameworks","system"].consistOf(t)?null:"module-container[name='"+t+"']"}),this.dom.init(this.module,App.sandbox,{}.extend(App.modules.frameworks.helper,this.module.helper),this.css).setup({suri:i,dids:e.data,sids:e.source,parallel:this.config.mirroring}),[this.css.render(this.config.style,e.style,n.style),this.dom.render(this.config.source[0],n.source,n.data)]},include:function(t){var e=this,i=this.module,n=this.config,o=i.dimension,s=i.prefetch[o];return i.remoteframe?this.frame(i):s?this.render(t,i,s):void App.async.fetch(t,n,i.param,function(){e.render(t,i,arguments),i.config.cache&&!i.config.update&&(i.prefetch[i.dimension]=arguments,i.updatetime[i.dimension]=Date.now())},function(){e.errored(i)})},scope:function(t,e,i){var n=this.id,o=this.dom,s=(this.config,this.module),r=t.window;t.document;r.module=this.module,r.App=r.application=App,r.validWindow=r,r.TOP=window,r.DOM=r.DOMS=o.DOM[0],r.DATA=r.SCOPE=r.scope=o.DATA,r.root=e,r.node=o.getElementById,s.addElement("sandbox",t),s.addElement("context",e),s.addElement("content",i),r.onerror=function(){App.trigger("error",{id:n,module:s})},t.window!==window&&(__defineUnify__(t.window),__defineProto__(t.window))},trick:function(t,e){if(t.window!==window){var i=this;t.window.validWindow=t.window.vwindow=window,t.window.validDocument=t.window.vdocument=window.document,t.window.document.extendProperty("getElementById",function(t){return i.dom.DOM[0][t]||e.find("#"+t)[0]||window.document.getElementById(t)}),t.window.document.extendProperty("getElementsByName",function(t){return e.find("*[name="+t+"]").toArray()||window.document.getElementsByName(t)}),t.window.document.extendProperty("getElementsByClassName",function(t){return e.find("."+t).toArray()||window.document.getElementsByClassName(t)}),t.window.document.extendProperty("getElementsByTagName",function(t){return e.find(t).toArray()||window.document.getElementsByTagName(t)}),t.window.document.extendProperty("getElementsByTagNameNS",function(t,e){return window.document.getElementsByTagNameNS(t,e)})}},wrap:function(t,e,i,n){var o=document.createElement("style");o.name=t,o.innerHTML=e;var s=document.createElement("module-context");return s.name=t,s.className="module-context","frameworks"!=t||0!=n||this.config.shadowbox?s.appendChild(o):document.head.appendChild(o),s.appendChild(i),s},
script:function(){var t=this.id,e=this.module,i=e.config,n="",o="";return i.script.each(function(i,s){n=e.resources.script[s],n?o+="<script src="+App.realpath(t,null,n)+"><\/script> \n":App.console.error('resources.script["'+s+'"]',"Config error","is not definde")}),o},style:function(t){return"<style>"+t+"</style>"},blakbox:function(t,e,i,n,o){var s=new Sandbox(!0,!0,!0),r=this.module,a=r.config;return s.iframe.attr({name:this.id,src:"about:blank",seamless:"seamless"}).css(n?{display:"none"}:{display:"block",position:"absolute","z-index":"0",width:"100%",height:"100%",border:"0"}),o?s.iframe.attr("sandbox","allow-same-origin"):"string"!=typeof a.sandbox||-1!==a.sandbox.indexOf("allow-same-origin")&&-1!==a.sandbox.indexOf("allow-scripts")||s.iframe.attr("sandbox",a.sandbox),t.appendChild(s.iframe),o?(s.init().open().write(e).close(),s):(s.init().extend(),s.open(),s.window.addEventListener("beforeunload",function(t){-1!==App._EXISTS&&(App._EXISTS=-1,setTimeout(function(){top.location.reload()},0))}),this.scope(s,n||s.document,n||s.iframe),s.write(e,i),s.close(),s.window.addEventListener("touchmove",preventDefaultEvent,!1),s)},mirroring:function(t,e){var i=this.config.mirroring;if(i){var n=this.module,o=this.blakbox(this.target,this.style(t),null,null,!0);o.iframe.css({"z-index":"-1",filter:i.filter||"none"}),o.document.body.appendChild(e),n.addElement("mirroring",o.iframe)}},container:function(){var t,e,i,n;return["frameworks","system"].consistOf(this.id)?t=this.target:(n=this.config.mirroring,i=!!n&&n.clip,e=document.createElement("mask"),t=document.createElement("view"),e.appendChild(t),this.target.appendChild(e),this.module.addElement("mask",e),this.module.addElement("view",t),this.module.clipView(i)),this.config.shadowbox&&t.createShadowRoot?t.createShadowRoot():t},frame:function(t){var e=this,i=document.createElement("iframe");i.src=t.config.source,i.setAttribute("app",!0),this.target.appendChild(i),t.remoteframe=i.contentWindow,t.addElement("context",i.contentWindow.document),t.addElement("content",i),this.fetched(t,noop),i.contentWindow.addEventListener("load",function(){this.App?(this.App.name=t.id,this.addEventListener(2===t.config.preview?"frameworksload":"frameworksready",function(){e.readied(t,noop),setTimeout(function(){e.loaded(t,noop)},0)},!1)):(e.readied(t,noop),setTimeout(function(){e.loaded(t,noop)},0))},!1),i.onerror=function(){e.errored(t)}},sandbox:function(t,e){var i=this,n=this.module,o=this.container(),s=this.blakbox(o,this.style(t),this.script());s.document.ready(function(){s.document.body.appendChild(e[0]),i.over(n,s.window,s.document.body),i.mirroring(t,e[1])})},embed:function(t,e){var i=this.id,n=this.module,o=(this.config,this.wrap(i,t,e[0],0)),s=this.container(),r=this.blakbox(s,null,this.script(),o);s.appendChild(o),this.trick(r,o),this.over(n,r.window,o),this.mirroring(t,e[1])},over:function(t,e,i){var n=this;this.readied(t,function(){n.dom.space(e,i).load(function(){n.loaded(t)}).end(0)})},prefetch:function(t){return this.fetched=t,this},then:function(t){return this.readied=t,this},get:function(t){return this.loaded=t,this.include(this.id),this},error:function(t){return this.errored=t,this}},e.exports=n});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/dom",[],function(t,e,i){function n(){if(!(this instanceof n))return new n}var o={key:/\.|\[/,token:/[^\w\_\$\.]/,string:/(['"])[^'"]*\1/,route:/(\[(.*?)(?=\])\])/g,origins:/\{\{([\s\S]*?)(?=\}\})\}\}|\{([\s\S]*?)(?=\})\}/g,imports:/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/gi},s=document,r=window.requestAnimationFrame;n.prototype={init:function(t,e,i,n){return this.DOM={0:{}},this.DOMS={},this.DOM2={},this.css=n,this.Quantum={},this.Function={},this.module=t,this.sandbox=e,this.helper.extend(i),this.i=0,this.o=0,this.entanglement={},this.components={waiting:0},this.mission={},this.renderCountTime=0,this},helper:{encode:function(t){return"string"==typeof t?encodeURIComponent(t):t},decode:function(t){return"string"==typeof t?decodeURIComponent(t):t},replace:function(t,e,i){return"string"==typeof t?t.replace(e,i):t}},creat:function(t,e,i){var n=i?this.i++:t.uuid;return i&&-1==t.quantum.indexOf(t.uuid)&&(this.Quantum[t.uuid]=[],t.quantum.each(function(e,i){i<t.uuid||t.quantum.splice(e,1)}),t.quantum.push(t.uuid)),this.creatFragment(n),e.uuid=t.uuid,e._target=n,this.mission[t.order]||(this.mission[t.order]={async:[],events:[],scripts:[],parallel:[],scroller:[],components:[],entanglement:[]}),n},state:function(t){return{id:t,uuid:0,order:0,target:0,quantum:[]}},save:function(t,e){this.DATA=e,this.SOURCE=t},setup:function(t){this.config=t},space:function(t,e){return t.trigger("moduleready"),t.EVALSCOPE={},this.window=t,this.container=e,e.trigger("ready"),this},uuid:function(t,e,i){return i=parseInt(i||(e.parentNode?e.parentNode.uuid:t.uuid)),i++,this.o++,i=i+"."+this.o,e&&!e.uuid&&e.extendProperty("uuid",i),i},quantum:function(t){return this.Quantum[t]||[]},get:function(t,e,i,n,o){return o=o||this.SOURCE[t],n=n||"",i=i||"",void 0!==o?(o=this.parser(i+o+n),e?void e.call(this,o):o):e&&0===t.indexOf("~/")?promise.get(t.slice(2)).then(function(i,n,o){n&&(!1===i?(this.SOURCE[t]=n,e.call(this,this.parser(n))):e.call({},null))}.bind(this)):void 0},set:function(t,e,i,n){e=(t?t+"::":"")+e,n&&(this.config.sids[e]=this.config.sids[n]),this.SOURCE[e]=i},take:function(t,e,i,n){return this.get((t?t+"::":"")+e,null,i,n)||this.get(e,null,i,n)},parser:function(t){return(new DOMParser).parseFromStringToNode("<body>"+t+"</body>","text/html").body},iterator:function(t){return t.nextNode?t:s.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1)},spath:function(t){return this.config.sids[t]},realpath:function(t,e){return App.realpath(this.module.id,this.spath(t.id),e,t.path)},target:function(t){var e=t.parentNode;return e?e._target?e._target:e.command?this.target(e):e.uuid:t._target},insert:function(t,e){var i=t.uuid,n=t.target,o=this.quantum(i),s=o[0],r=e.call(this);s?s.before(r):this.DOMS[n].appendChild(r),s&&o.each(function(t,e){e.remove()}),this.config.parallel&&(s?this.DOM2[s].before(this.DOM2[r.uuid]):this.DOM2[n].appendChild(this.DOM2[r.uuid]))},into:function(t,e,i){var n=this.DOMS[e],o=this.DOMS[i],s=t.quantum;if(n&&o){o.appendChild(n),o.trigger("ready"),this.config.parallel&&this.DOM2[i]&&this.DOM2[i].appendChild(this.DOM2[e]);for(var r=s.length-1;r>=0;r--)this.Quantum[s[r]].push(n)}},append:function(t,e){var i=e.uuid,n=this.target(e);if(e.command)return e.remove();this.into(t,i,n)},creatFragment:function(t,e){return void 0===t&&(t=this.i++),this.DOMS[t]||(this.DOMS[t]=s.createDocumentFragment(),this.DOMS[t].extendProperty("uuid",t),this.config.parallel&&(this.DOM2[t]=s.createDocumentFragment(),this.DOM2[t].extendProperty("uuid",t))),this.DOMS[t]},createElement:function(t,e,i,n){switch(i=i?this.uuid(t,e,i):e.uuid,n=n||e.nodeName){case"SELECTER":n="SELECT"}if(this.DOMS[i]=s.createElement(n),"HTMLUnknownElement"==this.DOMS[i].getInstanceType()&&(this.DOMS[i].__proto__=s.createElement("div").__proto__),this.DOMS[i].extendProperty("uuid",i),this.config.parallel){switch(n){case"VIDEO":case"CANVAS":var o=e.getAttribute("name");if(o||(o=(new UUID).id,e.setAttribute("name",(new UUID).id)),this.DOM2[i]=s.createElement("DIV"),"VIDEO"===e.nodeName){try{this.events.push(function(){s.getCSSCanvasContext("2d",i,this.DOMS[i].videoWidth,this.DOMS[i].videoHeight).getContext("2d").drawImage(this.DOMS[i],0,0,this.DOMS[i].videoWidth,this.DOMS[i].videoHeight)})}catch(t){}o=i}this.DOM2[i].css({"background-image":device.feat.prefix+"canvas("+o+")"});break;default:this.DOM2[i]=s.createElement(n)}this.DOM2[i].extendProperty("uuid",i),this.mission[t.order].parallel.push(function(){this.parallel(this.DOMS[i],this.DOM2[i])})}return this.DOMS[i]},setAttribute:function(t,e,i,n,o){var s="",r=e.uuid;s=this.variable(t,o,n,function(){this.setAttribute(t,e,i,n,o)},r+":attr:"+i),!1!==(s=this.attributeRule(t,e,i,s,o))&&(this.DOMS[r].setAttribute(i,s),this.config.parallel&&this.DOM2[r].setAttribute(i,s))},createTextNode:function(t,e,i,n){var o="",r=e.uuid;if(o=["STYLE","SCRIPT"].consistOf(e.parentNode.nodeName)?i:this.variable(t,n,i,function(){this.createTextNode(t,e,i,n)},r+":text"),o.html)return t.uuid=this.target(e),void this.compile(t.clone(),this.parser(o.html),n);this.DOMS[r]?this.DOMS[r].textContent=o:(this.DOMS[r]=s.createTextNode(o),this.DOMS[r].extendProperty("uuid",r),this.config.parallel&&(this.DOM2[r]=s.createTextNode(o),this.DOM2[r].extendProperty("uuid",r)),this.mission[t.order].parallel.push(function(){this.parallel(this.DOMS[r],this.DOM2[r])}))},createShadowRoot:function(t,e,i,n){var o=e.uuid,s=this.createElement(t,null,o,"style"),r=this.createElement(t,null,o,"shadow-root"),a=r.uuid,h=!!i.createShadowRoot&&i.createShadowRoot();if(h?(e.extendProperty("_target",a),s.innerHTML=this.css.compile(this.module.id,CSSBaseStyle,n,{descendant:!1}),h.appendChild(s),h.appendChild(r)):(r.className="shadow-root-"+a.replace(/\./g,"-"),s.innerHTML=this.css.compile(this.module.id,CSSBaseStyle,n,{path:t.path,descendant:"."+r.className}),i.appendChild(s),i.appendChild(r)),this.config.parallel){var l=this.DOM2[i.uuid],c=this.DOM2[s.uuid],u=this.DOM2[r.uuid];if(c.innerHTML=s.innerHTML,h){var d=l.createShadowRoot();d.appendChild(c),d.appendChild(u)}else l.appendChild(c),l.appendChild(u)}return{id:a,dom:r,shadow:h}},getElementById:function(t,e){var i;return e=e||0,i=this.DOM[e][t],i||0==e?i:this.getElementById(t,this.DOMS[e].scopeid)},getValueByMagic:function(t,e){var i,n;if(!e)return e;for(var o=0,s=e.length;o<s;o++)0==o?i=t.getValueByRoutes(e[0].splitCells(/\,/)):(n=this.helper[e[o]]||t.helper[e[o]])&&(i=n.apply(null,i));return i},getValueByRoute:function(t,e){var i,n;if(!e)return e;switch(e.substr(0,1)){case"@":e=e.substr(1),e=e.replace(/[\(\)]/g,",").split(/\,/),e.pop(),n=this.helper[e.shift()],e=e.join(",")}return i=t.getFunctionByRoute(e,this.Function[e]),n&&(i=n.apply(null,i)),i&&i.factory&&(this.Function[e]||(this.Function[e]=i.factory)),i.result},getOriginType:function(t){var e=!1;switch(t.charAt(0)){case"#":t=t.substr(1);break;case"!":t=t.substr(2),e=!0}return{html:e,watch:!0,origin:t}},getRootScope:function(t){return null===t.__proto__.__proto__?t:this.getRootScope(t.__proto__)},variable:function(t,e,i,n,s,r){var a,h={};return-1!==i.indexOf("{")&&(i=i.replace(o.origins,function(i,o,l){return l?(h=this.getOriginType(l),l=h.origin.split("|"),a=l[0]):o&&(h=this.getOriginType(o),a=h.origin),n&&s&&1==h.watch&&this.watch(t,e,a,n,s,r),l?this.getValueByMagic(e,l):o?this.getValueByRoute(e,a):void 0}.bind(this)),!0===h.html&&(i={html:i})),i},watch:function(t,e,i,n,s){function r(i){i&&"variable"==i.staticAnalysis()&&this.react(t,e,i,n,s)}function a(t){t=h.call(this,t),t=t.replace(o.string," ").split(o.token);for(var i=0,n=t.length;i<n;i++){var s=t[i];if(s){var a=s.split(o.key)[0];void 0===e[a]&&(e[a]=null),r.call(this,s)}}}function h(t){return t.replace(o.route,function(t,e,i){a.call(this,i)}.bind(this))}a.call(this,i)},react:function(t,e,i,n,o){var s=this,a=i.split("."),h=a.pop(),l=a.join("."),c=l?e.getValueByRoute(l):e[h]?e:this.getRootScope(e);"length"!==h&&c&&"object"===(void 0===c?"undefined":_typeof(c))&&"function"==typeof c.watch&&(void 0===c[h]&&(c[h]=null),this.mission[t.order]&&(this.entanglement.initial(i,[]).push({caller:n,uuid:o}),this.mission[t.order].entanglement.push(function(){c.watch(h,function(t,e,n){if(e!==n){var o={},a=[];s.entanglement[i].splice(-s.entanglement[i].length).each(function(t,e){o[e.uuid]||(o[e.uuid]=!0,a.push(e.caller))}),r(function(){a.each(function(t,i){i.call(s,e,n)})})}})})))},parallel:function(t,e){var i=this;(!this.config.parallel||1!=this.config.parallel.appoint||t.attributes&&t.attributes.hasOwnProperty("parallel"))&&t.observer({childList:!0,subtree:!1,attributes:!0,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1},function(n){n.each(function(n,o){if(e)switch(o.type){case"attributes":e.setAttribute(o.attributeName,t.getAttribute(o.attributeName));break;case"characterData":e.textContent=t.textContent;break;case"childList":r(function(){o.addedNodes.each(function(t,n){try{if(i.DOM2[n.uuid])e.insertBefore(i.DOM2[n.uuid],n.nextSibling?i.DOM2[n.nextSibling.uuid]:null);else{var o={};i.walker(i.iterator(n),function(t){var s=i.uuid({uuid:e.uuid},t),r=t.cloneNode();o[s]=r,t===n?e.insertBefore(r,n.nextSibling?i.DOM2[n.nextSibling.uuid]:null):o[t.parentNode.uuid].appendChild(r),i.parallel(t,r)})}}catch(t){}}),o.removedNodes.each(function(t,e){i.DOM2[e.uuid]&&i.DOM2[e.uuid].remove()})})}})})},setProperty:function(t,e){function i(t){return function(e,i){e&&("object"==(void 0===e?"undefined":_typeof(e))&&(e[1]="string"==typeof e[1]?e[1]:e[1].outerHTML,n.set(s.spacename,e[0],e[1]),e=e[0]),n.include(s,this,e,i,t))}}var n=this,o=e.uuid,s=n.state(o).extend({scopeid:t.scopeid,spacename:t.spacename});this.DOMS[o].extendProperties({parentFragment:t.fragment,previousCommit:t.commiter,previousScroller:t.scroller,parentShadowRoot:t.shadowroot,innerTemplate:i(!0),appendTemplate:i(!1),insetBeforeTemplate:i(-1),insetAfterTemplate:i(1)})},attributeRule:function(t,e,i,n,o){var s=this,a=this.DOMS[e.uuid];e.attributes;switch(i){case"id":case"uuid":var h=t.scopeid||0;n&&(this.DOM.initial(h,{})[n]=a);break;case"transform":this.mission[t.order].events.unshift(function(t){n=n.split("|");var i=n[0],o=s.commands("prefetch",e).key,r=0;if("#"==i&&(i=App.id),isNaN(i))if(o){var h,l=a.previousScroller,c=l?l.scrollEvent:null,u=a.parentFragment,d=function(){h=setTimeout(function(){var t=s.commands("param",e).value;!!c&&c.isScrolling()?c.one("scrollend",function(e){"break"!==e&&a.offsetHeight>0&&App.prefetch(i,t)}):App.prefetch(i,t)},2e3)};u?u.on("show",function(t){d()}).on("hide",function(){clearTimeout(h)}):d()}else void 0===App.modules[i]&&App.get(i);a.Touch().on(n[1]||"tap",function(t){var n=s.commands("param",e).value,o=s.commands("data-event",e).value;return!(Date.now()-r<300)&&(r=Date.now(),App.trigger("transform",{id:i,od:App.id,param:n?n.paramsToObject():{},data:o?o.paramsToObject():{},event:t}),App.transform.to(i,n,null,{touches:t}),t.stopPropagation(),!1)})});break;case"href":if(0===n.indexOf("#"))return n=App.route(n.substr(1)),this.setAttribute(t,e,"transform",n.id,o),this.setAttribute(t,e,"param",n.param,o),!1;this.mission[t.order].events.unshift(function(i){var o=n.split("|"),r=this.realpath(t,o[0]);a.addEventListener("click",preventDefaultEvent,!1),a.Touch().on(o[1]||"tap",function(t){var i=s.commands("target",e).value,n=s.commands("data-event",e).value;return t.stopPropagation(),App.trigger("href",{data:n?n.paramsToObject():{},event:t}),setTimeout(function(){App._EXISTS=-1,i?top.open(r,i):top.location.href=r},200),!1})});break;case"src":case"url":case"uri":case"link":case"path":case/^(src:|url:|uri:|link:|href:|path:)+(.*?)$/.test(i)?i:null:n=this.realpath(t,n);break;case"style":n=this.css.compile(this.module.id,n+";",o,{sid:this.spath(t.id),path:t.path,descendant:!1},a);break;case"toggle-class":this.mission[t.order].events.push(function(t){var e=n.split("|"),i=e[0],o=e[1].trim(),s=o.split(" ");o&&a.Touch().on(o,function(t){return 2==s.length?t.type==s[0]?a.addClass(i):a.removeClass(i):a.hasClass(i)?a.removeClass(i):a.addClass(i),!1})});break;case"tap-highlight":this.mission[t.order].events.push(function(t){a.on("touchstart mousedown",function(t){var e,i;e=setTimeout(function(){r(function(){a.addClass(n)}),i=setTimeout(function(){r(function(){a.removeClass(n)})},3e3)},50),this.one("touchmove touchend touchcancel mousemove mouseup mousecancel",function(t){["touchmove","mousemove"].consistOf(t.type)&&(clearTimeout(e),clearTimeout(i)),setTimeout(function(){r(function(){a.removeClass(n)})},200)})})});break;case 0==i.indexOf("on-")?i:null:this.mission[t.order].events.unshift(function(o){var r=t.scopeid,h=n.split("::"),l=2==h.length?h[0]:"default",c=i.split("-")[1],u=2==h.length?h[1]:h[0],d=/[^(]+/.exec(u)[0],p=function(e){return e.EVALSCOPE[(r?t.scopeid+":":"")+l]||function(t,i){new e.Function(d+".apply(this, [].slice.call(arguments, 1))")(i)}},f=function(t){return function(){var e=[d],i=arguments;m.length?m.each(function(t,n){switch(n=n.trim()){case"this":n=a;break;case"event":n=i[0]}e.push(n)}):e.push(i[0]),p(t).apply(this,e)}},m=(/\((.*)\)/.exec(u)||[null,""])[1].split(",");switch(c.split("-")[0]){case"event":case"events":u=u.split("|"),c=u[1],u=u[0]}switch(c.split(" ")[0]){case"pan":case"panstart":case"panmove":case"panend":case"pancancel":case"panleft":case"panright":case"panup":case"pandown":case"pinch":case"pinchstart":case"pinchmove":case"pinchend":case"pinchcancel":case"pinchin":case"pinchout":case"press":case"pressup":case"rotate":case"rotatestart":case"rotatemove":case"rotateend":case"rotatecancel":case"swipe":case"swipeleft":case"swiperight":case"swipeup":case"swipedown":case"tap":a.Touch().on(c,function(t){t.self=a;var i=s.commands("data-event",e).value,n=!!s.commands("prevent-default",e).key,r=!!s.commands("stop-propagation",e).key;n&&t.preventDefault(),r&&t.stopPropagation(),f(o)(t),App.trigger("touch",{data:i?i.paramsToObject():{},event:t})});break;default:a.on(c,f(o))}})}return n||""},tagRule:function(t,e,i,n){var s=this,a=e.uuid,h=this.target(e),l=e.nodeName,c=this.DOMS[a],u=c.attributes;switch(l){case"IF":case"ELSE":case"ELSEIF":e.command=!0,t.uuid=a,t.target=h;var d=this.sign(l,u,"is",-1,["(",")"])||this.sign(l,u,"not",-1,["!(",")"])||u[0].name,p=this.getValueByRoute(i,d),f=e.nextElementSibling,m=e.factor,g="ELSE"!==l&&f&&"ELSE"===f.nodeName,v="ELSE"!==l&&f&&"ELSEIF"===f.nodeName,y=t.clone(),b=e.cloneNode(!0);p||(b.innerHTML="\n"),this.insert(y,function(){return this.compile(y,b,i,!0)}),g?f.setAttribute("is",m?m[0]+"&&!("+m[1]+")":"!("+d+")"):v&&(m=["!("+d+")",f.getAttribute("is")],f.extendProperty("factor",m),f.setAttribute("is",m.join("&&"))),n.call(this,d,t,e);break;case"LOOP":e.command=!0,t.uuid=a,t.target=h;var y,w,d=this.sign(l,u,"data",0),x=this.getValueByRoute(i,d)||[],S=u[2]?u[2].name:"$value",_=u[3]?u[3].name:"$index";this.insert(t,function(){var n=this.creatFragment();return x.each(function(o,r){y=t.clone(),b=e.cloneNode(!0),w=i.clone(),w[_]=o,w[S]=r;var a=s.compile(y,b,w,!0);s.into(y,a.uuid,n.uuid)}),n}),c.extendProperty("scope",w),n.call(this,d,t,e);break;case"SWITCH":e.command=!0,t.uuid=a,t.target=h;var d=this.sign(l,u,"case",0),T=this.getValueByRoute(i,d)||!0,E=this.creatFragment();this.insert(t,function(){return e.children.each(function(e,n){var o=t.clone(),r=n.nodeName,a=n.attributes,h=s.sign(l,a,!0===T?"is":"value",0),c=!0===T?s.getValueByRoute(i,h):h;if(T==c||"default"==r)return E.appendChild(s.compile(o,n,i,!0)),!1}),E}),n.call(this,d,t,e);break;case"VAR":e.command=!0;var k=this.sign(l,u,"name",0),P=e.textContent;null==k&&this.debug(l,"name=?",!0),i[k]=i.getValueByRoute(P);break;case"INPUT":case"TEXTAREA":case"HTMLAREA":e.command=!1;var A=this.commands("normal",e).key,O=this.commands("react",e),C=(this.commands("free",e).key,this.commands("for-scroll",e).value),D=this.getElementById(C,t.scopeid);if("HTMLAREA"==l&&c.attr({contenteditable:"true","aria-multiline":"true",spellcheck:"true",role:"textbox",dir:"ltr"}).css({overflow:"hidden","word-break":"break-all","word-wrap":"break-word","user-select":"text",cursor:"text"}),O.key){var I=O.value.split("|"),d=I[0],M=I[1]||"change",R=c.defaultValue;if(!M||!d)break;void 0!==i.getValueByRoute(d)&&c.bind(M,function(t){i.setValueOfHref(d,"HTMLAREA"===l?this.textContent:this.value||this.getAttribute("default-value")||R||"")})}this.module.on("hide",function(){c.blur()}),this.mission[t.order].events.push(function(t){function n(){x=top.innerHeight,_=c.offset().top,y=null}function o(t,e,i,n,s){s=void 0==s?1:s,t=void 0==t?top.scrollY:t,(1==s?t>e:t<e)||(n=void 0==n?Math.abs((e-t)/i*17.6):n,r(function(){top.scrollTo(0,t+=s*n),o(t,e,i,n,s)}))}function a(){if(this.moving||this.wheeling){var t=c.offset().top,e=c.offsetHeight,i=S+k,n=x-P;(t+e<=i||t>=n)&&c.blur()}}function h(){r(function(){c.getSelectionRangeInsert("")})}function d(t){var e=D||c.closest("scroll");(w=e?e.scrollEvent:null)&&1==t&&(R=w.minScrollY)}function p(){return b=y-E.top-(0==top.scrollY?S:0)+(s.module.config.sandbox?S:0)}function f(e){function i(e){t.keyboard.height=S=top.scrollY||x-top.innerHeight,0!=S&&(w.minScrollY=R+S,w.options.minScrollY=w.minScrollY,E=c.getSelectionRangeOffset(),v=x-S-k-P,y=S+v/2,w.scrollBy(0,p(),300,null,!1),w.on("scroll",a),t.trigger("keyboardup",{height:S}),I&&o(null,0,300,null,-1))}d(1),w&&(device.os.ios&&device.os.iosVersion<12&&w.on("scroll scrollend",h),A||setTimeout(function(){top.one("scrollend",i),setTimeout(function(){0==S&&i()},300);var t=0;device.os.mobileSafari&&device.os.iosVersion<12&&(t=24*viewportScale),o(null,viewportHeight-t,300,null,1)},300))}function m(){if(d(),w&&(device.os.ios&&device.os.iosVersion<11&&w.off("scroll scrollend",h),!A)){if(0==S)return!1;top.scrollTo(0,0),w.wrapper.scrollTop=0,w.minScrollY=R,w.options.minScrollY=R,w.off("scroll",a),w._refresh(),t.keyboard.height=S=0}}function g(t){d(),w&&("keyup"!=t.type||[8,13,37,38,39,40].consistOf(t.keyCode))&&(O?E=c.getSelectionRangeOffset():C&&(E=c.getSelectionRangePosition()),M&&E&&E.each(function(t,e){i.setValueOfHref(M+"."+t,e)}),A||"input"==t.type&&t.timeStamp-T<2e3||w&&y&&(O||(E=c.getSelectionRangeOffset()),T=t.timeStamp,w.scrollBy(0,p(),300,null,!1)))}var v,y,b,w=null,x=top.innerHeight,S=0,_=0,T=0,E=null,k=parseInt(s.commands("scroll-offset-top",e).value||0)*device.ui.scale,P=parseInt(s.commands("scroll-offset-bottom",e).value||0)*device.ui.scale,O=s.commands("react-offset",e).value,C=s.commands("react-position",e).value,I=!!s.module.config.sandbox||s.sign(l,u,"react-resize",-1,null,!0,!1),M=O||C,R=0;c.on("click",n),c.on("focus",f),c.on("blur",m),c.on("focus keyup input paste mouseup",g)});break;case"COMMIT":e.command=!1,t.commiter=c,c.extendProperty("commit",function(t){var i={},n=s.commands("method",e).value,o=s.commands("action",e).value;c.find("input, textarea, htmlarea").each(function(t,e){var n=e.name,o=e.value;n&&void 0!==o&&(i[n]=o)}),n=-1==["get","post"].indexOf(n)?"get":n,promise[n](o,i).then(t)});break;case"IMG":case"VIDEO":e.command=!1;var L=s.commands("onload-class",e).value;c.onload=c.onerror=c.onabort=function(t){s.reflow(c.previousScroller),L&&"load"==t.type&&c.addClass(L)},c.onselectstart=c.ondragstart=function(t){return t.preventDefault(),!1};break;case"FRAGMENT":e.command=!1,t.fragment=c;break;case"SCROLL":e.command=!1,t.uuid=a,t.scroller=c;var Y=this.sign(l,u,"finite",-1,null,!0,!1),X=this.sign(l,u,"infinite",-1,null,!0,!1);if(Y)this.compile(t,this.parser("<scrolling></scrolling>"),{});else if(X){var N=Math.max(c.offsetHeight,c.offsetWidth)||Math.max(device.ui.height,device.ui.width),z=this.commands("item-size",e).value||!1,B=z||this.commands("item-min-size",e).value||100,F=Math.max(B&&N?Math.ceil(6*N/(device.ui.scale*B)):this.commands("cycles",e).value||5,5);this.compile(t,this.parser("<scrolling>"+"<infinite></infinite>".repeat(F)+"</scrolling>"),{})}this.mission[t.order].scroller.push(function(n){var o={startX:this.sign(l,u,"start-x",-1,null,!0,0),startY:this.sign(l,u,"start-y",-1,null,!0,0),scrollX:this.sign(l,u,"x",-1,null,!0,!1),scrollY:this.sign(l,u,"y",-1,null,!0,!0),freeScroll:this.sign(l,u,"free",-1,null,!0,!1),stepLimit:this.sign(l,u,"step-limit",-1,null,!1,120),speedLimit:this.sign(l,u,"speed-limit",-1,null,!1,4),speedRate:this.sign(l,u,"speed-rate",-1,null,!1,1),scrollbars:this.sign(l,u,"scrollbars",-1,null,!0,!0),indicator:this.sign(l,u,"indicator",-1,null,!0,null),snap:this.sign(l,u,"snap",-1,null,!0,!1),zoom:this.sign(l,u,"zoom",-1,null,!0,!1),bounce:this.sign(l,u,"bounce",-1,null,!0,!0),momentum:this.sign(l,u,"momentum",-1,null,!0,!0),mouseWheel:this.sign(l,u,"mouse-wheel",-1,null,!0,!0),deferred:this.sign(l,u,"deferred",-1,null,!0,!1),deceleration:this.sign(l,u,"deceleration",-1,null,!1,.003),useTransition:this.sign(l,u,"use-transition",-1,null,!0,!0),interactive:this.sign(l,u,"interactive",-1,null,!0,!0),bindToWrapper:this.sign(l,u,"bind-event-self",-1,null,!0,!0),preventDefault:this.sign(l,u,"prevent-default",-1,null,!0,!0),stopPropagation:this.sign(l,u,"stop-propagation",-1,null,!0,"auto"),coverPropagation:this.sign(l,u,"cover-propagation",-1,null,!0,!0),directionLockThreshold:this.sign(l,u,"direction-lock-threshold",-1,null,!1,5),directionLockThresholdX:this.sign(l,u,"direction-lock-threshold-x",-1,null,!1,!1),directionLockThresholdY:this.sign(l,u,"direction-lock-threshold-y",-1,null,!1,!1)};if((o.indicator||o.scrollbars)&&o.extend({fadeScrollbars:this.sign(l,u,"fade-scrollbars",-1,null,!0,!0)}),o.mouseWheel&&o.extend({mouseWheelSpeed:this.sign(l,u,"mouse-wheel-speed",-1,null,!1,.15),mouseWheelAction:this.sign(l,u,"mouse-wheel-action",-1,null,!1,"normal"),invertWheelDirection:this.sign(l,u,"invert-wheel-direction",-1,null,!1,!1)}),o.snap?o.extend({snapEasing:this.sign(l,u,"snap-easing",-1,null,!1,""),snapDuration:this.sign(l,u,"snap-duration",-1,null,!1,400),snapThreshold:this.sign(l,u,"snap-threshold",-1,null,!1,.15)}):o.zoom&&o.extend({zoomMin:this.sign(l,u,"zoom-min",-1,null,!1,1),zoomMax:this.sign(l,u,"zoom-max",-1,null,!1,6),startZoom:this.sign(l,u,"start-zoom",-1,null,!1,1),zoomOrigin:this.sign(l,u,"zoom-origin",-1,null,!1,"0,0,0")}),Y||X){var r="",h=this.sign(l,u,"data-origin",-1),d=h?h.split(","):[],p=this.sign(l,u,"data",-1),f=p?p.split(/\.|\[/).shift():d[0],m=d.length?d:[f],g=i[f]||null,v=this.sign(l,u,"end-flag",-1,null,!1,null),y=this.sign(l,u,"limit",-1,null,!1,10),b=this.sign(l,u,"template",-1,null,!1,null);b||(b=a,this.set(t.spacename,b,e.find("scrolling").html())),r=this.take(t.spacename,b,"<fragment>","</fragment>");var w=function(t,e,n){var o=g&&0===this.infiniteDataLength?i:null;s.module.turnover({id:a,data:o,start:t,limit:y,linker:p,origins:m,endflag:v,turnover:e},function(t,e){null==t&&0==e&&s.debug(l,"data={Array}",null),n(t,e),g=null})};o.extend({maxPage:this.sign(l,u,"max-page",-1,null,!1,1e3)})}Y?o.extend({finite:Y,finiteFragment:this.creatFragment(),getInfiniteDataset:w,getFiniteCacheBuffer:function(e,n){e&&(e.__proto__=i,e.scroll={x:this.x,y:this.y,index:n},n=a+":"+n,t.uuid=n,t.order=n,s.compile(t,r.cloneNode(!0),e),this.finiteFragment.appendChild(s.DOMS[n]),setTimeout(function(){s.end(n)},0))}}):X&&o.extend({infinite:X,infiniteElements:c.children[0].children,infiniteItemSize:Number(z),infiniteCacheBuffer:this.sign(l,u,"buffer",-1,null,!1,50),getInfiniteDataset:w,setInfiniteDataFiller:function(t,e){var i=a+":"+e,n=t.children[0],o=s.DOMS[i];n&&(o.appendChild(n),n.trigger("hide",{key:e}))},getInfiniteDataFiller:function(t,e,i){var n=a+":"+e;this.setInfiniteDataFiller(t,i),this.updating&&(s.DOMS[n]=null,delete s.DOMS[n]),t.appendChild(s.DOMS[n]||this.updateInfiniteCache(e)),t.children[0].trigger("show",{key:e}),s.end(n)},getInfiniteCacheBuffer:function(e,n){if(e)return e.__proto__=i,e.scroll={x:this.x,y:this.y,index:n},n=a+":"+n,s.DOMS[n]||(t.uuid=n,t.order=n,s.compile(t,r.cloneNode(!0),e)),s.DOMS[n]}}),c.Scroll(o,n),this.module.on("hide",c.scrollEvent.stop)});break;case"SCROLLING":case"SCROLLBAR":case"PULLUP":case"PULLDOWN":case"PULLRIGHT":case"PULLLEFT":case"SCROLLCOVER":t.scroller.extendProperty(l.toLowerCase(),c);break;case"STYLE":e.command=!1;var H=e.getAttribute("src"),W=e.textContent,V=function(e,n){n=s.css.compile(s.module.id,n,i,{path:t.path,target:s.DOMS[t.target],descendant:!(!t.spacename||c.createShadowRoot)&&".shadow-root-"+t.scopeid.replace(/\./g,"-")}),H?e.innerHTML=n:e.textContent=n};H?promise.get(this.realpath(t,H)).then(function(t,e,i){V(c,e),s.reflow(c.previousScroller)}):V(e,W);break;case"SCRIPT":e.command=!0;var H=this.commands("src",e).value,j=this.commands("sync",e).key,U=this.commands("global",e).key,A=this.commands("normal",e).key,q={}.extend(t),K=U?[]:null,$=t.scopeid?t.path:App.config.root+"modules/"+this.module.id,G=this.commands("name",e).value||"default",Z=e.textContent;if(j){new this.sandbox.window.Function("scope, root",Z+"\n")(i,s.DOM[q.scopeid]),e.textContent=null;break}this.mission[q.order].scripts.push(function(t){function e(){K&&(Z=Z.replace(o.imports,function(t,e,i){return i=$+"/"+e,K.push('"'+i+'"'),t.replace(e,i)}),Z='var __EVAL__ \ndefine("argument", '+(K.length?"["+K.join(",")+"], ":" ")+"function (require, module, exports) { \n"+Z+'\n\n__EVAL__ = function (fn) { return eval("(" + fn.toString() + ").apply(this, [].slice.call(arguments, 1))") } \n'+(U?'__inject__["'+q.spacename+'"].ready()':"")+"\n}) \n"),q.scopeid?U?s.sandbox.window[q.spacename]||new s.sandbox.window.Function("__inject__",Z+'\nfunction __Global__ () { \n this.init() \n} \n__Global__.prototype = { \n init : function () { \n  this._readies = [] \n  this._readied = false \n }, \n call : function () { \n  if ( !this._readied ) { \n   this._readies.push(arguments) \n  } else { \n   return __EVAL__.apply(this, arguments) \n  } \n }, \n ready : function () { \n  var that = this \n    , args = arguments \n  this._readies.each(function (i, args) { \n   return __EVAL__.apply(this, args) \n  }) \n  this._readied = true \n } \n} \n__inject__["'+q.spacename+'"] = new __Global__()')(s.sandbox.window):new t.Function("__inject__, shadow, scope, node, global, components, register, root",Z+'\n__inject__["'+q.scopeid+":"+G+'"] = function (fn) { \nreturn eval("(" + fn.toString() + ").apply(this, [].slice.call(arguments, 1))") \n} \n')(t.EVALSCOPE,q.shadowroot,i,function(t){return s.getElementById(t,q.scopeid)},s.sandbox.window[q.spacename],q.dom,function(t,e){q.dom.extendProperty(t,e)},s.DOMS[q.scopeid]):A?t.eval(Z):new t.Function("__inject__, scope, node, root",Z+' \n__inject__["'+G+'"] = function (fn) { \nreturn eval("(" + fn.toString() + ").apply(this, [].slice.call(arguments, 1))") \n} \n')(t.EVALSCOPE,i,function(t){return s.getElementById(t,0)},s.DOM[0])}Z&&e(),H&&promise.get(H).then(function(t,i,n){t||(Z=i,e())})}),e.textContent=null;break;case"TEMPLATE":e.command=!0;var k=this.sign(l,u,"name",0);this.set(t.spacename,k,e.innerHTML,t.id);break;case"INCLUDE":e.command=!0,t.uuid=h;var k=this.sign(l,u,"name",0),J=this.datar(i,u,!0,1,0),Q=this.take(t.spacename,k),y=t.clone();Q&&(e.innerHTML=null,y.id=k,this.compile(y,Q,J));break;case-1!=l.indexOf("-")?l:"SHADOW":var J=this.datar(i,u,!0),tt="SHADOW"===l,b=e.cloneNode(!0),et=this.createShadowRoot(t,e,c,J),it=et.id,nt=et.dom,q={}.extend(t),ot=s.module.config.components||{},H=this.commands("src",e).value,st=this.commands("path",e).value,rt=this.commands("demo",e).key,at=H||(st||ot.path||App.config.root+"components")+"/"+l.toLowerCase(),Q=tt||rt?s.parser(e.innerHTML):null,ht=function(t,e,i){nt.innerHTML=null,nt.scopeid=q.scopeid,q.sid="components",q.uuid=it,q.dom=c,q.order=it,q.scopeid=it,q.spacename=l,q.path=i,q.shadowroot=et.shadow||this.window.validWindow.document,this.compile(q,t,e),this.reflow(c.previousScroller),this.end(it),c.trigger("load"),c.loadState="complete"},lt=function(t){t.components=b,Q&&(ht.call(s,Q.cloneNode(!0),t,null),c.trigger("ready"),c.readyState="complete"),tt||s.get("~/"+at+"/index.html",function(e){ht.call(s,e,t,at),c.trigger("ready"),c.readyState="complete"}),q.scroller&&s.observer(nt,function(t){s.reflow(c.previousScroller)})};this.DOM[it]={},this.components.waiting++,this.mission[t.order].components.push(function(t){return function(e){lt(t),this.components.waiting--}}(J)),e.innerHTML=null,c.extendProperty("update",lt),c.extendProperty("reflow",function(){s.reflow(c.previousScroller)}),c.extendProperty("ready",function(t){c.readyState&&t(),c.on("ready",t)}),c.extendProperty("load",function(t){c.loadState&&t(),c.on("load",t)}),c.extendProperty("register",function(t){void 0==c[t]?c.extendProperty(t,function(e){c.bind(t,e)}):App.console.error("components register","componentsError",'"'+t+'" is token')})}},sign:function(t,e,i,n,o,s,r){var a,h,l,c,u;if(n>=0)a=e[n];else if(l=!0,!(a=e.getNamedItem(i))&&-1===n)return r;return a||this.debug(t,i,e),c=a.name,u=a.value,h=c===i,u=h?u:!l&&c,u=u&&o?o[0]+u+o[1]:u,
["false","none",null].consistOf(u)?u=!1:["","true"].consistOf(u)?u=!0:isNaN(u)||(u=Number(u)),u},datar:function(t,e,i,n,o){return e.length?function(s){return i&&(s.__proto__=t),e.each(function(e,i,r,a){var h=i.name,l=i.value;switch(h){case"data":s.extend(t.getValueByRoute(l));break;case 0===h.indexOf("data:")?h:null:s[h.slice(5)]=t.getValueByRoute(l);break;default:l||e!==n?e!==o&&(s[h]=l||!0):s.extend(t.getValueByRoute(h))}},s),s}({}):t},commands:function(t,e){var i=this.DOMS[e.uuid],n=e.attributes;return i.attributes.getNamedItem(t)?{key:!0,value:i.getAttribute(t)}:n.getNamedItem(t)?{key:!0,value:e.getAttribute(t)}:{key:null,value:null}},observer:function(t,e){t.observer({childList:!0,subtree:!0,characterData:!0},e)},reflow:function(t){if(t){var e=t.scrollEvent;e&&(clearTimeout(e.refreshRequestId),e.refreshRequestId=setTimeout(function(){"function"==typeof e.refresh&&e.refresh()},300))}},step:function(t,e,i){switch(this.uuid(t,e),e.nodeType){case Node.ELEMENT_NODE:this.createElement(t,e),this.setProperty(t,e);for(var n=0,o=e.attributes.length;n<o;n++){var s=e.attributes[n].name,r=e.attributes[n].value;this.setAttribute(t,e,s,r,i)}this.tagRule(t,e,i,function(t,e,n){this.watch(e,i,t,function(){this.step(e,n,i),this.end(e.order)},n.uuid)});break;case Node.TEXT_NODE:this.createTextNode(t,e,e.textContent,i)}this.append(t,e)},walker:function(t,e){for(var i;i=t.nextNode();)e.call(this,i)},include:function(t,e,i,n,o,s){switch(i="string"==typeof i?this.take(t.spacename,i):i,e="string"==typeof e?this.getElementById(e,t.scopeid):e,o&&(e.innerHTML=null),t.uuid=e.uuid,i=this.compile(t,i,n,!0),s){case-1:e.before(i);break;case 1:e.after(i);break;default:e.appendChild(i)}this.reflow(e.previousScroller),this.end(t.order)},render:function(t,e,i){return this.save(e,i),this.compile(this.state(t),this.get(t),i,!0),[this.DOMS[0],this.DOM2[0]]},compile:function(t,e,i,n){var o,s=t.uuid;if(void 0!=e)return e=this.iterator(e),o=e.nextNode(),s=this.creat(t,o,n),this.startTime=Date.now(),this.walker(e,function(e){this.step(t,e,i)}),t.quantum.splice(-1),this.endTime=Date.now(),this.countTime=this.endTime-this.startTime,this.renderCountTime+=this.countTime,this.countTime>(0==s?100:10)&&App.console.warn("<"+o.nodeName.toLowerCase()+"> Consuming too long","Performance warning",this.countTime/1e3+"s"),this.DOMS[s]},dispatch:function(t,e){if(this.mission[t]&&this.window===this.module.elements.sandbox.window){for(var i=0,n=this.mission[t][e].length;i<n;i++)this.mission[t][e][i].call(this,this.window);this.mission[t][e]=[]}},over:function(t){0==t&&this.window.window&&(this.window.trigger("moduleload"),App.trigger("moduleload",{id:this.module.id,module:this.module})),0==this.components.waiting&&(this.components.waiting=-1,this.loaded(),this.loaded=noop,App.console.info("Module ["+this.module.id+"]","rendering time-consuming",this.renderCountTime/1e3+"s"),this.window.window&&(this.window.trigger("moduleloadall"),App.trigger("moduleloadall",{id:this.module.id,module:this.module})))},end:function(t){this.dispatch(t,"parallel"),this.dispatch(t,"entanglement"),this.dispatch(t,"scroller"),this.dispatch(t,"components"),this.dispatch(t,"scripts"),this.dispatch(t,"events"),this.dispatch(t,"async"),this.over(t)},load:function(t){return this.loaded=t,this},debug:function(t,e,i,n){if(App.console.error("<"+t+" "+e+"=?>","DOMError","is not defined"),i&&App.console.dir([i]),n)throw"<"+t+"> error"}},e.exports=n}),define("~/css",[],function(t,e,i){function n(t){return void 0===t||0==t.length||null==t}function o(t){return device.feat.prefixStyle(t,!0)}function s(){if(!(this instanceof s))return new s}var r={},a={},h=window.requestAnimationFrame,l={variable:/\[(.*?)(?=\])\]/g,factor:/\((.*?)(?=\))\)/,url:/\burl\((.*?)(?=\))\)/,calc:/\bcalc\((.*)(?=\))\)/,fun:/(\w+)\((.*)(?=\))\)/,eval:/[\(\)]/g,evals:/\@\((.*?)(?=\%\>)\%\>/g,media:/\(([^\)]+)(?=\))\)/,classes:/\bclass[\s]?([^\s\(]+)[\s]?\((.*?)(?=\))\)/,section:/\(([^\)]+)(?=\))\)/,comment:/\/\*[\s\S]*?\*\//g,onload:/\bonload\(?(.*\b)?\)?(\s+url\(\'(.*?)?(?=\'\))\'\))/gi,attr:/([^\:]+):([^\;]*)[\;\}]/,alt:/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+[\;\}](?!\s*\*\/))/gim};s.prototype={init:function(t,e){return this.id=t,this.module=e,this._keyFrame=[],this.sandbox=application.sandbox,this},setup:function(t){this.config=t||{root:"modules/",data:{},descendant:!1},this.variable={attributes:{},children:{}},this._descendant=this.config.descendant?this.config.descendant+" ":"",this.sandbox.window.fileCache={},this.sandbox.window.fileLoading=[]},clear:function(){this.variable={attributes:{},children:{}}},render:function(t,e,i){var n=this.compile("frameworks",CSSBaseStyle);if(!t)throw"IOING ERROR { module "+e+" css source is null }";for(var o=0,s=t.length;o<s;o++){var r=t[o];n+=this.compile(e[r],i[r],{root:0})}return n},compile:function(t,e,i,n,o){return this.id=t,this.opts=n||{},this.scope={}.extend(this.config.data,i),this.descendant=!1===this.opts.descendant?"":this._descendant+(this.opts.descendant?this.opts.descendant+" ":""),this.element=o,this.toCSS(this.data=this.toJSON(e))},toJSON:function(t,e){var i={children:{},attributes:{}},o=null,s=0;if(void 0===e)var e={ordered:!1,comments:!1,stripComments:!1,split:!1};for(e.stripComments&&(e.comments=!1,t=t.replace(l.comment,""));null!=(o=l.alt.exec(t));)if(!n(o[1])&&e.comments){var r=o[1].trim();i[s++]=r}else if(n(o[2])){if(!n(o[3]))return i;if(!n(o[4])){var a=o[4].trim();"}"==a.charAt(a.length-1)&&(l.alt.lastIndex=l.alt.lastIndex-1);var h=l.attr.exec(a);if(h){var c=h[1].trim(),u=h[2].trim();if(e.ordered){var d={};d.name=c,d.value=u,d.type="attr",i[s++]=d}else if(c in i.attributes){var p=i.attributes[c];p instanceof Array||(i.attributes[c]=[p]),i.attributes[c].push(u)}else i.attributes[c]=u}else i[s++]=a}}else{var c=o[2].trim(),f=this.toJSON(t,e);if(e.ordered){var d={};d.name=c,d.value=f,d.type="rule",i[s++]=d}else{if(e.split)var m=c.split(",");else var m=[c];for(var g in m){var v=m[g].trim(),y=v in i.children;if(y&&0==v.indexOf("@")&&(v+=" ",y=!1),y){for(var b in f.attributes)i.children[v].attributes[b]=f.attributes[b];for(var w in f.children)i.children[v].children[w]=f.children[w]}else i.children[v]=f}}}return i},toCSS:function(t,e,i,n,o){var s="";if(void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!1),t.attributes)for(l in t.attributes){var r=t.attributes[l];if(r instanceof Array)for(var a=0;a<r.length;a++)s+=this._setAttr(l,r[a],e,i,o);else s+=this._setAttr(l,r,e,i,o)}if(t.children){var h=!0;for(var l in t.children)n&&!h?s+="\n":h=!1,s+=this._setNode(l,t.children[l],e,i)}return s},realpath:function(t){return application.realpath(this.id,this.opts.sid,t,this.opts.path)},unit:function(t,e,i,n){return i=0,n=0,e=e||this.scope,-1!==t.indexOf("@(")&&(t=t.replace(l.eval,function(t,e){switch(t){case"(":i++;break;case")":n++,i==n&&(t="%>")}return t}),t=t.replace(l.evals,function(t,i){var n=!1;return i=e.getValueByRoute(i.replace(UNIT.__unitRegExp__,function(t,e,i){if("%"==i)switch(name){case"width":i="vw";break;case"height":i="vh"}return n=!0,e*(UNIT[i]||1)})),"number"==typeof i&&n?i+"px":i})),t=t.replace(UNIT.__unitRegExp__,function(t,e,i){return UNIT.__nativeUnits__[i]?e+i:e*(UNIT[i]||1)+"px"})},eval:function(t,e){return-1!==t.indexOf("(")&&(device.feat.supportSizeCalc||(t=t.replace(l.calc,function(t,e){return"@("+e+")"}))),t=this.unit(t,e)},_loadBackgroundImage:function(t,e,i,n,o){var s=this,r=document.createElement("IMG");r.src=i,r.onload=function(){h(function(){if(t.style.backgroundImage=o?"":e,n)for(var i=n.split(","),s=0,a=i.length;s<a;s++){var h=i[s].split(":");t.style.set(h[0],h[1])}r.remove()}),s.sandbox.window.fileCache[i]=!0},r.onerror=function(){r.remove()},s.sandbox.window.document.documentElement.appendChild(r)},_getVariable:function(t,e){var i=this.scope,n=(this.config,this.variable);return-1!==t.indexOf("[")&&(t=t.replace(l.variable,function(t,o){return t=null,e&&n.children[e]&&(t=n.children[e].getValueByRoute(o)),t||(n.attributes.getValueByRoute(o)||a.getValueByRoute(o)||i.getValueByRoute(o))})||t),t},_setAttr:function(t,e,i,n,s){var a=this,h=(this.id,this.config,"");switch(t=o(t),e=this._getVariable(e,n),e=this.eval(e),t){case"display":if(["box","inline-box"].consistOf(e))return h+="\t".repeat(i)+t+": "+device.feat.prefix+e+";\n",h+="\t".repeat(i)+t+": "+e+";\n";break;case"background-image":case"border-image":case"background":case"content":case"src":-1!=e.indexOf("url(")&&(e=e.replace(l.url,function(t,e){return"url('"+a.realpath(e||"")+"')"}),-1!=e.indexOf("onload")&&(e=e.replace(l.onload,function(t,e,i,n){if(n){var o=a.element,r=a.opts.target;if(!o){var h=function(){this.find(s).each(function(){this.style.backgroundImage="none",a._loadBackgroundImage(this,i,n,e,1)})};return r?r.on("ready",h):a.module.on("load",function(){(r=a.module.elements.context)&&h.call(r)}),i}var l=function(t){c=setTimeout(function(){a._loadBackgroundImage(o,i,n,e),p&&u.off("show",f).off("hide",m)},t||0)};if(a.sandbox.window.fileCache[n])return i;var c,u=o.parentFragment,d=o.previousScroller,p=d&&d.getAttrSign("infinite");if(p){var f=function(t){var e=d.scrollEvent,i=0;e&&(i=e.wrapperHeight,0==e.acceleration&&(i=Math.min(500*(e.speedM||1),2e3))),l(i)},m=function(){clearTimeout(c)};u.on("show",f).on("hide",m)}else l(0)}return""})));var c=e.indexOf("gradient(");if(c>=0)return h+="\t".repeat(i)+t+": "+e+";\n",e=0==c?device.feat.prefix+e:e.replace(/([\b\w\-]+gradient\()/,function(t,e){return 0==e.indexOf("-")&&(e=e.replace(/\-\w+\-/,"")),device.feat.prefix+e}),h+="\t".repeat(i)+t+": "+e+";\n";break;case"@extend":var u=this.data.children[e];if(u){var d=u.attributes;for(t in d)h+=this._setAttr(t,d[t],i,n);return h}break;case"@class":var p=l.fun.exec(e),t=p[1],f=p[2].split(/[\s]?\,[\s]?/),m=this.data.children["@"+t]||r[t]||{},g=m.args,d=m.attr;for(t in d)h+=this._setAttr(t,d[t].replace(l.variable,function(t,e){return f[g[e]]||t}),i,n);return h}return"\t".repeat(i)+t+": "+e+";\n"},_setNode:function(t,e,i,n){var o="",s=e.descendant||this.descendant,h=[],c=0,u=!1,d=!1,p=!1,f={};if(0==t.indexOf("@"))switch(s="",h=t.split(/\s/),h[0]){case"@keyframes":if(p=!1,t="@"+device.feat.keyframesPrefix+"keyframes "+h[1],this.descendant)for(var m in e.children)e.children[m].descendant=" ";break;case"@section":p=!1;var g=l.section.exec(t);g=g?g[1]:"section:error",n=n?n+" "+g:g,c=!0,i--;break;case"@media":p=!1,t=this._getVariable(t,n),t=this.eval(t),u=!0;break;case"@class":p=!0,t=l.classes.exec(t);for(var v=t[1],y=t[2],b={},w=y.split(/[\s]?\,[\s]?/),m=0,x=w.length;m<x;m++)b[w[m]]=m;this.data.children["@"+v]={args:b,attr:e.attributes},"frameworks"==this.id&&(r[v]=this.data.children["@"+v]);break;case"@global":if(p=!0,0==i){f=e.attributes;for(var S in f)a[S]=this._getVariable(f[S],n)}break;case"@var":if(p=!0,0==i||n){f=e.attributes;for(var S in f)n?(this.variable.children[n]||(this.variable.children[n]={}),this.variable.children[n][S]=f[S]):this.variable.attributes[S]=f[S]}break;case"@if":p=!1,c=!0,this.scope.getValueByRoute(l.factor.exec(t)[1])||delete e.children}if(0==p){h=t.split(","),t="";for(var m=0,x=h.length;m<x;m++){var g=h[m].trim();0==g.indexOf("this")&&(g=g.substr(4),d=!0),t+=(s||"")+("string"==typeof n&&0==u?n+(d?"":" "):"")+g+(m==x-1?"":", ")}o+=c?"":"\t".repeat(i)+t+" {\n",o+=this.toCSS(e,i+1,n,!1,t),o+=c?"":"\t".repeat(i)+"}\n"}return o}},e.exports=s});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/fetch",["~/promise"],function(t,e,i){var n=t("~/promise"),o=n.Promise,s=function t(){if(!(this instanceof t))return new t};s.prototype={uri:function(t,e,i,n,o){var s,r,a,h,l=this,c=App.modules[t],u=arguments;if(!c)return App.get(t,function(){l.uri.apply(this,u)});if("string"==typeof i?a=i:(a=i[0],i=i[1]),h=document.getElementById(t+"/"+n+"/"+i))return o.call(this,t,a,h.innerHTML||"","object"),void h.remove();if(s=c.resources,s=s?s[n]:null,s=s?s[i]:null,s||("frameworks"!==t?s="frameworks::"+i:App.console.error("resources."+n+"["+i+"]","Config error","is not definde")),"function"!=typeof s||(s=o.call(this,t,a,function(t){return s.call(c,e,t)},"function"),void 0!==s)){if("object"===(void 0===s?"undefined":_typeof(s)))return o.call(this,t,a,s,"object");if("string"==typeof s){if(s=s.trim(),s.indexOf("::")>0&&(s=s.split(/\:\:/),2===s.length))return this.uri(s[0],e,[i,s[1]],n,o);if(s=App.realpath(t,null,s),(0==s.indexOf("//")||s.indexOf("://")>0)&&(r=App.get(t).network=!0),s.indexOf("|@")>-1){var d=s.split(/\|\@/),p=d[0];s={url:p,remote:r,method:"GET",cache:0,param:{},headers:{},settings:{},storeage:sessionStorage};for(var f=1,m=d.length;f<m;f++){var g=/(\w+)\((.*)?\)/g.exec(d[f]),v=g[1],y=g[2];switch(v){case"param":case"headers":case"settings":y=y||"",y=0===y.indexOf("{")?y:"{"+y+"}",s[v]=s[v].extend(e.getValueByRoute(y)||{});break;case"cache":s.cache=y||60;break;case"storeage":s.cache=y||2592e6,s.storeage=localStorage,s.permanent=!0;break;case"origin":s.settings.origin=y;break;case"caller":s.settings.caller=y;break;case"method":s.method=y}}}else s={url:s,remote:r,method:"GET",cache:0,param:{},headers:{},settings:{},storeage:sessionStorage};return o.call(this,t,a,s,"url")}}},ajax:function(t,e,i,o,s,r,a,h){var l=this,c=App.get(t);if(s.remote)var u=Date.now();n.ajax(s.method,s.url,s.param,s.headers,s.settings,e,t).then(function(n,d,p){if(n)return App.trigger("sourceerror",{id:t,url:s.url,params:s.param}),l.error();if(a)try{r.setItem(a,"["+Date.now()+"]="+p.response),c.storagemaps.push(a)}catch(t){}"data"==e&&(d=l.filter(c,d,o)),h&&h.done(n,i,o,s.url,d),s.remote&&App.trigger("requestserver",{url:s.url,time:Date.now()-u})})},filter:function(t,e,i){var n=t.controller;return"function"==typeof n?n.call(t,e,i)||e:"function"==typeof n[i]?n[i].call(t,e)||e:e},async:function(t,e,i,s,r){var a=this,h=[],l=App.get(t);for(var c in i)h.push(function(){var n=new o;return this.uri(t,e,i[c],s,function(e,i,o,r){switch(r){case"object":"data"==s&&(o=a.filter(l,o,i)),n.done(null,e,i,null,o);break;case"function":var h=function(t){n.done(null,e,i,o,t)},c=o(h);if("data"==s&&(c=a.filter(l,c,i)),"object"!==(void 0===c?"undefined":_typeof(c))&&!1!==c)return c;h(c);break;case"url":var u,d,p,f=o.storeage,m=!!o.cache&&o.url+"$"+JSON.stringify(o.param);try{u=!!m&&f.getItem(m)}catch(t){}if(u&&(d=/\[(\d+)\]\=/.exec(u)||[0,0],p=d[1],u=p?App._EXISTS&&Date.now()-p>1e3*o.cache?null:u.substr(d[0].length):null),u){if("data"===s){if("string"==typeof u)try{u=JSON.parse(u)}catch(t){try{u=App.sandbox.window.eval("("+u+")")}catch(t){u=null}App.console["object"===(void 0===u?"undefined":_typeof(u))?"Warning":"error"]("url["+o.url+"]","SyntaxError","Unexpected token in JSON")}u=u?a.filter(l,u,i):null}if(!1===App._EXISTS&&o.permanent&&Date.now()-p>1e3*l.config.timeout&&(l.timeout=!0),u){n.done(null,e,i,o.url,u),setTimeout(function(){a.ajax(t,s,e,i,o,f,m)},2e3),App.console.info("Data ["+i+"]","From cache",e);break}}a.ajax(t,s,e,i,o,f,m,n)}}),n}.call(this));n.join(h).then(function(t){for(var e=[],i=[],n=[],o=0,a=t.length;o<a;o++){var h=t[o],l=h[1],c=h[2],u=h[3],d=h[4];e[c]=l,i[c]=u,n[c]=d}r.done(null,e,i,n,s)})},source:function(t,e,i,n){var s=new o;return i[n]&&i[n].length?this.async(t,e,i[n],n,s):s.done(null,t,null,{},n),s},get:function(t,e,i,o,s){this.error=s||noop,n.join([this.source(t,i,e,"data"),this.source(t,i,e,"style"),this.source(t,i,e,"source")]).then(function(t){for(var e=[],i=[],n=[],s=0,r=t.length;s<r;s++){var a=t[s],h=a[4];e[h]=a[1]||{},i[h]=a[2]||{},n[h]=a[3]||{}}o(e,i,n)})},fetch:function(){this.sessioncache=!1,this.get.apply(this,arguments)},prefetch:function(){this.sessioncache=!0,this.get.apply(this,arguments)}},e.exports=s}),define("~/loader",[],function(t,e,i){e.exports=function(t){var e,i=function(t,e){void 0===e&&(e={}),this.init(t,e)},n=i.prototype,o=["canvas","vml"],s=["oval","spiral","square","rect","roundRect"],r=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,a=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1]),h=!!document.createElement("canvas").getContext,l=!0,c=function(t,e,i){var n,o=document.createElement(t);for(n in i)o[n]=i[n];return void 0!==e&&e.appendChild(o),o},u=function(t,e){for(var i in e)t.style[i]=e[i];return t},d=function(t,e){for(var i in e)t.setAttribute(i,e[i]);return t},p=function(t,e,i,n){t.save(),t.translate(e,i),t.rotate(n),t.translate(-e,-i),t.beginPath()};return n.init=function(t,n){"boolean"==typeof n.safeVML&&(l=n.safeVML);try{void 0!==document.getElementById(t)?this.mum=document.getElementById(t):this.mum=document.body}catch(t){this.mum=document.body}if(this.mum=t,this.cont=c("loader",this.mum),h)e=o[0],this.can=c("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=u(c("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(e=o[1],void 0===i.vmlSheet){document.getElementsByTagName("head")[0].appendChild(c("style")),i.vmlSheet=document.styleSheets[document.styleSheets.length-1];for(var s,r=["group","oval","roundrect","fill"],s=0;s<r.length;++s)i.vmlSheet.addRule(r[s],"behavior:url(#default#VML); position:absolute;")}this.vml=c("group",this.cont)}this.setColor(this.color),this.draw(),u(this.cont,{display:"none"})},n.cont={},n.can={},n.con={},n.cCan={},n.cCon={},n.timer={},n.activeId=0,n.diameter=40,n.setDiameter=function(t){this.diameter=Math.round(Math.abs(t)),this.redraw()},n.getDiameter=function(){return this.diameter},n.cRGB={},n.color="#000000",n.setColor=function(t){this.color=r.test(t)?t:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},n.getColor=function(){return this.color},n.shape=s[0],n.setShape=function(t){var e;for(e in s)if(t===s[e]){this.shape=t,this.redraw();break}},n.getShape=function(){return this.shape},n.density=40,n.setDensity=function(t){this.density=l&&e===o[1]?Math.round(Math.abs(t))<=40?Math.round(Math.abs(t)):40:Math.round(Math.abs(t)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},n.getDensity=function(){return this.density},n.range=1.3,n.setRange=function(t){this.range=Math.abs(t),this.redraw()},n.getRange=function(){return this.range},n.speed=2,n.setSpeed=function(t){this.speed=Math.round(Math.abs(t))},n.getSpeed=function(){return this.speed},n.fps=24,n.setFPS=function(t){this.fps=Math.round(Math.abs(t)),this.reset()},n.getFPS=function(){return this.fps},n.getRGB=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},n.draw=function(){var t,i,n,r,h,l,f,m,g,v,y,b,w=0,x=this.density,S=Math.round(x*this.range),_=1e3,T=0,E=this.cCon,k=this.diameter,P=.47;if(e===o[0])for(E.clearRect(0,0,_,_),d(this.can,{width:k,height:k}),d(this.cCan,{width:k,height:k});w<x;){switch(g=w<=S?1-1/S*w:g=0,l=270-360/x*w,f=l/180*Math.PI,E.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+g.toString()+")",this.shape){case s[0]:case s[1]:t=.07*k,r=k*P+Math.cos(f)*(k*P-t)-k*P,h=k*P+Math.sin(f)*(k*P-t)-k*P,E.beginPath(),this.shape===s[1]?E.arc(.5*k+r,.5*k+h,t*g,0,2*Math.PI,!1):E.arc(.5*k+r,.5*k+h,t,0,2*Math.PI,!1);break;case s[2]:t=.12*k,r=Math.cos(f)*(k*P-t)+.5*k,h=Math.sin(f)*(k*P-t)+.5*k,p(E,r,h,f),E.fillRect(r,h-.5*t,t,t);break;case s[3]:case s[4]:i=.24*k,n=.36*i,r=Math.cos(f)*(n+.13*(k-n))+.5*k,h=Math.sin(f)*(n+.13*(k-n))+.5*k,p(E,r,h,f),this.shape===s[3]?E.fillRect(r,h-.5*n,i,n):(m=.55*n,E.moveTo(r+m,h-.5*n),E.lineTo(r+i-m,h-.5*n),E.quadraticCurveTo(r+i,h-.5*n,r+i,h-.5*n+m),E.lineTo(r+i,h-.5*n+n-m),E.quadraticCurveTo(r+i,h-.5*n+n,r+i-m,h-.5*n+n),E.lineTo(r+m,h-.5*n+n),E.quadraticCurveTo(r,h-.5*n+n,r,h-.5*n+n-m),E.lineTo(r,h-.5*n+m),E.quadraticCurveTo(r,h-.5*n,r+m,h-.5*n))}E.closePath(),E.fill(),E.restore(),++w}else{switch(u(this.cont,{width:k,height:k}),u(this.vml,{width:k,height:k}),this.shape){case s[0]:case s[1]:b="oval",t=140;break;case s[2]:b="roundrect",t=120;break;case s[3]:case s[4]:b="roundrect",t=300}for(i=n=t,r=500-n,h=.5*-n;w<x;){switch(g=w<=S?1-1/S*w:g=0,l=270-360/x*w,this.shape){case s[1]:i=n=t*g,r=500-.5*t-t*g*.5,h=.5*(t-t*g);break;case s[0]:case s[2]:a&&(h=0,this.shape===s[2]&&(r=500-.5*n));break;case s[3]:case s[4]:i=.95*t,n=.28*i,a?(r=0,h=500-.5*n):(r=500-i,h=.5*-n),T=this.shape===s[4]?.6:0}y=d(u(c("group",this.vml),{width:_,height:_,rotation:l}),{coordsize:_+","+_,coordorigin:"-500,-500"}),v=u(c(b,y,{stroked:!1,arcSize:T}),{width:i,height:n,top:h,left:r}),c("fill",v,{color:this.color,opacity:g}),++w}}this.tick(!0)},n.clean=function(){if(e===o[0])this.con.clearRect(0,0,1e3,1e3);else{var t=this.vml;if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)}},n.redraw=function(){this.clean(),this.draw()},n.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},n.tick=function(t){var i=this.con,n=this.diameter;t||(this.activeId+=360/this.density*this.speed),e===o[0]?(i.clearRect(0,0,n,n),p(i,.5*n,.5*n,this.activeId/180*Math.PI),i.drawImage(this.cCan,0,0,n,n),i.restore()):(this.activeId>=360&&(this.activeId-=360),u(this.vml,{rotation:this.activeId}))},n.show=function(){if("number"!=typeof this.timer){var t=this;this.timer=self.setInterval(function(){t.tick()},Math.round(1e3/this.fps)),u(this.cont,{display:"block"})}},n.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,u(this.cont,{display:"none"}))},n.kill=function(){var t=this.cont;"number"==typeof this.timer&&this.hide(),e===o[0]?(t.removeChild(this.can),t.removeChild(this.cCan)):t.removeChild(this.vml);var i;for(i in this)delete this[i]},i}(window)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/sandbox",[],function(t,e,i){function n(t,e,i){var n;this.sandbox=this.iframe=n=document.createElement("iframe"),i||(n.style.display="none",document.head.appendChild(n),this.init())}n.prototype={init:function(){var t=this.sandbox.contentDocument;return t.open(),t.write(""),t.close(),this.window=this.sandbox.contentWindow.window,this.document=this.sandbox.contentWindow.document,this},extend:function(t){return __defineUnify__(this.window),t||__defineProto__(this.window),this},open:function(){return this.sandbox.contentDocument.open(),this},write:function(t,e){var i;return i=t||e?"<!DOCTYPE html><html><head>"+(t||"")+(e||"")+"</head><body></body></html>":'<head><meta charset="utf-8"></head>',this.sandbox.contentDocument.write(i),this},close:function(){this.sandbox.contentDocument.close()},exit:function(){document.head.removeChild(this.sandbox)},load:function(t,e){t="object"==(void 0===t?"undefined":_typeof(t))?t:[t];for(var i="",n=t.length-1;n>=0;n--)i+="<object data="+t[n]+"</object>";this.sandboxWindow.open(),this.sandboxWindow.write(i),this.sandboxWindow.close(),this.sandboxWindow.onload=function(){e()}}};var o=new n,s=o.window,r=s.Function;o.extend(!0),o.exit();var a=new n,h=a.window,l=h.Function;a.extend(!0),e.exports={sandbox:n,sandboxWindow:s,SandboxFunction:r,shadowRootWindow:h,ShadowRootFunction:l}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/promise",["~/sandbox"],function(t,e,i){function n(){this._callbacks=[]}function o(t){var e=new n,i=[];if(!t||!t.length)return e.done(i),e;for(var o=0,s=t.length,r=0;r<s;r++)t[r].then(function(t){return function(){o+=1,i[t]=Array.prototype.slice.call(arguments),o===s&&e.done(i)}}(r));return e}function s(t,e){var i=new n;return 0===t.length?i.done.apply(i,e):t[0].apply(null,e).then(function(){t.splice(0,1),s(t,arguments).then(function(){i.done.apply(i,arguments)})}),i}function r(){var t=new XMLHttpRequest;return"withCredentials"in t||(t="undefined"!=typeof XDomainRequest?new XDomainRequest:null),t}function a(t,e,i,o,s,a,h){function u(){m.open(t,e,!0),(0==e.indexOf("//")||e.indexOf("://")>0)&&([window.location.host].concat(App.config.origin||[]).each(function(t,i){-1!==(t=e.indexOf(i))&&t<=16&&(w=!1)}),w&&"true"!==s.origin&&(m.withCredentials=!0)),s.contentType&&(o["Content-Type"]=s.contentType);var i="application/x-www-form-urlencoded";for(var n in o)o.hasOwnProperty(n)&&("content-type"===n.toLowerCase()?i=o[n]:m.setRequestHeader(n,o[n]));m.setRequestHeader("Content-type",i)}function d(){x&&clearTimeout(S),m.abort()}function p(){u(),m.send(b)}function f(){d(),0==c(e,d,p,h)&&g.done(!0,{},{})}if("JSONP"===t.toUpperCase||/=\~/.test(e))return l(e,i,s.caller,a,h);var m,g=new n;s=s||{},o=o||{},i=i||{};var b=Object.objectToParams(i),w=!0;"GET"===t&&b&&(e+=(-1!=e.indexOf("?")?"&":"?")+b,b=null);try{m=r(t,e)}catch(t){return g.done(y.ENOXHR,""),g}var x=y.ajaxTimeout;if(x)var S=setTimeout(f,x);return m.onerror=f,m.onload=function(){if(x&&clearTimeout(S),4===m.readyState){var t=!m.status||(m.status<200||m.status>=300)&&304!==m.status;delete v[e];var i=m.responseText;if(["{","["].consistOf(i.charAt(0)))try{i=JSON.parse(i)}catch(t){try{i=application.sandbox.window.eval("("+i+")")}catch(t){}}g.done(t,i,m)}},p(),g}function h(t){return function(e,i,n,o,s,r){return a(t,e,i,n,o,s,r)}}function l(t,e,i,o,s){function r(){w&&clearTimeout(x);try{m.removeChild(d)}catch(t){}}function a(){d=f.createElement("script"),d.charset="utf-8",d.src=t,d.onerror=h,m.appendChild(d)}function h(){r(),0==c(t,r,a,s)&&l.done(!0,{},{})}var l=new n,u=i?"__call__"+ ++g:"__"+o+"__"+i,d=f.createElement("script"),e=e||{};i&&(e[i]=u);var b=Object.objectToParams(e);b&&(t+=(-1!=t.indexOf("?")?"&":"?")+b,b=null),t=t.replace(/=\~/,"="+u),p.onerror=function(t){h(),application.trigger("jsonerror",t)};var w=y.ajaxTimeout;if(w)var x=setTimeout(h,w);return p[u]=function(e,i){r(),("data"!=i&&"js"!=i||"object"===(void 0===e?"undefined":_typeof(e)))&&(delete p[u],delete v[t],l.done(null,e,{}))},a(),l}function c(t,e,i,n){function o(){e(),setTimeout(function(){i()},1e3),v[t]||window.removeEventListener("online",o,!1)}var s=v[t]||1,r=App.modules[n];return r&&r.trigger("failedtoload",{id:n,url:t,again:s}),!(s&&s>=y.TRYAGAIN)&&(s++,v[t]=s,!1===navigator.onLine?window.addEventListener("online",o,!1):setTimeout(function(){i()},3e3),s)}n.prototype.then=function(t,e){var i;return this._isdone?i=t.apply(e,this.result):(i=new n,this._callbacks.push(function(){var n=t.apply(e,arguments);n&&"function"==typeof n.then&&n.then(i.done,i)})),i},n.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var t=0;t<this._callbacks.length;t++)this._callbacks[t].apply(null,arguments);this._callbacks=[]};var u=t("~/sandbox").sandbox,d=new u(!0),p=d.window,f=d.document,m=f.head,g=0,v=[];p.define=function(t,e,i){p["__"+t+"__"+e](i,t)},p.style=function(t,e){p["__style__"+t](e,"style")},p.source=function(t,e){p["__source__"+t](e,"source")},p.data=function(t,e){p["__data__"+t](e,"source")};var y={Promise:n,join:o,chain:s,ajax:a,origin:l,get:h("GET"),post:h("POST"),put:h("PUT"),del:h("DELETE"),ENOXHR:1,ETIMEOUT:2,TRYAGAIN:3,ajaxTimeout:6e4};e.exports=y});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/query",[],function(t,e,i){e.exports=function(t){function e(t,e,i){var n=w.createDocumentFragment();if(i){for(var o=t.length-1;o>=0;o--)n.insertBefore(t[o],n.firstChild);e.insertBefore(n,e.firstChild)}else{for(var s=0;s<t.length;s++)n.appendChild(t[s]);e.appendChild(n)}n=null}function i(t){return t in _?_[t]:_[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function n(t){for(var e=0;e<t.length;e++)t.indexOf(t[e])!=e&&(t.splice(e,1),e--);return t}function o(t,e){var i=[];if(void 0==t)return i;for(;t;t=t.nextSibling)1==t.nodeType&&t!==e&&i.push(t);return i}function s(t,e){try{return e.querySelectorAll(t)}catch(t){return[]}}function r(t,e){if(t=t.trim(),"#"===t[0]&&-1==t.indexOf(".")&&-1==t.indexOf(",")&&-1===t.indexOf(" ")&&-1===t.indexOf(">"))e==w?a(e.getElementById(t.replace("#","")),this):a(s(t,e),this);else if("<"===t[0]&&">"===t[t.length-1]||-1!==t.indexOf("<")&&-1!==t.indexOf(">")){var i=w.createElement("div");i.innerHTML=t.trim(),a(i.childNodes,this)}else a(s(t,e),this);return this}function a(t,e){if(t){if(t.nodeType)return void(e[e.length++]=t);for(var i=0,n=t.length;i<n;i++)e[e.length++]=t[i]}}function h(t){return t._afmid||(t._afmid=D++)}function l(t,e,i,n){if(e=c(e),e.ns)var o=u(e.ns);return(C[h(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||o.test(t.ns))&&(!i||t.fn==i||"function"==typeof t.fn&&"function"==typeof i&&t.fn===i)&&(!n||t.sel==n)})}function c(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function u(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function d(t,e,i){t="string"==typeof t?t.split(/\s/):t,t.each(function(t,n){switch(n){case"transitionstart":this.push("webkitTransitionStart"),this.push("oTransitionStart"),this.push("MSTransitionStart"),this.push("animationstart"),this.push("webkitAnimationStart"),this.push("oAnimationStart"),this.push("MSAnimationStart");break;case"transitionend":this.push("webkitTransitionEnd"),this.push("oTransitionEnd"),this.push("MSTransitionEnd"),this.push("animationend"),this.push("webkitAnimationEnd"),this.push("oAnimationEnd"),this.push("MSAnimationEnd")}i(n,e)})}function p(t,e,i,n,o){var s=h(t),r=C[s]||(C[s]=[]);d(e,i,function(e,i){var s=o&&o(i,e),a=s||i,h=function(e){var i=a.apply(t,[e].concat(e.data));return!1===i&&e.preventDefault(),i},l={}.extend(c(e),{fn:i,proxy:h,sel:n,del:s,i:r.length});r.push(l),t.addEventListener(l.e,h,!1)})}function f(t,e,i,n){var o=h(t);d(e||"",i,function(e,i){l(t,e,i,n).forEach(function(e){delete C[o][e.i],t.removeEventListener(e.e,e.proxy,!1)})})}function m(t){var e={}.extend({originalEvent:t},t);return R.each(function(i,n){e[i]=function(){if(this[n]=I,"stopImmediatePropagation"!=i&&"stopPropagation"!=i||(t.cancelBubble=!0,t[i]))return t[i].apply(t,arguments)},e[n]=M}),e}function g(t,e,i,n){p(t,e,i,n,function(e){return function(i){var o,s=A(i.target).closest(n,t).get(0);if(s)return o={}.extend(m(i),{currentTarget:s,liveFired:t}),e.apply(s,[o].concat([].slice.call(arguments,1)))}})}function v(t,e){if(e&&t.dispatchEvent){var i=A.Event("destroy",{bubbles:!1});t.dispatchEvent(i)}var n=h(t);if(n&&C[n]){for(var o in C[n])t.removeEventListener(C[n][o].e,C[n][o].proxy,!1);delete C[n]}}function y(t,e){if(t){var i=t.childNodes;if(i&&i.length>0)for(var n;n<i.length;n++)y(i[n],e);v(t,e)}}var b=t.getComputedStyle,w=t.document,x=[],S=x.slice,_={},T={},E={},k=/<(\w+)[^>]*>/,P=/^(?:body|html)$/i,A=function(t,e){return new O(t,e)},O=function t(e,i){if(this.length=0,!e)return this;if((e instanceof t||"$query"===e.constructor.name)&&void 0==i)return e;if(A.isFunction(e))return A(w).ready(e);if(A.isArray(e)&&void 0!=e.length){for(var n=0;n<e.length;n++)this[this.length++]=e[n];return this}if(A.isObject(e)&&A.isObject(i)){if(void 0==e.length)e.parentNode==i&&(this[this.length++]=e);else for(var o=0;o<e.length;o++)e[o].parentNode==i&&(this[this.length++]=e[o]);return this}if(A.isObject(e)&&void 0==i)return this[this.length++]=e,this;if(void 0!==i){if(i instanceof t)return i.find(e)}else i=w;return this.selector(e,i)};A.is$$=function(t){return t instanceof O},A.map=function(t,e){var i,n,o,s=[];if(A.isArray(t))for(n=0;n<t.length;n++)void 0!==(i=e.apply(t[n],[n,t[n]]))&&s.push(i);else if(A.isObject(t))for(o in t)t.hasOwnProperty(o)&&"length"!=o&&void 0!==(i=e(t[o],[o,t[o]]))&&s.push(i);return A(s)},A.isArray=function(t){return t instanceof Array&&void 0!=t.push},A.isFunction=function(t){return"function"==typeof t&&!(t instanceof RegExp)},A.isWindow=function(t){return null!=t&&t==t.window},A.isObject=function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t},A.isPlainObject=function(t){return A.isObject(t)&&!A.isWindow(t)&&Object.getPrototypeOf(t)==Object.prototype},A.isEmptyObject=function(t){var e
;for(e in t)return!1;return!0},A.fn=O.prototype={constructor:O,forEach:x.forEach,reduce:x.reduce,push:x.push,indexOf:x.indexOf,concat:x.concat,selector:r,oldElement:void 0,slice:x.slice,length:0,_setupOld:function(t){return void 0==t?A():(t.oldElement=this,t)},map:function(t){var e,i,n=[];for(i=0;i<this.length;i++)void 0!==(e=t.apply(this[i],[i,this[i]]))&&n.push(e);return A(n)},each:function(t){return this.forEach(function(e,i){t.call(e,i,e)}),this},ready:function(t){var e=this[0];return"complete"===e.readyState||"loaded"===e.readyState||"interactive"===e.readyState?t():e.addEventListener("DOMContentLoaded",t,!1),this},find:function(t){if(0===this.length)return this;for(var e,i=[],o=0;o<this.length;o++){e=A(t,this[o]);for(var s=0;s<e.length;s++)i.push(e[s])}return A(n(i))},html:function(t,e){if(0===this.length)return this;if(void 0===t)return this[0].innerHTML;for(var i=0;i<this.length;i++)!1!==e&&A.cleanUpContent(this[i],!1,!0),this[i].innerHTML=t;return this},text:function(t){if(0===this.length)return this;if(void 0===t)return this[0].textContent;for(var e=0;e<this.length;e++)this[e].textContent=t;return this},css:function(t,e,i){var n=void 0!=i?i:this[0];if(0===this.length)return this;if(void 0==e&&"string"==typeof t)return n.style[t]?n.style[t]:b(n)[t];for(var o=0;o<this.length;o++)if(A.isObject(t))for(var s in t)this[o].style.set(s,t[s]);else this[o].style.set(t,e);return this},computedStyle:function(t){if(0!==this.length&&void 0!=t)return b(this[0],"")[t]},empty:function(){for(var t=0;t<this.length;t++)A.cleanUpContent(this[t],!1,!0),this[t].textContent="";return this},hide:function(){if(0===this.length)return this;for(var t=0;t<this.length;t++)"none"!=this.css("display",null,this[t])&&(this[t].setAttribute("afmOldStyle",this.css("display",null,this[t])),this[t].style.display="none");return this},show:function(){if(0===this.length)return this;for(var t=0;t<this.length;t++)"none"==this.css("display",null,this[t])&&(this[t].style.display=this[t].getAttribute("afmOldStyle")?this[t].getAttribute("afmOldStyle"):"block",this[t].removeAttribute("afmOldStyle"));return this},toggle:function(t){if(0===this.length)return this;for(var e=!(!0!==t),i=0;i<this.length;i++)"none"==this.css("display",null,this[i])||void 0!=t&&!1!==e?"none"!=this.css("display",null,this[i])||void 0!=t&&!0!==e||(this[i].style.display=this[i].getAttribute("afmOldStyle")?this[i].getAttribute("afmOldStyle"):"block",this[i].removeAttribute("afmOldStyle")):(this[i].setAttribute("afmOldStyle",this.css("display",null,this[i])),this[i].style.display="none");return this},val:function(t){if(0===this.length)return void 0===t?void 0:this;if(void 0==t)return this[0].value;for(var e=0;e<this.length;e++)this[e].value=t;return this},attr:function(t,e){if(0===this.length)return void 0===e?void 0:this;if(void 0===e&&!A.isObject(t)){return this[0].afmCacheId&&T[this[0].afmCacheId][t]?this[0].afmCacheId&&T[this[0].afmCacheId][t]:this[0].getAttribute(t)}for(var i=0;i<this.length;i++)if(A.isObject(t))for(var n in t)A(this[i]).attr(n,t[n]);else A.isArray(e)||A.isObject(e)||A.isFunction(e)?(this[i].afmCacheId||(this[i].afmCacheId=A.uuid()),T[this[i].afmCacheId]||(T[this[i].afmCacheId]={}),T[this[i].afmCacheId][t]=e):null===e?(this[i].removeAttribute(t),this[i].afmCacheId&&T[this[i].afmCacheId][t]&&delete T[this[i].afmCacheId][t]):this[i].setAttribute(t,e);return this},removeAttr:function(t){for(var e=this,i=0;i<this.length;i++)t.split(/\s+/g).forEach(function(n){e[i].removeAttribute(n),e[i].afmCacheId&&T[e[i].afmCacheId][t]&&delete T[e[i].afmCacheId][t]});return this},prop:function(t,e){if(0===this.length)return void 0===e?void 0:this;if(void 0===e&&!A.isObject(t)){var i;return this[0].afmCacheId&&E[this[0].afmCacheId][t]?this[0].afmCacheId&&E[this[0].afmCacheId][t]:!(i=this[0][t])&&t in this[0]?this[0][t]:i}for(var n=0;n<this.length;n++)if(A.isObject(t))for(var o in t)A(this[n]).prop(o,t[o]);else A.isArray(e)||A.isObject(e)||A.isFunction(e)?(this[n].afmCacheId||(this[n].afmCacheId=A.uuid()),E[this[n].afmCacheId]||(E[this[n].afmCacheId]={}),E[this[n].afmCacheId][t]=e):null===e&&void 0!==e?A(this[n]).removeProp(t):this[n][t]=e;return this},removeProp:function(t){for(var e=this,i=0;i<this.length;i++)t.split(/\s+/g).forEach(function(n){e[i][n]&&(e[i][n]=void 0),e[i].afmCacheId&&E[e[i].afmCacheId][t]&&delete E[e[i].afmCacheId][t]});return this},remove:function(t){var e=A(this).filter(t);if(void 0==e)return this;for(var i=0;i<e.length;i++)A.cleanUpContent(e[i],!0,!0),e[i]&&e[i].parentNode&&e[i].parentNode.removeChild(e[i]);return this},addClass:function(t){if(void 0==t)return this;for(var e=0;e<this.length;e++){var i=this[e].className,n=[],o=this;t.split(/\s+/g).forEach(function(t){o.hasClass(t,o[e])||n.push(t)}),this[e].className+=(i?" ":"")+n.join(" "),this[e].className=this[e].className.trim()}return this},removeClass:function(t){if(void 0==t)return this;for(var e=0;e<this.length;e++){if(void 0==t)return this[e].className="",this;var n=this[e].className;"object"==_typeof(this[e].className)&&(n=" "),t.split(/\s+/g).forEach(function(t){n=n.replace(i(t)," ")}),n.length>0?this[e].className=n.trim():this[e].className=""}return this},toggleClass:function(t,e){if(void 0==t)return this;for(var i=0;i<this.length;i++)"boolean"!=typeof e&&(e=this.hasClass(t,this[i])),A(this[i])[e?"removeClass":"addClass"](t);return this},replaceClass:function(t,e){if(void 0==t||void 0==e)return this;for(var n=0;n<this.length;n++)if(void 0!=t){var o=this[n].className;t.split(/\s+/g).concat(e.split(/\s+/g)).forEach(function(t){o=o.replace(i(t)," ")}),o=o.trim(),o.length>0?this[n].className=(o+" "+e).trim():this[n].className=e}else this[n].className=e;return this},hasClass:function(t,e){return 0!==this.length&&(e||(e=this[0]),i(t).test(e.className))},append:function(i,n){if(i&&void 0!=i.length&&0===i.length)return this;(A.isArray(i)||A.isObject(i))&&(i=A(i));var o;for(o=0;o<this.length;o++)if(i.length&&"string"!=typeof i)i=A(i),e(i,this[o],n);else{var s=k.test(i)?A(i):void 0;void 0!=s&&0!==s.length||(s=w.createTextNode(i)),void 0==s.nodeName||"script"!=s.nodeName.toLowerCase()||s.type&&"text/javascript"!==s.type.toLowerCase()?s instanceof O?e(s,this[o],n):void 0!=n?this[o].insertBefore(s,this[o].firstChild):this[o].appendChild(s):t.eval(s.innerHTML)}return this},appendTo:function(t,e){return A(t).append(this),this},prependTo:function(t){return A(t).append(this,!0),this},prepend:function(t){return this.append(t,1)},before:function(t,e){if(0===this.length)return this;if(!t)return this;t=A(t);for(var i=0;i<t.length;i++)e?this[0].parentNode.insertBefore(t[i],this[0].nextSibling):this[0].parentNode.insertBefore(t[i],this[0]);return this},after:function(t){this.before(t,!0)},get:function(t){return t=void 0==t?0:t,t<0&&(t+=this.length),this[t]?this[t]:void 0},position:function(){if(!this.length)return this;var t=this[0],e=this.offsetParent(),i=this.offset(),n=P.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(A(t).css("margin-top"))||0,i.left-=parseFloat(A(t).css("margin-left"))||0,n.top+=parseFloat(A(e[0]).css("border-top-width"))||0,n.left+=parseFloat(A(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||w.body;t&&!P.test(t.nodeName)&&"static"==A(t).css("position");)t=t.offsetParent;return t})},offset:function(){var e;return 0===this.length?this:this[0]==t?{left:0,top:0,right:0,bottom:0,width:t.innerWidth,height:t.innerHeight}:(e=this[0].getBoundingClientRect(),{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,right:e.right+t.pageXOffset,bottom:e.bottom+t.pageYOffset,width:e.right-e.left,height:e.bottom-e.top})},height:function(e){if(0===this.length)return this;if(void 0!=e)return this.css("height",e);if(this[0]==this[0].window)return t.innerHeight;if(this[0].nodeType==this[0].DOCUMENT_NODE)return this[0].documentElement.offsetheight;var i=this.css("height").replace("px","");return i||this.offset().height},width:function(e){if(0===this.length)return this;if(void 0!=e)return this.css("width",e);if(this[0]==this[0].window)return t.innerWidth;if(this[0].nodeType==this[0].DOCUMENT_NODE)return this[0].documentElement.offsetwidth;var i=this.css("width").replace("px","");return i||this.offset().width},parent:function(t,e){if(0===this.length)return this;for(var i=[],o=0;o<this.length;o++)for(var s=this[o];s.parentNode&&s.parentNode!=w&&(i.push(s.parentNode),s.parentNode&&(s=s.parentNode),e););return this._setupOld(A(n(i)).filter(t))},parents:function(t){return this.parent(t,!0)},childrens:function(t){if(0===this.length)return this;for(var e=[],i=0;i<this.length;i++)e=e.concat(o(this[i].firstChild));return this._setupOld(A(e).filter(t))},siblings:function(t){if(0===this.length)return this;for(var e=[],i=0;i<this.length;i++)this[i].parentNode&&(e=e.concat(o(this[i].parentNode.firstChild,this[i])));return this._setupOld(A(e).filter(t))},closest:function(t,e){if(0===this.length)return this;var i=this[0],n=A(t,e);if(0===n.length)return A();for(;i&&-1==n.indexOf(i);)i=i!==e&&i!==w&&i.parentNode;return this.native?A(i)[0]:A(i)},filter:function(t){if(0===this.length)return this;if(void 0==t)return this;for(var e=[],i=0;i<this.length;i++){var o=this[i];o.parentNode&&A(t,o.parentNode).indexOf(o)>=0&&e.push(o)}return this._setupOld(A(n(e)))},not:function(t){if(0===this.length)return this;for(var e=[],i=0;i<this.length;i++){var o=this[i];o.parentNode&&-1==A(t,o.parentNode).indexOf(o)&&e.push(o)}return this._setupOld(A(n(e)))},data:function(t,e){return this.attr("data-"+t,e)},end:function(){return void 0!=this.oldElement?this.oldElement:A()},clone:function(t){if(t=!1!==t,0===this.length)return this;for(var e=[],i=0;i<this.length;i++)e.push(this[i].cloneNode(t));return A(e)},size:function(){return this.length},serialize:function(){if(0===this.length)return"";for(var t=[],e=0;e<this.length;e++)this.slice.call(this[e].elements).forEach(function(e){var i=e.getAttribute("type");if("fieldset"!=e.nodeName.toLowerCase()&&!e.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||e.checked)&&e.getAttribute("name"))if("select-multiple"==e.type)for(var n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.getAttribute("name")+"="+encodeURIComponent(e.options[n].value));else t.push(e.getAttribute("name")+"="+encodeURIComponent(e.value))});return t.join("&")},eq:function(t){return A(this.get(t))},index:function(t){return t?this.indexOf(A(t)[0]):this.parent().children().indexOf(this[0])},is:function(t){return!!t&&this.filter(t).length>0},toArray:function(){for(var t=[],e=0,i=this.length;e<i;e++)t.push(this[e]);return t}},A.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")},A.uuid=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},A.getCssMatrix=function(e){A.is$(e)&&(e=e.get(0));var i=t.WebKitCSSMatrix||t.MSCSSMatrix||t.CSSMatrix;if(void 0===e)return i?new i:{a:0,b:0,c:0,d:0,e:0,f:0};var n=b(e),o=n.webkitTransform||n.transform||n[device.feat.cssPrefix+"Transform"];if(i)return new i(o);if(o){var s=o.replace(/[^0-9\-.,]/g,"").split(",");return{a:+s[0],b:+s[1],c:+s[2],d:+s[3],e:+s[4],f:+s[5]}}return{a:0,b:0,c:0,d:0,e:0,f:0}},A.create=function(t,e){var i,n=new O;if(e||"<"!==t[0]){e.html&&(e.innerHTML=e.html,delete e.html),i=w.createElement(t);for(var o in e)i[o]=e[o];n[n.length++]=i}else i=w.createElement("div"),i.innerHTML=t,a(i.childNodes,n);return n},A.query=function(t,e){return t?(e=e||w,(new O).selector(t,e)):new O};var C={},D=1;A.event={add:p,remove:f},A.fn.bind=function(t,e){for(var i=0;i<this.length;i++)p(this[i],t,e);return this},A.fn.unbind=function(t,e){for(var i=0;i<this.length;i++)f(this[i],t,e);return this},A.fn.one=function(t,e){return this.each(function(i,n){p(this,t,e,null,function(t,e){return function(){if(f(n,e,t),t){return t.apply(n,arguments)}}})})};var I=function(){return!0},M=function(){return!1},R={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};A.fn.delegate=function(t,e,i){for(var n=0;n<this.length;n++)g(this[n],e,i,t);return this},A.fn.undelegate=function(t,e,i){for(var n=0;n<this.length;n++)f(this[n],e,i,t);return this},A.fn.on=function(t,e,i){return void 0===e||A.isFunction(e)?this.bind(t,e):this.delegate(e,t,i)},A.fn.off=function(t,e,i){return void 0===e||A.isFunction(e)?this.unbind(t,e):this.undelegate(e,t,i)},A.fn.trigger=function(t,e,i){"string"==typeof t&&(t=A.Event(t,i)),t.data=e;for(var n=0;n<this.length;n++)this[n].dispatchEvent(t);return this},A.Event=function(t,e){var i=w.createEvent("Events"),n=!0;if(e)for(var o in e)"bubbles"==o?n=!!e[o]:i[o]=e[o];return i.initEvent(t,n,!0,null,null,null,null,null,null,null,null,null,null,null,null),i},A.bind=function(t,e,i){if(t){t.__events||(t.__events={}),A.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)t.__events[e[n]]||(t.__events[e[n]]=[]),t.__events[e[n]].push(i)}},A.trigger=function(t,e,i){if(t){var n=!0;if(!t.__events)return n;A.isArray(e)||(e=[e]),A.isArray(i)||(i=[]);for(var o=0;o<e.length;o++)if(t.__events[e[o]])for(var s=t.__events[e[o]].slice(0),r=0;r<s.length;r++)A.isFunction(s[r])&&!1===s[r].apply(t,i)&&(n=!1);return n}},A.unbind=function(t,e,i){if(t.__events){A.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)if(t.__events[e[n]])for(var o=t.__events[e[n]],s=0;s<o.length;s++)if(void 0==i&&delete o[s],o[s]==i){o.splice(s,1);break}}},A.proxy=function(t,e,i){return function(){return i?t.apply(e,i):t.apply(e,arguments)}};var L=function(t,e){for(var i=0;i<t.length;i++)y(t[i],e)};A.cleanUpContent=function(t,e,i){if(t){var n=t.childNodes;n&&n.length>0&&A.asap(L,{},[S.apply(n,[0]),i]),e&&v(t,i)}};var Y=[],X=[],N=[];return A.asap=function(e,i,n){if(!A.isFunction(e))throw"$.asap - argument is not a valid function";Y.push(e),X.push(i||{}),N.push(n||[]),t.postMessage("afm-asap","*")},t.addEventListener("message",function(e){e.source==t&&"afm-asap"==e.data&&(e.stopPropagation(),Y.length>0&&Y.shift().apply(X.shift(),N.shift()))},!0),["click","keydown","keyup","keypress","submit","load","resize","change","select","error"].forEach(function(t){A.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){A.fn[t]=function(e){if(0!==this.length){if(e)this.bind(t,e);else for(var i=0;i<this.length;i++)try{this[i][t]()}catch(t){}return this}}}),A}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/move",[],function(t,e,i){function n(t){if(!(this instanceof n))return new n(t);"string"==typeof t&&(t=$$(t)[0]),t&&(this.el=t,this._events={},this._props={},this._rotate=0,this._transitionProps=[],this._transforms={},this.duration(0))}var o=(device.feat.prefixStyle,requestAnimationFrame),s={in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0, 1, .5, 1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},r=device.feat.prefixStyle("transition"),a=window.getComputedStyle||window.currentStyle;n.ease=s,n.select=function(t){return"string"!=typeof t?t:$$(t)[0]};var h=n.prototype;h.on=function(t,e){var i=this;return t.split(" ").each(function(t,n){i._events.initial(n,[]).push(e)}),this},h.one=function(t,e){function i(){e.apply(this,arguments),this.off(t,i)}var n=this;return t.split(" ").each(function(t,e){n._events.initial(e,[]).push(i)}),this},h.off=function(t,e){var i=this;return t.split(" ").each(function(t,n){if(i._events[n]){var o=i._events[n].indexOf(e);o>-1&&i._events[n].splice(o,1)}}),this},h.trigger=function(t){var e=this,i=arguments,n=this._events[t];if(n)for(var o=n.length-1;o>=0;o--)n[o].apply(e,[].slice.call(i,1))},h._transitionend=function(t){if(0==this._duration||!r)return t();this.el.one("transitionend",t)},h.transform=function(t){var e=t.match(/\w+\b/);return this._transforms[e]=t,this},h._applyTransform=function(){var t=[];for(var e in this._transforms)t.push(this._transforms[e]);return t.length&&this.setProperty("transform",t.join(" ")),this},h.skew=function(t,e){return this.transform("skew("+t+"deg, "+(e||0)+"deg)")},h.skewX=function(t){return this.transform("skewX("+t+"deg)")},h.skewY=function(t){return this.transform("skewY("+t+"deg)")},h.translate=h.translate3d=h.to=function(t,e,i){return this.transform("translate3d("+(t?t+"px":0)+","+(e?e+"px":0)+","+(i?i+"px":0)+")"),this},h.translateX=h.x=function(t){return this.transform("translateX("+t+"px)")},h.translateY=h.y=function(t){return this.transform("translateY("+t+"px)")},h.translateZ=h.z=function(t){return this.transform("translateZ("+t+"px)")},h.scale=function(t,e){return this.transform("scale("+t+", "+(e||t)+")")},h.opacity=function(t){return this._props.opacity=t,this},h.scaleX=function(t){return this.transform("scaleX("+t+")")},h.matrix=function(t,e,i,n,o,s){return this.transform("matrix("+[t,e,i,n,o,s].join(",")+")")},h.scaleY=function(t){return this.transform("scaleY("+t+")")},h.rotate=function(t){return this.transform("rotate("+t+"deg)")},h.rotateX=function(t){return this.transform("rotateX("+t+"deg)")},h.rotateY=function(t){return this.transform("rotateY("+t+"deg)")},h.rotateZ=function(t){return this.transform("rotateZ("+t+"deg)")},h.rotate3d=function(t,e,i,n){return this.transform("rotate3d("+t+", "+e+","+i+","+n+"deg)")},h.perspective=function(t){return this.el.parentNode.style.set("transform-style","preserve-3d"),this.el.parentNode.style.set("perspective",t+"px"),this},h.ease=function(t){return t=s[t]||t||"ease",this.setProperty("transition-timing-function",t)},h.animate=function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setProperty("animation-"+i,e[i]);return this.setProperty("animation-name",t)},h.duration=function(t){return t=this._duration="string"==typeof t?1e3*parseFloat(t):t,this.setProperty("transition-duration",t+"ms")},h.delay=function(t){return t=this._delay="string"==typeof t?1e3*parseFloat(t):t,this.setProperty("transition-delay",t+"ms")},h.origin=function(t,e,i){return i=t,"object"===(void 0===t?"undefined":_typeof(t))&&(e=t[1]||0,t=t[0]||0),isNaN(t)||isNaN(e)?e&&(i=t+" "+e):i=t+"px "+e+"px",this.setProperty("transform-origin",i)},h.setProperty=function(t,e){return this._props[t]=void 0===e?"":e,this},h.width=function(t){return this._props.width=void 0===t?"":t+"px",this},h.height=function(t){return this._props.height=void 0===t?"":t+"px",this},h.style=function(t,e){return this._props[t]=void 0===e?"":e,this},h.add=function(t,e){if(a){var i=this;return this.on("start",function(){var n=parseInt(i.current(t),10);i.set(t,n+e+"px")})}},h.sub=function(t,e){if(a){var i=this;return this.on("start",function(){var n=parseInt(i.current(t),10);i.set(t,n-e+"px")})}},h.current=function(t){return a(this.el).getPropertyValue(t)},h.transition=function(t){return this._transitionProps.indexOf(t)||this._transitionProps.push(t),this},h.all=function(){return this._transitionAll=!0,this},h.applyProperties=function(t){var e=this;return t?o(function(){e.el.css(e._props),e._props={},t.call(e)}):(this.el.css(e._props),this._props={}),this},h.move=h.select=function(t){return this.el=n.select(t),this},h.then=function(t){if(t instanceof n)this.on("end",function(){t.end()});else{if("function"!=typeof t){var e=new n(this.el);return e._transforms=this._transforms.slice(0),this.then(e),e.parent=this,e}this.on("end",t)}return this},h.pop=function(){return this.parent},h.clear=function(){return this.el.style.set("transition-duration",""),this._transforms={},this},h.instant=function(t){this.trigger("start"),this.setProperty("transition-property",this._transitionAll?"all":this._transitionProps.join(", ")),this._applyTransform(),this.applyProperties(t)},h.end=function(t){var e=this;return this.instant(function(){e._transitionend(function(){t&&t.call(e),e.clear()})}),this},e.exports=n});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/touch",[],function(t,e,i){e.exports=function(t,e,i){function n(t,e,i){return setTimeout(l(t,i),e)}function o(t,e,i){return!!Array.isArray(t)&&(s(t,i[e],i),!0)}function s(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function r(t,e,n){for(var o=Object.keys(e),s=0;s<o.length;)(!n||n&&t[o[s]]===i)&&(t[o[s]]=e[o[s]]),s++;return t}function a(t,e){return r(t,e,!0)}function h(t,e,i){var n,o=e.prototype;n=t.prototype=Object.create(o),n.constructor=t,n._super=o,i&&r(n,i)}function l(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return(void 0===t?"undefined":_typeof(t))==ht?t.apply(e?e[0]||i:i,e):t}function u(t,e){return t===i?e:t}function d(t,e,i){s(g(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){s(g(e),function(e){t.removeEventListener(e,i,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function v(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,e,i){for(var n=[],o=[],s=0;s<t.length;){var r=e?t[s][e]:t[s];v(o,r)<0&&n.push(t[s]),o[s]=r,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var n,o,s=e[0].toUpperCase()+e.slice(1),r=0;r<rt.length;){if(n=rt[r],(o=n?n+s:e)in t)return o;r++}return i}function x(){return dt++}function S(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function _(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&i.handler(e)},this.init()}function T(t){var e=t.options.inputClass;return new(e||(mt?N:gt?z:ft?F:X))(t,E)}function E(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,s=e&yt&&n-o==0,r=e&(wt|xt)&&n-o==0;i.isFirst=!!s,i.isFinal=!!r,s&&(t.session={}),i.eventType=e,k(t,i),t.emit("Touch.input",i),t.recognize(i),t.session.prevInput=i}function k(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=O(e)),o>1&&!i.firstMultiple?i.firstMultiple=O(e):1===o&&(i.firstMultiple=!1);var s=i.firstInput,r=i.firstMultiple,a=r?r.center:s.center,h=e.center=C(n);e.timeStamp=ut(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=R(a,h),e.distance=M(a,h),P(i,e),e.offsetDirection=I(e.deltaX,e.deltaY),e.scale=r?Y(r.pointers,n):1,e.rotation=r?L(r.pointers,n):0,A(i,e);var l=t.element;f(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function P(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},s=t.prevInput||{};e.eventType!==yt&&s.eventType!==wt||(o=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}function A(t,e){var n,o,s,r,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=xt&&(h>vt||a.velocity===i)){var l=a.deltaX-e.deltaX,c=a.deltaY-e.deltaY,u=D(h,l,c);o=u.x,s=u.y,n=ct(u.x)>ct(u.y)?u.x:u.y,r=I(l,c),t.lastInterval=e}else n=a.velocity,o=a.velocityX,s=a.velocityY,r=a.direction;e.velocity=n,e.velocityX=o,e.velocityY=s,e.direction=r}function O(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:lt(t.pointers[i].clientX),clientY:lt(t.pointers[i].clientY)},i++;return{timeStamp:ut(),pointers:e,center:C(e),deltaX:t.deltaX,deltaY:t.deltaY}}function C(t){var e=t.length;if(1===e)return{x:lt(t[0].clientX),y:lt(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:lt(i/e),y:lt(n/e)}}function D(t,e,i){return{x:e/t||0,y:i/t||0}}function I(t,e){return t===e?St:ct(t)>=ct(e)?t>0?_t:Tt:e>0?Et:kt}function M(t,e,i){i||(i=Ct);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function R(t,e,i){i||(i=Ct);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function L(t,e){return R(e[1],e[0],Dt)-R(t[1],t[0],Dt)}function Y(t,e){return M(e[0],e[1],Dt)/M(t[0],t[1],Dt)}function X(){this.evEl=Mt,this.evWin=Rt,this.allow=!0,this.pressed=!1,_.apply(this,arguments)}function N(){this.evEl=Xt,this.evWin=Nt,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function z(){this.evTarget=Bt,this.targetIds={},_.apply(this,arguments)}function B(t,e){var i=y(t.touches),n=this.targetIds;if(e&(yt|bt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,s=y(t.targetTouches),r=y(t.changedTouches),a=[];if(e===yt)for(o=0;o<s.length;)n[s[o].identifier]=!0,o++;for(o=0;o<r.length;)n[r[o].identifier]&&a.push(r[o]),e&(wt|xt)&&delete n[r[o].identifier],o++;return a.length?[b(s.concat(a),"identifier",!0),a]:void 0}function F(){_.apply(this,arguments);var t=l(this.handler,this);this.touch=new z(this.manager,t),this.mouse=new X(this.manager,t)}function H(t,e){this.manager=t,this.set(e)}function W(t){if(m(t,jt))return jt;var e=m(t,Ut),i=m(t,qt);return e&&i?Ut+" "+qt:e||i?e?Ut:qt:m(t,Vt)?Vt:Wt}function V(t){this.id=x(),this.manager=null,this.options=a(t||{},this.defaults),this.options.enable=u(this.options.enable,!0),this.state=Kt,this.simultaneous={},this.requireFail=[]}function j(t){return t&Qt?"cancel":t&Zt?"end":t&Gt?"move":t&$t?"start":""}function U(t){return t==kt?"down":t==Et?"up":t==_t?"left":t==Tt?"right":""}function q(t,e){var i=e.manager;return i?i.get(t):t}function K(){V.apply(this,arguments)}function $(){K.apply(this,arguments),this.pX=null,this.pY=null}function G(){K.apply(this,arguments)}function Z(){V.apply(this,arguments),this._timer=null,this._input=null}function J(){K.apply(this,arguments)}function Q(){K.apply(this,arguments)}function tt(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(t,e){return e=e||{},e.recognizers=u(e.recognizers,et.defaults.preset),new it(t,e)}function it(t,e){e=e||{},this.options=a(e,et.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=T(this),this.touchAction=new H(this,this.options.touchAction),nt(this,!0),s(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function nt(t,e){var i=t.element;s(t.options.cssProps,function(t,n){i.style[w(i.style,n)]=e?t:""})}function ot(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var st=device.ui.scale||1,rt=["","webkit","moz","MS","ms","o"],at=e.createElement("div"),ht="function",lt=Math.round,ct=Math.abs,ut=Date.now,dt=1,pt=/mobile|tablet|ip(ad|hone|od)|android/i,ft="ontouchstart"in t,mt=w(t,"PointerEvent")!==i,gt=ft&&pt.test(navigator.userAgent),vt=25,yt=1,bt=2,wt=4,xt=8,St=1,_t=2,Tt=4,Et=8,kt=16,Pt=_t|Tt,At=Et|kt,Ot=Pt|At,Ct=["x","y"],Dt=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)}};var It={mousedown:yt,mousemove:bt,mouseup:wt},Mt="mousedown",Rt="mousemove mouseup";h(X,_,{handler:function(t){var e=It[t.type];e&yt&&0===t.button&&(this.pressed=!0),e&bt&&1!==t.which&&(e=wt),this.pressed&&this.allow&&(e&wt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Lt={pointerdown:yt,pointermove:bt,pointerup:wt,pointercancel:xt,pointerout:xt},Yt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Xt="pointerdown",Nt="pointermove pointerup pointercancel";t.MSPointerEvent&&(Xt="MSPointerDown",Nt="MSPointerMove MSPointerUp MSPointerCancel"),h(N,_,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Lt[n],s=Yt[t.pointerType]||t.pointerType,r="touch"==s;o&yt&&(0===t.button||r)?e.push(t):o&(wt|xt)&&(i=!0);var a=v(e,t.pointerId,"pointerId");a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var zt={touchstart:yt,touchmove:bt,touchend:wt,touchcancel:xt},Bt="touchstart touchmove touchend touchcancel";h(z,_,{handler:function(t){var e=zt[t.type],i=B.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}),h(F,_,{handler:function(t,e,i){var n="touch"==i.pointerType,o="mouse"==i.pointerType;if(n)this.mouse.allow=!1;else if(o&&!this.mouse.allow)return;e&(wt|xt)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ft=w(at.style,"touchAction"),Ht=Ft!==i,Wt="auto",Vt="manipulation",jt="none",Ut="pan-x",qt="pan-y";H.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ht&&(this.manager.element.style[Ft]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),W(t.join(" "))},preventDefaults:function(t){if(!Ht){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,o=m(n,jt),s=m(n,qt),r=m(n,Ut);return o||s&&i&Pt||r&&i&At?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Kt=1,$t=2,Gt=4,Zt=8,Jt=Zt,Qt=16;V.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=q(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=q(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){
return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?j(n):""),t)}var i=this,n=this.state;n<Zt&&e(!0),e(),n>=Zt&&e(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Kt)))return!1;t++}return!0},recognize:function(t){var e=r({},t);if(!c(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Jt|Qt|32)&&(this.state=Kt),this.state=this.process(e),this.state&($t|Gt|Zt|Qt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},h(K,V,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&($t|Gt),o=this.attrTest(t);return n&&(i&xt||!o)?e|Qt:n||o?i&wt?e|Zt:e&$t?e|Gt:$t:32}}),h($,K,{defaults:{event:"pan",threshold:10*st,pointers:1,direction:Ot},getTouchAction:function(){var t=this.options.direction,e=[];return t&Pt&&e.push(qt),t&At&&e.push(Ut),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,s=t.deltaX,r=t.deltaY;return o&e.direction||(e.direction&Pt?(o=0===s?St:s<0?_t:Tt,i=s!=this.pX,n=Math.abs(t.deltaX)):(o=0===r?St:r<0?Et:kt,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return K.prototype.attrTest.call(this,t)&&(this.state&$t||!(this.state&$t)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=U(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),h(G,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&$t)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),h(Z,V,{defaults:{event:"press",pointers:1,time:500,threshold:5*st},getTouchAction:function(){return[Wt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,o=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!o||!i||t.eventType&(wt|xt)&&!s)this.reset();else if(t.eventType&yt)this.reset(),this._timer=n(function(){this.state=Jt,this.tryEmit()},e.time,this);else if(t.eventType&wt)return Jt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Jt&&(t&&t.eventType&wt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ut(),this.manager.emit(this.options.event,this._input)))}}),h(J,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&$t)}}),h(Q,K,{defaults:{event:"swipe",threshold:10*st,velocity:.65,direction:Pt|At,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Pt|At)?e=t.velocity:i&Pt?e=t.velocityX:i&At&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&ct(e)>this.options.velocity&&t.eventType&wt},emit:function(t){var e=U(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(tt,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:10*st,posThreshold:10*st},getTouchAction:function(){return[Vt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,o=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&yt&&0===this.count)return this.failTimeout();if(o&&s&&i){if(t.eventType!=wt)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||M(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=n(function(){this.state=Jt,this.tryEmit()},e.interval,this),$t):Jt}return 32},failTimeout:function(){return this._timer=n(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Jt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION="2.0.3",et.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[J,{enable:!1}],[G,{enable:!1},["rotate"]],[Q,{direction:Pt}],[$,{direction:Pt},["swipe"]],[tt],[tt,{event:"doubletap",taps:2},["tap"]],[Z]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};return it.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&Jt)&&(o=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&($t|Gt|Zt)&&(o=e.curRecognizer=i),s++}},get:function(t){if(t instanceof V)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(v(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return s(g(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return s(g(t),function(t){e?i[t].splice(v(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ot(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()},e.stopPropagation=function(){e.srcEvent.stopPropagation()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(et,{INPUT_START:yt,INPUT_MOVE:bt,INPUT_END:wt,INPUT_CANCEL:xt,STATE_POSSIBLE:Kt,STATE_BEGAN:$t,STATE_CHANGED:Gt,STATE_ENDED:Zt,STATE_RECOGNIZED:Jt,STATE_CANCELLED:Qt,STATE_FAILED:32,DIRECTION_NONE:St,DIRECTION_LEFT:_t,DIRECTION_RIGHT:Tt,DIRECTION_UP:Et,DIRECTION_DOWN:kt,DIRECTION_HORIZONTAL:Pt,DIRECTION_VERTICAL:At,DIRECTION_ALL:Ot,Manager:it,Input:_,TouchAction:H,TouchInput:z,MouseInput:X,PointerEventInput:N,TouchMouseInput:F,Recognizer:V,AttrRecognizer:K,Tap:tt,Pan:$,Swipe:Q,Pinch:G,Rotate:J,Press:Z,on:d,off:p,each:s,merge:a,extend:r,inherit:h,bindFn:l,prefixed:w}),et}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("~/scroll",[],function(t,i,n){var o=device.ui,s=devicePixelRatio,r=device.feat,a=r.prefixStyle,h={linear:{style:"cubic-bezier(0, 0, 1, 1)",fn:function(t){return t}},quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0, 0, 0.165, 1)",fn:function(t){return Math.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){return(t-=1)*t*(5*t+4)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){return 0===t?0:1==t?1:.4*Math.pow(2,-10*t)*Math.sin((t-.055)*(2*Math.PI)/.22)+1}}},l={touch:r.touch,isBadTransition:r.isBadTransition,supportTransition:r.supportTransition,feat:{hasObserver:r.observer,hasTransform:!1!==a("transform"),hasPerspective:a("perspective"),hasTouch:r.touch,hasPointer:navigator.msPointerEnabled,hasTransition:a("transition")},prefixStyle:{transform:a("transform"),transition:a("transition"),transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")},prefixPointerEvent:function(t){return window.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t}},c={eventType:{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3},addEvent:function(t,e,i,n){t.addEventListener(e,i,!!n)},removeEvent:function(t,e,i,n){t.removeEventListener(e,i,!!n)},getRect:function(t){if(t instanceof SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height,clientWidth:e.width,clientHeight:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight,clientWidth:t.clientWidth,clientHeight:t.clientHeight}},offset:function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}}};i.exports=function(t,i,n){function r(t,e){this.options={history:!0,bindToWrapper:!0,scrollbars:!0,fadeScrollbars:!0,resizeScrollbars:!0,scrollbarAccuracy:10,interactive:!0,indicator:null,mouseWheel:!0,mouseWheelSpeed:20,mouseWheelAction:"normal",deferred:!1,infiniteCacheBuffer:50,momentum:!0,deceleration:6e-4,speedLimit:3,speedRate:1,stepLimit:150,maxPage:1e3,startX:0,startY:0,scrollX:!1,scrollY:!0,directionLockThreshold:5,directionLockThresholdX:!1,directionLockThresholdY:!1,bounce:!0,bounceDrag:3,bounceDragRate:20,bounceTime:400,bounceEasing:"",boundariesLimit:.6,bounceBreakThrough:!0,pull:!1,snap:!1,snapEasing:"",snapDuration:400,snapThreshold:.15,zoom:!1,zoomMin:1,zoomMax:4,startZoom:1,zoomOrigin:"0 0 0",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|HTMLAREA|BUTTON|SELECT)$/},stopPropagation:"auto",coverPropagation:!0,resizePolling:60,useTransition:!0}.extend(e),this._options=e,this.uuid="scroll::"+(App.name||"top")+":"+App.id+":"+(t.id||t.uuid),this.wrapper=t,this.scroller=this.scrolling=t.scrolling,this.pullup=t.pullup,this.pulldown=t.pulldown,this.pullright=t.pullright,this.pullleft=t.pullleft,this.scrollcover=t.scrollcover,(this.pullup||this.pulldown||this.pullright||this.pullleft)&&(this.options.pull=!0),(this.scroller||(App.console.warn("<scrolling>","warn","is not defined"),this.scroller=this.wrapper.children[0],this.scroller))&&(e.indicator&&(this.scrollbar=t.scrollbar),!e.speedLimit&&e.snap&&(this.options.speedLimit=f(1)),this.scrollerStyle=this.scroller.style,this.wrapperWidth=this.wrapper.offsetWidth,this.wrapperHeight=this.wrapper.offsetHeight,this.options.useTransition=l.feat.hasTransition&&this.options.useTransition,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.startX=f(this.options.startX),this.options.startY=f(this.options.startY),this.options.stepLimit=f(this.options.stepLimit),this.options.speedLimit=f(this.options.speedLimit),this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.snapEasing="string"==typeof this.options.snapEasing?h[this.options.snapEasing]||h.circular:this.options.snapEasing,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h[this.options.bounceEasing]||h.quadratic:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.indicators=this.scrollbar?{el:this.scrollbar,interactive:e.interactive}:null,l.supportTransition||(this.options.useTransition=!1),this.options.scrollX&&this.options.scrollY?this.wrapper.setAttribute("flow-free",""):this.options.scrollX?this.wrapper.setAttribute("flow-x",""):this.options.scrollY&&this.wrapper.setAttribute("flow-y",""),this._init(),this.revert(!0,!this.options.deferred))}function a(t,e,n){var o=i.createElement("scrollbar"),s=i.createElement("indicator");return"h"==t?(!0===n&&(o.css({height:"3dp",right:"2dp",bottom:"3dp",left:"2dp"}),s.css({height:"100%"})),o.setAttribute("x","")):(!0===n&&(o.css({width:"3dp",top:"2dp",right:"3dp",bottom:"2dp"}),s.css({width:"100%"})),o.setAttribute("y","")),e||(o.style.pointerEvents="none"),o.appendChild(s),o}function u(e,n){this.wrapper="string"==typeof n.el?i.querySelector(n.el):n.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,drag:3,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in n)this.options[o]=n[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(c.addEvent(this.indicator,"touchstart",this),c.addEvent(t,"touchend",this)),this.options.disablePointer||(c.addEvent(this.indicator,"MSPointerDown",this),c.addEvent(t,"MSPointerUp",this)),this.options.disableMouse||(c.addEvent(this.indicator,"mousedown",this),c.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[l.prefixStyle.transitionDuration]="0ms",this.wrapperStyle.opacity="0")}var d=t.getComputedStyle,p=t.requestAnimationFrame,f=(t.requestIdleCallback,function(t){return t*o.scale});return r.prototype={on:function(t,e){var i=this;t.split(" ").each(function(t,n){i._events.initial(n,[]).push(e)})},one:function(t,e){function i(){e.apply(this,arguments),this.off(t,i)}var n=this;t.split(" ").each(function(t,e){n._events.initial(e,[]).push(i)})},off:function(t,e){var i=this;t.split(" ").each(function(t,n){if(i._events[n]){var o=i._events[n].indexOf(e);o>-1&&i._events[n].splice(o,1)}})},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},stop:function(){this.isInTransition=!1,this.isAnimating=!1},revert:function(t,e){e&&(this._initKaleidoscope(),this._refresh(),t&&this.scrollTo(this.options.startX,this.options.startY,-1),this.enable(),this._execEvent("revert"))},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},refresh:function(){var t=this;if(this.isMoving()||this.isScrolling())return void this.one("scrollend",function(){p(function(){t._refresh()})}.bind(this));p(function(){t._refresh()})},getComputedPosition:function(){var t,e,i=d(this.scroller,null);return i=i[l.prefixStyle.transform].split(")")[0].split(", "),t=+(i[12]||i[4]),e=+(i[13]||i[5]),{x:t,y:e}},drawingEnd:function(){},isScrolling:function(){return this.isInTransition||this.isAnimating||!1},isMoving:function(){return this.moving},isBounce:function(){var t,e=this.x,i=this.y,n=!1;return this.hasHorizontalScroll?this.x>this.minScrollX?(e=this.minScrollX,n=!0,t="left"):this.x<this.maxScrollX&&(e=this.maxScrollX,n=!0,t="right"):e=this.x,this.hasVerticalScroll?this.y>this.minScrollY?(i=this.minScrollY,n=!0,t="top"):this.y<this.maxScrollY&&(i=this.maxScrollY,n=!0,t="bottom"):i=this.y,!!n&&{x:e,y:i,pos:t}},resetPosition:function(t){var e=this.isBounce();return t=t||0,e?(this.scrollTo(e.x,e.y,t,h.quadratic),this._execEvent("bouncing",e.pos)):this.bounceDragPhase=0,this.borderBouncing=e,e},zoom:function(t,e,i,n){if(t<this.options.zoomMin?t=this.options.zoomMin:t>this.options.zoomMax&&(t=this.options.zoomMax),t!=this.scale){var o=t/this.scale;e=void 0===e?this.wrapperWidth/2:e,i=void 0===i?this.wrapperHeight/2:i,n=void 0===n?300:n,e=e+this.wrapperOffset.left-this._x,i=i+this.wrapperOffset.top-this._y,e=e-e*o+this._x,i=i-i*o+this._y,this.scale=t,this._refresh(),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this.scrollTo(e,i,n)}},next:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,t,e)},prev:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,t,e)},goToPage:function(t,e,i,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var s=this.pages[t][e].x,r=this.pages[t][e].y;i=void 0===i?this.options.snapDuration||n.max(n.max(n.min(n.abs(s-this.x),1e3),n.min(n.abs(r-this.y),1e3)),300):i,this.currentPage={x:s,y:r,pageX:t,pageY:e},this.scrollTo(s,r,i,o)},scrollBy:function(t,e,i,n,o){0===t&&0===e||(t=this._x+t,e=this._y+e,i=i||0,this.scrollTo(t,e,i,n,o))},scrollTo:function(t,e,i,n,o){return i=i||0,n=n||h.circular,this.isInTransition=this.options.useTransition&&i>0,t===this._x&&e===this._y&&-1!==i?void(i&&this._execEvent("scrollend","end")):(!1===o&&(t>=this.minScrollX?t=this.minScrollX:t<this.maxScrollX&&(t=this.maxScrollX),e>=this.minScrollY?e=this.minScrollY:e<this.maxScrollY&&(e=this.maxScrollY)),i<=0?(this._promiseKeyFrame("translate",[t,e],!0),this._promiseKeyFrame("transitionTime",null,!0),void this._drawing()):(this.transitionStartTime=Date.now(),this.transitionCountTime=i,void(this.options.useTransition&&n.style?(this._promiseKeyFrame("translate",[t,e],!0),this._promiseKeyFrame("transitionTimingFunction",[n.style],!0),this._promiseKeyFrame("transitionTime",[i],!0),this._drawing(),this._transitionScroll()):this._animate(t,e,i,n.fn))))},scrollToElement:function(t,e,i,o,s){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=c.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top;var a=c.getRect(t),h=c.getRect(this.wrapper);!0===i&&(i=n.round(a.offsetWidth/2-h.offsetWidth/2)),!0===o&&(o=n.round(a.offsetHeight/2-h.offsetHeight/2)),r.left-=i||0,r.top-=o||0,r.left=r.left>this.minScrollX?this.minScrollX:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>this.minScrollY?this.minScrollY:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?n.max(n.abs(this.x-r.left),n.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,s)}},setupFinite:function(){this.infiniteCache=[],this.infiniteDataLength=0,this.datasetInfiniteLock=!1,this.minScrollX=0,this.minScrollY=0,this.turnoverTimes=0},setupInfinite:function(){this.scrollerHeight=0,this.infiniteCache=[],this.infinitePhase=0,this.infiniteMaxPhase=0,this.infiniteContentWidth=0,this.infiniteContentHeight=0,this.infiniteContentPos=[0,0],this.infiniteContentCenter=0,this.infiniteContainerCenter=0,this.infiniteElementsEdge=[0,0],this.infiniteElementsPos=[],this.infiniteUpdatePos=[],this.infiniteDataLength=0,this.datasetInfiniteLock=!1,this.minScrollX=0,this.minScrollY=0,this.turnoverTimes=0},resetInfinite:function(){this.infiniteElements||this._initInfinite(),this.infiniteElements.each(function(t,e){this.setInfiniteDataFiller(e,e._phase)},this),this.scrollTo(0,0),this.setupInfinite(),this.reorderInfinite()},datasetInfinite:function(t){if(!0===this.datasetInfiniteLock)return void this._execEvent("infinitedataend");var e=this,i=this.infiniteCache.length,n=this.turnoverTimes;this.datasetInfiniteLock=!0,this.getInfiniteDataset.call(this,i,n,function(n,o){if(!n||!n.length||e.turnoverTimes>e.options.maxPage)return e._execEvent("infinitedataend"),void(e.datasetInfiniteLock=!0);e.turnoverTimes++,o||(e.datasetInfiniteLock=!1),e._execEvent("infinitedataready"),e.updateInfiniteData(i,n),e._execEvent("infinitedataloaded"),e._execEvent("modify"),t&&t.call(e),o&&(e._execEvent("infinitedataend"),e.datasetInfiniteLock=!0)})},checkInfiniteDataBuffer:function(){!this.datasetInfiniteLock&&this.infiniteSurplusBuffer<=this.options.infiniteCacheBuffer&&this.datasetInfinite()},detectInfiniteBalance:function(t){return this.broken||this.moving?0:1==t&&this.infinitePhase<this.infiniteLength?-1:1==t&&this.y>-this.wrapperHeight&&this.infinitePhase==this.infiniteLength?0:(this.infiniteContainerCenter=-this.y+this.wrapperHeight/2,this.infiniteContentCenter=this.infiniteContentPos[0]+this.infiniteContentHeight/2,this.infiniteContentCenter-this.infiniteContainerCenter-t*this.wrapperHeight)},reorderInfinite:function(t){if(this.updating)return this.infiniteContentPos=[0,0];this.infiniteContentHeight=this.infiniteContentPos[1]-this.infiniteContentPos[0],this.infiniteSurplusBuffer=this.infiniteDataLength-this.infinitePhase,this.checkInfiniteDataBuffer(),0!==this.infiniteDataLength&&this.rearrangeInfinite(this.directionY||1,t)},rearrangeInfinite:function(t,e){function i(t){d.infiniteRearranging=!1,d.updateInfinitePos(),e&&e.call(d),t&&d._execEvent("infinitecachedend")}function o(){return d.detectInfiniteBalance(1)>=0?i():(d.infiniteSurplusBuffer=d.infiniteDataLength-d.infinitePhase,d.infiniteSurplusBuffer<=0?i(1):(l=d.infinitePhase++,c=l%d.infiniteLength,u=n.max((l+1-d.infiniteLength)%d.infiniteLength,0),r=d.infiniteElements[c],r._index=c,r.__phase=r._phase||0,r._phase=l,d.updateInfiniteContent(r),h=d.infiniteItemSize||r._offsetHeight,a=d.infiniteContentPos[1],d.promiseInfinitePos(r,a),d.infiniteElementsPos[c]=[a,a+h],d.infiniteElementsEdge=[u,c],d.infiniteContentPos[0]=d.infiniteElementsPos[u][0],d.infiniteContentPos[1]+=h,d.refreshInfinitePos(l,a+h),f++,void(d.updating?o():p(o))))}function s(){return d.detectInfiniteBalance(-1)<=0?i():d.infinitePhase-d.infiniteLength<=0?i():(l=--d.infinitePhase,c=l%d.infiniteLength,u=(l-1)%d.infiniteLength,r=d.infiniteElements[c],r._index=c,r.__phase=r._phase,r._phase=l-d.infiniteLength,d.updateInfiniteContent(r),h=d.infiniteItemSize||r._offsetHeight,a=d.infiniteContentPos[0]-h,d.promiseInfinitePos(r,a),d.infiniteElementsPos[c]=[a,a+h],d.infiniteElementsEdge=[c,u],d.infiniteContentPos[0]-=h,d.infiniteContentPos[1]=d.infiniteElementsPos[u][1],(0===r._phase||a<d.minScrollY)&&(d.minScrollY=-a),f++,void(d.updating?s():p(s)))}if(!this.infiniteRearranging){var r,a,h,l,c,u,d=this,f=0;n.min(this.infiniteLength,this.infiniteDataLength);switch(this.infiniteRearranging=!0,t){case 1:this.updating?o():p(o);break;case-1:this.updating?s():p(s)}}},addInfiniteElements:function(){var t=i.createElement("infinite");this.scroller.appendChild(t),this.infiniteElements.push(t),this.infiniteLength=this.infiniteElements.length},refreshInfinitePos:function(t,e){(t+=1)<this.infiniteMaxPhase||(this.scrollerHeight=e+(this.infiniteSurplusBuffer-1)*(e/t),this.maxScrollY=n.min(this.wrapperHeight-this.scrollerHeight,this.minScrollY),1!==this.infiniteSurplusBuffer&&t%(this.infiniteLength*this.options.scrollbarAccuracy)!=0||this._execEvent("modify"),this.infiniteMaxPhase=t)},refreshInfiniteAllPos:function(t){var e,i,o,s,r,a=t||0,h=this.infiniteLength,l=this.infiniteElementsEdge[0],c=this.infiniteContentPos[1]-this.infiniteContentPos[0];for(this.infiniteContentPos[1]=this.infiniteContentPos[0];a<h;a++)e=(l+a)%this.infiniteLength,i=this.infiniteElements[e],s=i.offsetHeight,i._offsetHeight=s,o=this.infiniteContentPos[1],this.promiseInfinitePos(i,o),this.infiniteElementsPos[e]=[o,o+s],this.infiniteContentPos[1]+=s;this.updateInfinitePos(),r=this.infiniteContentPos[1]-this.infiniteContentPos[0]-c,this.scrollerHeight+=r,this.maxScrollY=n.min(this.wrapperHeight-this.scrollerHeight,0),this._execEvent("modify")},promiseInfinitePos:function(t,e){this.infiniteUpdatePos.push(arguments)},setInfiniteTranslate:function(t,e){t.style[l.prefixStyle.transform]="translate3d(0px, "+e+"px, 0px)"},updateInfinitePos:function(){var t=this;p(function(){t.infiniteUpdatePos.each(function(e,i){t.setInfiniteTranslate.apply(t,i)}),t.infiniteUpdatePos=[]})},updateInfiniteContent:function(t){t.style[l.prefixStyle.transform]="translate3d(-10000px, -10000px, 0px)",this.getInfiniteDataFiller.call(this,t,t._phase,t.__phase),t._offsetHeight=t.offsetHeight},updateInfiniteData:function(t,e,i){var n=this;e.each(function(e,i){n.infiniteCache[t++]=i,n.options.finite&&n.getFiniteCacheBuffer.call(n,i,t-1)}),this.infiniteDataLength=t},updateInfiniteCache:function(t){return this.getInfiniteCacheBuffer.call(this,this.infiniteCache[t],t)},update:function(t,e){this.updating=!0,e?this.updated=!1:(this.updated=!0,this.datasetInfiniteLock=!1,this.options.finite?this.setupFinite():this.setupInfinite()),this.datasetInfinite(function(){this.options.finite?(e||(this.scroller.innerHTML=null),this.scroller.appendChild(this.finiteFragment),this.updating=!1):this.rearrangeInfinite(1,function(){this.updateInfinitePos(),this.updating=!1}),t&&t.call(this)})}},function(t){t.extendProperties({_execEvent:function(t){var e=this,i=arguments,n=this._events[t];if(n)for(var o=n.length-1;o>=0;o--)n[o].apply(e,[].slice.call(i,1))},_refresh:function(){var t=c.getRect(this.wrapper),e=c.getRect(this.scroller);this.wrapperWidth=t.clientWidth,this.wrapperHeight=t.clientHeight,this.options.infinite||(this.scrollerWidth=n.round(e.width*this.scale),this.scrollerHeight=n.round(e.height*this.scale),this.minScrollX=this.options.minScrollX||0,this.minScrollY=this.options.minScrollY||0),this.maxScrollX=this.wrapperWidth-this.scrollerWidth-this.minScrollX,this.maxScrollY=this.wrapperHeight-this.scrollerHeight-this.minScrollY,this.canHorizontalScroll=this.maxScrollX<this.minScrollX,this.canVerticalScroll=this.maxScrollY<this.minScrollY,this.hasHorizontalScroll="auto"==this.options.scrollX?this.canHorizontalScroll:this.options.scrollX,this.hasVerticalScroll="auto"==this.options.scrollY?this.canVerticalScroll:this.options.scrollY,this.options.infinite&&(this.hasVerticalScroll=!0),this.hasHorizontalScroll||(this.maxScrollX=this.minScrollX,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=this.minScrollY,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=c.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},_call:function(t){t.call(this)},_drawing:function(t){var e=this;p(function(){e._drawKeyFrame.call(e,t||noop)})},_clearKeyFrame:function(){this._keyFrame=[]},_promiseKeyFrame:function(t,e,i){var n=this._keyFrame,o={};if(i){var s=n[n.length-1];if(s)return void(s[t]=e)}o[t]=e,n.push(o)},_drawKeyFrame:function(t){var e=this._keyFrame.shift();if(!e)return t.call(this);for(var i in e)this["_"+i].apply(this,e[i]);this._drawing()},_translate:function(t,e,i,n,o){if((null!=t||(n=this.getComputedPosition(),t=n.x+this.dropX,e=n.y+this.dropY,n=null,!isNaN(t)))&&(t=t||0,e=e||0,i=i||0,n=n||this.options.zoom?this.scale:null,(t!==this.x||e!==this.y||i!==this.z||n!==this.s)&&(this.scrollerStyle[l.prefixStyle.transform]="translate3d("+t+"px,"+e+"px, "+i+"px)"+(n?" scale("+n+")":""),this.x=t,this.y=e,this.z=i,this.s=n,o||(this._x=t,this._y=e),this.indicators)))for(var s=this.indicators.length;s--;)this.indicators[s].updatePosition()},_transitionTime:function(t){if(t!==this.transitionDuration&&(this.scrollerStyle[l.prefixStyle.transitionDuration]=t?t+"ms":"",this.transitionDuration=t,this.indicators))for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transformOrigin:function(t){this.scrollerStyle[l.prefixStyle.transformOrigin]=t||this.options.zoomOrigin},_transitionTimingFunction:function(t){if((t=t||"")!==this.transitionTimingFunction&&(this.scrollerStyle[l.prefixStyle.transitionTimingFunction]=t,this.transitionTimingFunction=t,this.indicators))for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_transitionScroll:function(t,e,i){function o(){if(s.isInTransition){if(Date.now-s.transitionStartTime>2*s.transitionCountTime)return s._execEvent("scrollend","end");var t=s.getComputedPosition();s.dropX=n.round(t.x-s.x)||s.dropX||0,s.dropY=n.round(t.y-s.y)||s.dropY||0,s.x=n.round(t.x),s.y=n.round(t.y),s._execEvent("scroll","scrolling"),p(o)}}var s=this;o()},_checkPerformance:function(){this.transitionDelayTime=-this._transitionTimeLeft(),this.transitionDelayRate=this.transitionDelayTime/this.transitionCountTime,this.transitionDelayRate>.15&&(application.console.warn(""+this.transitionDelayTime+"ms","",""+this.transitionDelayRate),application.console.warn("","","0.15"))},_transitionTimeLeft:function(){return n.max(this.transitionCountTime-(Date.now()-this.transitionStartTime),0)},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this._checkPerformance(),l.supportTransition&&this.transitionDelayTime<0&&(this.options.useTransition=!1,l.supportTransition=!1,device.feat.supportTransition=!1),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._promiseKeyFrame("translate",[this.x,this.y],!0),this._drawing(),this._execEvent("scrollend","end")),this.drawingEnd())},_animate:function(t,e,i,o){function s(){var l,d,f,m=Date.now(),g=m-c;if(m>=u)return r.isAnimating=!1,r._translate(t,e),r._checkPerformance(),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollend","end"));f=o(g/i),l=(t-a)*f+a,d=(e-h)*f+h,r._translate(n.round(l),n.round(d)),r.isAnimating&&p(s),r._execEvent("scroll","scrolling")}var r=this,a=this._x,h=this._y,l=Date.now(),c=l-1e3/60,u=c+i;this.isAnimating||(this.isAnimating=!0,s())},_momentum:function(t,e,i,o,r,a){var h,l,c,u,d,p,m;return c=t-e,u=c<0?-1:1,h=n.min(n.abs(c)*s/i,this.options.speedLimit),h=void 0==this.speedM?h:n.min(this.speedM*s,h),m=n.max(this.options.deceleration-this.acceleration,.003),l=h*h/m/s/2*u,d=h/m*this.options.speedRate,p=t+l,p<r?(p=a?r-a*this.options.boundariesLimit*(h/f(8)):r,l=n.abs(p-t),d=l/h):p>o&&(p=a?a*this.options.boundariesLimit*(h/f(8)):0,l=n.abs(t)+p,d=l/h),{destination:n.round(p),duration:d,speed:h}},_acceleration:function(){this.isScrolling()&&-1!=this.scrollTrendY&&-1!=this.scrollTrendX?this.gapTime<1e3?this.acceleration=n.min(this.acceleration+5e-4,.001):this.acceleration=n.min(this.acceleration-5e-4,0):this.acceleration=0},_observer:function(t,e){var i=this;t.observer({childList:!0,subtree:!0,characterData:!0,attributeFilter:["id","class","style","src","width","height"]},function(t){clearTimeout(i.observerTimeout),t.length&&(i.observerTimeout=setTimeout(function(){e.call(i,t)},300))})},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},_directionLocked:function(t,i,n,o){if(!(!1===this.broken&&this.moveTime-this.endTime>200&&t<f(10)&&i<f(10))){if(this.options.directionLockThresholdX&&(t>i+f(this.options.directionLockThresholdX)?this.directionLocked="h":this.directionLocked="v"),this.options.directionLockThresholdY&&(i>t+f(this.options.directionLockThresholdY)?this.directionLocked="v":this.directionLocked="h"),this.directionLocked||this.options.freeScroll||(t>i+f(this.options.directionLockThreshold)?this.directionLocked="h":i>=t+f(this.options.directionLockThreshold)?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);o=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);n=0}return{x:n,y:o}}},_initPrevant:function(){this.scroller.on("preventscroll",function(t){var e=t.data.scroll,i=t.data.prevent;this.preventscroll=i,i&&this._execEvent("scrollend","end"),e.options.coverPropagation&&this.isScrolling()&&(e.stopAnimation=!0,this.preventscroll=!1)}.bind(this))},_pieceEvent:function(t){return c.eventType[t.type]===this.initiated},_preventscroll:function(t){this.wrapper.trigger("preventscroll",{prevent:t,scroll:this})},
_prevent:function(t,e,i,o,s,r){var a=!1;if(i=n.round(i||this._x),o=n.round(o||this._y),!this.enabled)return!0;switch(e){case 1:if(this.initiated&&!this._pieceEvent(t))return!0;if(this.preventscroll=!1,this.stopAnimation=!1,1!=c.eventType[t.type]){if(0!==(t.which?t.button:t.button<2?0:4==t.button?1:2))return!0}break;case 2:if(!this._pieceEvent(t))return!0;if(this.preventscroll)return!0;break;case 3:if(!this._pieceEvent(t))return!0;if(t.touches&&t.touches.length>0)return!0;break;case 4:this.preventscroll=!1;break;case 5:if(t.preventDefault(),this.preventscroll)return!0}if(this.options.preventDefault&&[1,3].consistOf(e)&&t.changedTouches&&!App.preventDefaultException(t,this.options.preventDefaultException)&&t.preventDefault(),0!=this.options.stopPropagation&&[2,5].consistOf(e))if(1==this.options.stopPropagation)t.stopPropagation();else if("auto"==this.options.stopPropagation&&(this.canHorizontalScroll&&"h"==this.directionLocked&&!(i>=this.minScrollX||i<=this.maxScrollX)||this.canVerticalScroll&&"v"==this.directionLocked&&!(o>=this.minScrollY||o<=this.maxScrollY))&&(a=!0),"x"==this.options.stopPropagation&&n.abs(s)>n.abs(r)?a=!0:"y"==this.options.stopPropagation&&n.abs(r)>n.abs(s)&&(a=!0),this._preventscroll(a),this.options.coverPropagation&&1==e&&this.stopAnimation)return!0;return!1},_start:function(t){if(!this._prevent(t,1)){var e=t.touches?t.touches[t.touches.length-1]:t;this.initiated=c.eventType[t.type],this.moved=!1,this.moving=!1,this.broken=!1,this.holding=!0,this.distX=0,this.distY=0,this.moveTrendX=0,this.moveTrendY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._clearKeyFrame(),this.options.useTransition&&this.isInTransition?(this.broken=!0,this.isInTransition=!1,this._promiseKeyFrame("translate",[null,null,null,null]),this._promiseKeyFrame("transitionTime",null,!0),l.isBadTransition&&this._promiseKeyFrame("transitionTime",[1e-4],!0),this._promiseKeyFrame("transitionTimingFunction",null,!0),this._drawing(),this._execEvent("scrollend","break")):!this.options.useTransition&&this.isAnimating&&(this.broken=!0,this.isAnimating=!1,this._execEvent("scrollend","break")),this.startTime=Date.now(),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this._execEvent("beforescrollstart","hold")}},_move:function(t){if(!this._prevent(t,2)){var e,i,o,s,r,a,h=t.touches?t.touches[t.touches.length-1]:t,l=0,c=h.pageX-this.pointX,u=h.pageY-this.pointY,d=Date.now(),p=n.min(d-this.movedTimestamp,300);if(this.moveTime=d,r=c>0?-1:c<0?1:0,a=u>0?-1:u<0?1:0,c=n.min(n.abs(c),this.options.stepLimit)*-r,u=n.min(n.abs(u),this.options.stepLimit)*-a,this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=n.round(c),this.distY+=n.round(u),o=n.abs(this.distX),s=n.abs(this.distY),this.speedX=n.abs(c)/p,this.speedY=n.abs(u)/p,this.speedM=n.max(this.speedX,this.speedY),this.bounceDragPhase++,(l=this._directionLocked(o,s,c,u))&&(c=this.hasHorizontalScroll?l.x:0,u=this.hasVerticalScroll?l.y:0,e=this._x+c,i=this._y+u,(e>this.minScrollX||e<this.maxScrollX)&&(this.bounceDragPhase++,e=this.options.bounce?this._x+c/(this.options.bounceDrag+this.bounceDragPhase/this.options.bounceDragRate):e>this.minScrollX?this.minScrollX:this.maxScrollX),(i>this.minScrollY||i<this.maxScrollY)&&(this.bounceDragPhase++,i=this.options.bounce?this._y+u/(this.options.bounceDrag+this.bounceDragPhase/this.options.bounceDragRate):i>this.minScrollY?this.minScrollY:this.maxScrollY),this.moveTrendX=this.hasHorizontalScroll?this.directionX==r?1:-1:0,this.moveTrendY=this.hasVerticalScroll?this.directionY==a?1:-1:0,-1!=this.moveTrendX&&-1!=this.moveTrendY||this._clearKeyFrame(),this.directionX=r,this.directionY=a,!this._prevent(t,2,e,i,l.x,l.y))){if(this._x===e&&this._y===i||(this.moved||(this._execEvent("scrollstart"),this.startTime=Date.now()),this.moved=!0,this.moving=!0,this.broken=!1,this.holding=!1,this._x=e,this._y=i,this._promiseKeyFrame("translate",[e,i,null,null,!0]),this._promiseKeyFrame("transitionTime",null,!0),this._drawing()),this.movedTimestamp=d,d-this.startTime>300)return this.startTime=d,this.startX=this._x,this.startY=this._y,this._execEvent("scroll","movestep");this._execEvent("scroll","moving")}}},_end:function(t){if(!this._prevent(t,3)){var e,i,o=t.changedTouches?t.changedTouches.length:0,s=(o&&t.changedTouches[o],Date.now()-this.startTime),r=n.round(this._x),a=n.round(this._y),l=r-this.startX,c=a-this.startY,u=(n.abs(l),n.abs(c),l>0?-1:l<0?1:0),d=c>0?-1:c<0?1:0,p=0,f="";if(this.moving=!1,this.isInTransition=!1,this.initiated=0,this.gapTime=Date.now()-this.endTime,this.endTime=Date.now(),!this.resetPosition(this.options.bounceTime)){if(!this.moved&&!this.options.snap)return this._execEvent("scrollcancel");if(this.options.momentum&&s<300&&(e=this.hasHorizontalScroll?this._momentum(this._x,this.startX,s,this.minScrollX,this.maxScrollX,this.options.bounce&&this.options.bounceBreakThrough?this.wrapperWidth:0):{destination:r,duration:0},i=this.hasVerticalScroll?this._momentum(this._y,this.startY,s,this.minScrollY,this.maxScrollY,this.options.bounce&&this.options.bounceBreakThrough?this.wrapperHeight:0):{destination:a,duration:0},r=e.destination,a=i.destination,p=n.max(e.duration,i.duration),this.speed=n.max(e.speed||0,i.speed||0),this.isInTransition=!0),this.options.snap){var m=this._nearestSnap(r,a);this.currentPage=m,p=this.options.snapDuration||n.max(n.max(n.min(n.abs(r-m.x),1e3),n.min(n.abs(a-m.y),1e3)),300),r=m.x,a=m.y,this.directionX=0,this.directionY=0,f=this.options.snapEasing}if(r!=this._x||a!=this._y)return(r>this.minScrollY||r<this.maxScrollX||a>this.minScrollY||a<this.maxScrollY)&&(f=h.quadratic),this.scrollTrendX=this.hasHorizontalScroll?this._directionX==u?1:-1:0,this.scrollTrendY=this.hasVerticalScroll?this._directionY==d?1:-1:0,this._acceleration(),this.directionX=u,this.directionY=d,this._directionX=u,this._directionY=d,this.moved=!1,this.moving=!1,void this.scrollTo(r,a,p,f);this._execEvent("scrollend","end")}}},_zoomStart:function(t){var e=n.abs(t.touches[0].pageX-t.touches[1].pageX),i=n.abs(t.touches[0].pageY-t.touches[1].pageY);this.touchesDistanceStart=n.sqrt(e*e+i*i),this.startScale=this.scale,this.originX=n.abs(t.touches[0].pageX+t.touches[1].pageX)/2-this.x,this.originY=n.abs(t.touches[0].pageY+t.touches[1].pageY)/2-this.y,this._execEvent("zoomStart")},_zoom:function(t){if(!this._prevent(t,2)){var e,i,o,s=n.abs(t.touches[0].pageX-t.touches[1].pageX),r=n.abs(t.touches[0].pageY-t.touches[1].pageY),a=n.sqrt(s*s+r*r),h=1/this.touchesDistanceStart*a*this.startScale;this.scaled=!0,h<this.options.zoomMin?h=.5*this.options.zoomMin*n.pow(2,h/this.options.zoomMin):h>this.options.zoomMax&&(h=2*this.options.zoomMax*n.pow(.5,this.options.zoomMax/h)),e=h/this.startScale,i=this.originX-this.originX*e+this.startX,o=this.originY-this.originY*e+this.startY,this.scale=h,this.scrollTo(i,o,0)}},_zoomEnd:function(t){if(!this._prevent(t,3)){var e,i,n;this.isInTransition=0,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this._refresh(),n=this.scale/this.startScale,e=this.originX-this.originX*n+this.startX,i=this.originY-this.originY*n+this.startY,e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this._x==e&&this._y==i||this.scrollTo(e,i,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}},_wheelZoom:function(t){var e,i,o=this;if(void 0===this.wheelTimeout){if(this._prevent(t,4))return;o._execEvent("scrollstart")}if(!this._prevent(t,5)){if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._prevent(t,6)||o._execEvent("zoomEnd")},400),"deltaX"in t)e=-t.deltaY/n.abs(t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaY/n.abs(t.wheelDeltaY);else if("wheelDelta"in t)e=t.wheelDelta/n.abs(t.wheelDelta);else{if(!("detail"in t))return;e=-t.detail/n.abs(t.wheelDelta)}i=this.scale+(e||0)/5,this.zoom(i,t.pageX,t.pageY,0)}},_wheel:function(t){var e,i,o,s,r,a,h,l,c=0,u=this;if(!this.preventWheel){if(void 0===this.wheelTimeout){if(this._prevent(t,4))return;this._execEvent("scrollstart")}if(!this._prevent(t,5)){if(this.bounceDragPhase>10)return this.preventWheel=!0,void setTimeout(function(){u.preventWheel=!1},1200);if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){u._prevent(t,6)||u.resetPosition(u.options.bounceTime)||(u._promiseKeyFrame("translate",[u._x,u._y]),u._drawing(),u._execEvent("scrollend","end"),u.wheeling=!1,u.borderBouncing=!1,u.directionLocked=void 0,u.wheelTimeout=void 0)},400),"deltaX"in t)e=-t.deltaX,i=-t.deltaY;else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,o=n.abs(e),s=n.abs(i),this.options.snap)return r=this.currentPage.pageX,a=this.currentPage.pageY,e>0?r--:e<0&&r++,i>0?a--:i<0&&a++,void this.goToPage(r,a);!this.hasWheelDeltaX&&e&&(this.hasWheelDeltaX=!0),!this.hasVerticalScroll&&!this.hasWheelDeltaX&&o<s&&(e=i,i=0,this.directionLocked),c=this._directionLocked(o,s,e,i),c&&(h=this.hasHorizontalScroll?c.x:0,l=this.hasVerticalScroll?c.y:0,r=this._x+h,a=this._y+l,(r>this.minScrollX||r<this.maxScrollX)&&("all"===this.options.bounce?(this.bounceDragPhase++,r=this._x+e/(this.options.bounceDrag+this.bounceDragPhase)):r=r>this.minScrollX?this.minScrollX:this.maxScrollX),(a>this.minScrollY||a<this.maxScrollY)&&("all"===this.options.bounce?(this.bounceDragPhase++,a=this._y+i/(this.options.bounceDrag+this.bounceDragPhase)):a=a>this.minScrollY?this.minScrollY:this.maxScrollY),this.directionX=this.hasHorizontalScroll?this._x-r>0?1:-1:0,this.directionY=this.hasVerticalScroll?this._y-a>0?1:-1:0,this.wheeling=!0,this.scrollTo(r,a,0),this._execEvent("scroll","wheel"),this._execEvent("wheel","wheel"))}}},_key:function(t){if(this.enabled){var e,i=this.options.snap,o=i?this.currentPage.pageX:this._x,s=i?this.currentPage.pageY:this._y,r=Date.now(),a=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._promiseKeyFrame("translate",[n.round(e.x),n.round(e.y)]),this._drawing(),this.isInTransition=!1),this.keyAcceleration=r-a<200?n.min(this.keyAcceleration+.25,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=i?1:this.wrapperWidth:s+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=i?1:this.wrapperWidth:s-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX,s=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=this.minScrollX,s=this.minScrollY;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(o,s);o>this.minScrollX?(o=this.minScrollX,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),s>this.minScrollY?(s=this.minScrollY,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,s),this.keyTime=r}},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,o=this.pages.length,s=0;if(n.abs(t-this.absStartX)<this.snapThresholdX&&n.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>this.minScrollX?t=this.minScrollX:t<this.maxScrollX&&(t=this.maxScrollX),e>this.minScrollY?e=this.minScrollY:e<this.maxScrollY&&(e=this.maxScrollY);i<o;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(o=this.pages[i]?this.pages[i].length:0;s<o;s++)if(e>=this.pages[0][s].cy){e=this.pages[0][s].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,i<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),s==this.currentPage.pageY&&(s+=this.directionY,s<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),e=this.pages[0][s].y),{x:t,y:e,pageX:i,pageY:s}},_pulling:function(t,e){var i=this,n=1,o=0,s=0,r=0,a=t.style,h=-f(t.getAttribute("threshold")||50),c=-f(t.getAttribute("rise")||h),u=!!t.attributes.getNamedItem("auto"),d=t.getAttribute("event-target")||"scroll",p=t.getAttribute("prevent-default")||!this.options.finite&&!this.options.infinite;switch("scroll"!==d&&(p=!0),e){case-1:e="minScrollX",n=-1;break;case 1:e="maxScrollX",n=1;break;case-2:e="minScrollY",n=-1;break;case 2:e="maxScrollY",n=1}this.on("scroll",function(f){o=this.y-this[e]+(r>3?n*h:0),s=n*o,s<=0&&((0==r||this.updated&&-2==r)&&(r=1),1==r&&(r=2,t.removeAttribute("pullend"),t.removeAttribute("pullover"),t.setAttribute("pullstart","")),2==r&&(r=3,this._execEvent("pullstart",null)),3==r&&s<h&&(u||"moving"==f)&&(r=4,this.pulling=!0,this._execEvent("pulling",null),t.removeAttribute("pullstart"),t.setAttribute("pulling",""),this[e]+=n*h,p?this.one("scrollend",function(){switch(r=-1,t.removeAttribute("pulling"),t.setAttribute("pullend",""),this._execEvent("pulling",null),d){case"module":application.modules[application.id].refresh(null,function(e){i.one("scrollend",function(){r=0,t.removeAttribute("pullend"),e()}),i.pulling=!1,i._execEvent("pullend",null),i._refresh(),i.resetPosition(i.options.bounceTime),0==i.isBounce()&&i._execEvent("scrollend",null)})}}):(this.one("scrollend",function(){n<0&&(r=-1),t.removeAttribute("pulling"),t.setAttribute("pullend",""),this._execEvent("pulling",null),this.update(function(){this.one("scrollend",function(){(n<0?-1==r:4==r)&&(r=0),t.removeAttribute("pullend")}),this.pulling=!1,this._execEvent("pullend",null),this._refresh(),n>0?this.scrollBy(this.hasHorizontalScroll?c:0,this.hasVerticalScroll?c:0,this.options.bounceTime):this.resetPosition(this.options.bounceTime)},n>0)}),n>0&&this.one("infinitedataend",function(){r=-1,this.one("scrollend",function(){r=-2}),t.removeAttribute("pulling"),t.removeAttribute("pullend"),t.setAttribute("pullover",""),this.pulling=!1,this._execEvent("pullover",null),this._refresh(),this.resetPosition(this.options.bounceTime)})))),r&&(a[l.prefixStyle.transform]="translate3d(0px,"+o+"px, 0px)",t.trigger("pull",{pos:o}))})}})}(r.prototype),function(e){e.extendProperties({handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t),this.options.zoom&&t.touches&&t.touches.length>1&&this._zoomStart(t);break;case"touchmove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&t.touches&&t.touches[1])return void this._zoom(t);this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":if(this.scaled)return void this._zoomEnd(t);this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.mouseWheelAction)return void this._wheelZoom(t);this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}},_init:function(){this._initBase(),this._initEvents(),this._initPrevant(),this._initHistory(),this._initObserver()},_initBase:function(){this._events={},this.initiated=!1,this.x=0,this.y=0,this._x=0,this._y=0,this.minScrollX=0,this.minScrollY=0,this.maxScrollX=0,this.maxScrollY=0,this.scale=n.min(n.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax),this.directionX=0,this.directionY=0,this.acceleration=0,this.bounceDragPhase=0,this.transitionDelayRate=0,this.transitionDelayTime=0,this._keyFrame=[]},_initHistory:function(){var t,e=this.uuid;if(1==this.options.history)try{t=sessionStorage.getItem(e),t=t.split(","),2==t.length&&(this.options.startX=Number(t[0]),this.options.startY=Number(t[1]))}catch(t){}this.on("scrollend",function(){try{sessionStorage.setItem(e,this.x+","+this.y),App.on("transformstart background",function(){sessionStorage.removeItem(e)})}catch(t){}})},_initKaleidoscope:function(){this.options.zoom&&this._initZoom(),this.options.mouseWheel&&this._initWheel(),this.options.keyBindings&&this._initKeys(),this.options.snap&&this._initSnap(),this.options.pull&&this._initPull(),this.options.finite&&this._initFinite(),this.options.infinite&&this._initInfinite(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators()},_initEvents:function(e){var i=e?c.removeEvent:c.addEvent,n=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),l.feat.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,l.prefixPointerEvent("pointerdown"),this),i(n,l.prefixPointerEvent("pointermove"),this),i(n,l.prefixPointerEvent("pointercancel"),this),i(n,l.prefixPointerEvent("pointerup"),this)),l.feat.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},_initObserver:function(){this.options.infinite||this._observer(this.scroller,function(t){this.updating||(this.hasVerticalScroll&&this.scroller.offsetHeight!==this.scrollerHeight||this.hasHorizontalScroll&&this.scroller.offsetWidth!==this.scrollerWidth)&&this.refresh()})},_indicatorsMap:function(t){if(this.indicators)for(var e=this.indicators.length;e--;)t.call(this.indicators[e])},_initIndicators:function(){var t,e=this.options.interactive,i="string"!=typeof this.options.scrollbars,n=[];this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:a("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,drag:this.options.bounceDrag,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:a("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,drag:this.options.bounceDrag,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var o=n.length;o--;)this.indicators.push(new u(this,n[o]));this.options.fadeScrollbars&&(this.on("scrollend scrollcancel",function(t){"break"!==t&&this._indicatorsMap(function(){this.fade()})}),this.on("scrollstart beforescrollstart",function(t){this._indicatorsMap(function(){this.fade(1,"hold"===t)})})),this.on("refresh",function(){this._indicatorsMap(function(){this.refresh()})}),this.on("modify",function(){this._indicatorsMap(function(){this.refresh()})}),this.on("destroy",function(){this._indicatorsMap(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){c.addEvent(this.wrapper,"wheel",this),c.addEvent(this.wrapper,"mousewheel",this),c.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){c.removeEvent(this.wrapper,"wheel",this),c.removeEvent(this.wrapper,"mousewheel",this),c.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_initKeys:function(e){var i,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==_typeof(this.options.keyBindings))for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in n)this.options.keyBindings[i]=this.options.keyBindings[i]||n[i];c.addEvent(t,"keydown",this),this.on("destroy",function(){c.removeEvent(t,"keydown",this)})},_initSnap:function(){void 0==this._options.mouseWheel&&(this.options.mouseWheel=!1),void 0==this._options.speedLimit&&(this.options.speedLimit=f(.5)),void 0==this._options.fadeScrollbars&&(this.options.fadeScrollbars=!1),this.options.indicators&&void 0==this._options.resizeScrollbars&&(this.options.indicators.resize=!1),this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,o,s,r,a,h=0,l=0,u=0,d=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=n.round(d/2),o=n.round(p/2);u>-this.scrollerWidth;){for(this.pages[h]=[],t=0,s=0;s>-this.scrollerHeight;)this.pages[h][t]={x:n.max(u,this.maxScrollX),y:n.max(s,this.maxScrollY),width:d,height:p,cx:u-i,cy:s-o},s-=p,t++;u-=d,h++}else for(r=this.options.snap,t=r.length,e=-1;h<t;h++)a=c.getRect(r[h]),(0===h||a.left<=c.getRect(r[h-1]).left)&&(l=0,e++),this.pages[l]||(this.pages[l]=[]),u=n.max(-a.left,this.maxScrollX),s=n.max(-a.top,this.maxScrollY),i=u-n.round(a.width/2),o=s-n.round(a.height/2),this.pages[l][e]={x:u,y:s,width:a.width,height:a.height,cx:i,cy:o},u>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})},_initZoom:function(){this._transformOrigin("0 0")},_initPull:function(){this.pullup&&this._pulling(this.pullup,2),this.pulldown&&this._pulling(this.pulldown,-2),this.pullright&&this._pulling(this.pullright,1),this.pullleft&&this._pulling(this.pullleft,-1)},_initFinite:function(){this.minScrollX=0,this.minScrollY=0,this.fragments={},this.infiniteCache=[],this.turnoverTimes=0,this.finiteFragment=this.options.finiteFragment,this.getInfiniteDataset=this.options.getInfiniteDataset,this.getFiniteCacheBuffer=this.options.getFiniteCacheBuffer,this.update(function(){this.scrollcover&&(this.scrollcover=this.scrollcover.remove()),this._refresh()})},_initInfinite:function(){var t=this;this.minScrollX=0,this.minScrollY=0,this.infiniteElements=this.options.infiniteElements,this.infiniteLength=this.infiniteElements.length,this.infiniteCache=[],this.turnoverTimes=0,this.infiniteDataLength=0,this.scrollerHeight=0,this.preReorderInfiniteY=this.options.startY,this.infiniteItemSize=!!this.options.infiniteItemSize&&f(this.options.infiniteItemSize),this.getInfiniteDataset=this.options.getInfiniteDataset,this.setInfiniteDataFiller=this.options.setInfiniteDataFiller,this.getInfiniteDataFiller=this.options.getInfiniteDataFiller,this.getInfiniteCacheBuffer=this.options.getInfiniteCacheBuffer,this.setupInfinite(),this.infiniteElements.each(function(t,e){e.style["z-index"]=t+1}.bind(this)),this.one("infinitedataloaded",function(){t._refresh()}),this.on("scroll scrollend",function(t){this.borderBouncing||"scrolling"==t&&1===this.scrollTrendY&&this.transitionCountTime-this._transitionTimeLeft()>.6*this.transitionCountTime||this.reorderInfinite()}),this.update(function(){this.scrollcover&&this.scrollcover.remove(),this.on("refresh",function(){this.refreshInfiniteAllPos(),this.reorderInfinite()}),this.infiniteElements.each(function(e,i){t._observer(i,function(){!0!==this.infiniteRearranging&&i.offsetHeight!==i._offsetHeight&&(this.refreshInfiniteAllPos(),this.reorderInfinite())})}),this._refresh()})}})}(r.prototype),u.prototype={destroy:function(){this.options.interactive&&(c.removeEvent(this.indicator,"touchstart",this),c.removeEvent(this.indicator,"MSPointerDown",this),c.removeEvent(this.indicator,"mousedown",this),c.removeEvent(t,"touchmove",this),c.removeEvent(t,"MSPointerMove",this),c.removeEvent(t,"mousemove",this),c.removeEvent(t,"touchend",this),c.removeEvent(t,"MSPointerUp",this),c.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.remove()},fade:function(t,e){if(!(t&&this.visible||!t&&!this.visible)&&(!e||this.visible)){var i=this;clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=t?0:250,o=t?0:100;l.isBadTransition&&(n=1e-4),this.wrapperStyle[l.prefixStyle.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(){p(function(){t=t?"1":"0",i.wrapperStyle.opacity=t,i.visible=+t})},o)}},transitionTime:function(t){this.indicatorStyle[l.prefixStyle.transitionDuration]=t?t+"ms":""},transitionTimingFunction:function(t){this.indicatorStyle[l.prefixStyle.transitionTimingFunction]=t},updatePosition:function(){var t=this.scroller,e=t._x,i=t._y,o=this.options.listenX&&n.round(this.sizeRatioX*(e-t.minScrollX))||0,s=this.options.listenY&&n.round(this.sizeRatioY*(i-t.minScrollY))||0;this.options.ignoreBoundaries||(e>t.minScrollX?o=this.options.resize?n.max(o-e,f(8)-this.indicatorWidth):this.minBoundaryX:e<t.maxScrollX&&(o=this.options.resize?n.min(o+(t.maxScrollX-e),this.maxBoundaryX-f(8)):this.maxBoundaryX),i>t.minScrollY?s=this.options.resize?n.max(s-i,f(8)-this.indicatorHeight):this.minBoundaryY:i<t.maxScrollY&&(s=this.options.resize?n.min(s+(t.maxScrollY-i),this.maxBoundaryY-f(8)):this.maxBoundaryY)),this.x=o,this.y=s,this.indicatorStyle[l.prefixStyle.transform]="translate3d("+o+"px,"+s+"px, 0)"},refresh:function(){var t=this.scroller;this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=t.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=t.hasVerticalScroll?"block":"none":this.indicatorStyle.display=t.hasHorizontalScroll||t.hasVerticalScroll?"block":"none",t.hasHorizontalScroll&&t.hasVerticalScroll?(this.wrapper.removeAttribute("lone"),this.wrapper.setAttribute("both",""),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right=f(8)+"px":this.wrapper.style.bottom=f(8)+"px")):(this.wrapper.removeAttribute("both"),this.wrapper.setAttribute("lone",""),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right=f(2)+"px":this.wrapper.style.bottom=f(2)+"px")),this.minIndicatorWidth=t.options.snap?this.indicator.offsetWidth:f(4),this.minIndicatorHeight=t.options.snap?this.indicator.offsetHeight:f(4);this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.offsetWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(t.scrollerWidth||this.wrapperWidth||f(1))),this.minIndicatorWidth),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.offsetWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.minBoundaryX=-this.indicatorWidth+f(4),this.maxBoundaryX=this.wrapperWidth-f(4),this.sizeRatioX=this.options.speedRatioX||t.maxScrollX&&this.maxPosX/(t.maxScrollX-t.minScrollX)),this.options.listenY&&(this.wrapperHeight=this.wrapper.offsetHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(t.scrollerHeight||this.wrapperHeight||f(1))),this.minIndicatorHeight),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.offsetHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.minBoundaryY=-this.indicatorHeight+f(4),this.maxBoundaryY=this.wrapperHeight-f(4),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||t.maxScrollY&&this.maxPosY/(t.maxScrollY-t.minScrollY)),this.updatePosition()}},function(e){e.extendProperties({handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},_start:function(e){var i=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=Date.now(),this.options.disableTouch||c.addEvent(t,"touchmove",this),this.options.disablePointer||c.addEvent(t,"MSPointerMove",this),this.options.disableMouse||c.addEvent(t,"mousemove",this),this.scroller._execEvent("beforescrollstart","hold")},_move:function(t){var e,i,n,o,s=t.touches?t.touches[0]:t;Date.now();this.moved||this.scroller._execEvent("scrollstart"),this.moved=!0,e=s.pageX-this.lastPointX,this.lastPointX=s.pageX,i=s.pageY-this.lastPointY,this.lastPointY=s.pageY,n=this.x+e,o=this.y+i,this._pos(n,o),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){this.initiated=!1,e.preventDefault(),e.stopPropagation(),c.removeEvent(t,"touchmove",this),c.removeEvent(t,"MSPointerMove",this),c.removeEvent(t,"mousemove",this);var i=this.scroller;if(i.options.snap){var o=i._x,s=i._y,r=i._nearestSnap(o,s),a=this.options.snapDuration||n.max(n.max(n.min(n.abs(o-r.x),1e3),n.min(n.abs(s-r.y),1e3)),300);o==r.x&&s==r.y||(i.directionX=0,i.directionY=0,i.currentPage=r,i.scrollTo(r.x,r.y,a,i.options.snapEasing))}this.moved&&i._execEvent("scrollend")}},_pos:function(t,e){var i=this.scroller,o=i._x,s=i._y;t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?n.round(t/this.sizeRatioX):o,e=this.options.listenY?n.round(e/this.sizeRatioY):s,i.scrollTo(t,e)}})}(u.prototype),r.METHOD=c,r.BROWSER=l,r.EASEING=h,r}});