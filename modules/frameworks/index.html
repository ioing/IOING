<header class="header">
    <div class="wrapper">
        <menu-nav path='./'></menu-nav>

        <div class="site-logo">
            <div class="hexagon hexagon-with-border info">
                <div class="hexagon-shape">
                    <div class="hexagon-shape-inner">
                        <div class="hexagon-shape-inner-2"></div>
                    </div>
                </div>
                <div class="hexagon-shape content-panel">
                    <div class="hexagon-shape-inner">
                        <div class="hexagon-shape-inner-2"></div>
                    </div>
                </div>
                <div class="hexagon-content"></div>
            </div>
            IOING
        </div>
        <div class="site-logo-text">
            <span class="{setting.status.activeMainNav,'components'|activeMainNav}">推荐</span>
            <span class="{setting.status.activeMainNav,'docs'|activeMainNav}">文档</span>
            <!-- <span class="{setting.status.activeMainNav,'developers'|activeMainNav}">开发者</span> -->
        </div>

        <nav class="site-nav more-nav {{setting.status.showMoreNav ? 'visible' : 'hidden'}}">
            <ul>
                <li><a href="https://github.com/ioing/IOING/archive/master.zip">Download</a></li>
                <li><a href="https://github.com/ioing/IOING" target="_bank">Github</a></li>
                <!-- <li><a>赞助</a></li> -->
            </ul>
        </nav>

        <nav class="site-nav">
            <ul>
                <li><a class="{setting.status.activeMainNav,'components,tutorial'|activeMainNav}" transform="components-store">推荐</a></li>
                <li><a class="{setting.status.activeMainNav,'docs'|activeMainNav}" transform="docs-started-ioing">文档</a></li>
                <!-- <li><a class="{setting.status.activeMainNav,'developers'|activeMainNav}" transform="developers-notice">开发者</a></li> -->
            </ul>
        </nav>
    </div>
</header>

<aside uuid="site-aside" class="{{setting.status.showDocsNav ? 'visible' : 'hidden'}}">
    <scroll uuid="aside-scroll" class="sidebar">
        <scrolling>
            <!-- <div class="section-mod {setting.status.activeMainNav, 'components,tutorial'|showAsideNav}">
                <section>
                    <nav class="link-item">
                        <ul>
                            <li transform=components-store class="n {setting.status.activeSubNav,'components-store'|activeSubNav}">
                                <a>
                                    <div class="link-box">
                                        <span class="title">组件</span>
                                        <i></i>
                                    </div>
                                </a>
                            </li>
                            <li transform=components-tutorial class="{setting.status.activeSubNav,'tutorial'|activeSubNav}">
                                <a>
                                    <div class="link-box">
                                        <span class="title">教程</span>
                                        <i></i>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </section>
            </div>
            <div class="section-mod {setting.status.activeMainNav, 'developers'|showAsideNav}">
                <section>
                    <nav class="link-item">
                        <ul>
                            <li transform=developers-notice class="n {setting.status.activeSubNav,'developers-notice'|activeSubNav}">
                                <a>
                                    <div class="link-box">
                                        <span class="title">开发须知</span>
                                        <i></i>
                                    </div>
                                </a>
                            </li>
                            <li transform=developers-debug class="n {setting.status.activeSubNav,'developers-debug'|activeSubNav}">
                                <a>
                                    <div class="link-box">
                                        <span class="title">debug</span>
                                        <i></i>
                                    </div>
                                </a>
                            </li>
                            <li transform=components-tutorial class="{setting.status.activeSubNav,'tutorial'|activeSubNav}">
                                <a>
                                    <div class="link-box">
                                        <span class="title">教程</span>
                                        <i></i>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </section>
            </div> -->
            <div class="section-mod docs-nav {setting.status.activeMainNav, 'docs,components,tutorial,developers'|showAsideNav}">
                <section class="search-mod">
                    <div class="search-box">
                        <input type="text" placeholder="检索文档类目" on-input="search::searchDoc(this)">
                        <div uuid=search-result-box class=search-result>
                            <div class="dropdown-caret">
                                <span class="caret-outer"></span>
                                <span class="caret-inner"></span>
                            </div>
                            <div uuid=search-result>
                                <template search-result>
                                    <ul>
                                        <loop list as value key>
                                            <li transform="{value.href}" ><a>{value.title}</a></li>
                                        </loop>
                                    </ul>
                                </template>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="section-mod docs-nav {setting.status.activeMainNav, 'docs'|showAsideNav}">
                <include nav></include>
            </div>
            <div class="section-mod {setting.status.activeMainNav, 'components,tutorial,developers'|showAsideNav}">
                <section class="hover-item">
                    <scroll class=midea-box>
                        <scrolling>
                            <ul>
                                <loop comp as value key>
                                    <li class="media-thumbnail" transform=components-detail param="id/{value}" style="background-image: onload url({value|cpath}/preview.jpg)"></li>
                                </loop>
                            </ul>
                        </scrolling>
                    </scroll>
                    <nav class="link-item">
                        <ul>
                            <li transform=components-list>
                                <a>
                                    <div class="link-box">
                                        <span class="title">查看所有组件</span>
                                        <i></i>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </section>
            </div>
            <div class="section-mod {setting.status.activeMainNav, 'docs,components,tutorial,developers'|showAsideNav}">
                <section class=links-list>
                    <h3 class="hd">标签</h3>
                    <ul class="list-of-lists">
                        <loop keys as v k>
                            <li>
                                <a transform="{v[0].href}">#{v[0].title}</a>
                            </li>
                        </loop>
                    </ul>
                </section>
                <section class=foot-nav>
                    <shadow>
                        <style>
                            .btn-group {
                                padding-bottom: 12dp;
                            }
                            .btn-group a {
                                margin-right: 11dp;
                                color: [active-color];
                            }
                        </style>
                        <div class=btn-group>
                            <a class="download-btn" href="https://github.com/ioing/IOING/archive/master.zip">Download</a>
                            <a class="github-btn" href="https://github.com/ioing/IOING" target="_bank">Github</a>
                            <!-- <a class=become-backer-btn transform>赞助</a> -->
                        </div>
                    </shadow>
                </section>
            </div>
        </scrolling>
    </scroll>
</aside>

<footer id="footer">
    <nav>
        <ul>

            <li>
                <a transform="components-store" class="{setting.status.activeMainNav,'components','scaleBounce active','reScaleBounce'|activeMainNav}">
                    <span class="icon nav-icon-activity"></span>
                    <span class="title"></span>
                </a>
            </li>

            <li>
                <a transform="docs-started-ioing" class="{setting.status.activeMainNav,'docs','scaleBounce active','reScaleBounce'|activeMainNav}">
                    <span class="icon nav-icon-discover"></span>
                    <span class="title"></span>
                </a>
            </li>
<!-- 
            <li>
                <a transform="boutique" param="aa:cc,ee:ss">
                    <span class="icon nav-icon-boutique"></span>
                    <span class="title"></span>
                </a>
                <div class="active">
                    <span class="icon nav-icon-boutique"></span>
                </div>
            </li> -->

            <!-- <li>
                <a transform="developers-notice" class="{setting.status.activeMainNav,'developers','scaleBounce active','reScaleBounce'|activeMainNav}">
                    <span class="icon nav-icon-test1"></span>
                    <span class="title"></span>
                </a>
            </li> -->

        </ul>
    </nav>
</footer>

<div class=main-bg></div>

<if status.exists>
    <shadow>
        <style>
            .overlay {
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                z-index: 999999;
                background-color: rgba(0,0,0,.5);
            }
            .content {
                position: absolute;
                top: 50%;
                left: 50%;
                width: 80%;
                max-width: calc([max-width] - 10vw);
                height: 500dp;
                background-color: [active-color];
                border-radius: 6dp;
                transform: translate(-50%, -50%);
            }
            .content .title {
                font-size: 60dp;
                color: #fff;
                text-align: center;
                line-height: 100dp;
            }
        </style>
        <div class=overlay>
            <div class=content>
                <div class=title>2017年7月，隆重发布！</div>
            </div>
        </div>
    </shadow>
</if>


<script name=search>
    var searchResultBox = node('search-result-box')
    var searchResult = node('search-result')
    
    function searchDoc (el) {
        var val = el.value
        var result = []

        if ( val ) {
            scope.nav.each(function (i, list) {
                list.list.each(function (i, item) {
                    if ( !item.keys ) return
                    item.keys.each(function (i, v) {
                        if ( v.match(new RegExp(val, "i")) ) {
                            result.push({
                                title: v,
                                href: item.href
                            })
                        }
                    })
                })
            })
            searchResultBox.style.display = 'block'
        } else {
            searchResultBox.style.display = 'none'
        }

        if ( !result.length ) {
            result.push({
                title: "无结果",
                href: 0
            })
        }

        searchResult.innerTemplate('search-result', {
            list: result
        })
    }

    App.on('transformstart', function () {
        searchResultBox.style.display = 'none'
    })

</script>

